<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="Technology,Novel,Essay,Hexo" />
  <meta name="author" content="wellmoonloft" />
  <meta name="subtitle" content="Connotation fatty refuses to lose weight" />  
  <meta name="description" content="Technology, Essay, Gossip" />
  <meta name="msvalidate.01" content="4504B006DB2A6062F644FCDD2FC0575B" />
  <title>Update hexo to v6.3.0 | Well Talk</title>
  <link rel="apple-touch-icon" href="https://s2.loli.net/2022/12/30/lV2YzG9s86yK3OB.jpg">
  <link rel="icon" href="https://s2.loli.net/2022/12/30/lV2YzG9s86yK3OB.jpg">
  <!-- jquery3.6 -->
  <script async src="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/js/jquery.min-3.6.js"></script>
  <!-- hexo site css -->
  <link async href="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.5/source/css/base-min.css" rel="stylesheet">
  <link async href="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/iconfont/iconfont-min.css" rel="stylesheet">
  <link async href="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/css/github-markdown-min.css" rel="stylesheet">
  <link async href="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/css/highlight-min.css" rel="stylesheet">  
  <!-- fancybox -->
  <link async href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css" rel="stylesheet">  
  <script async src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
  <script async src="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/js/fancybox.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R4XRTRGM56"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R4XRTRGM56');
    </script>  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/en/atom.xml" title="Well Talk" type="application/atom+xml">
</head>
<body>
  <div id="app">
  <div class="header">
  <div class="avatar">
    <a href="https://www.igerm.ee/en"><img src="https://s2.loli.net/2022/12/30/lV2YzG9s86yK3OB.jpg" alt=""></a>
  </div>
  <div class="navbar">
    <ul>
      <li class="nav-item" data-path="/en/"><a href="/en/">Experience</a></li>
      <li class="nav-item" data-path="/en/categories/essay/"><a href="/en/categories/essay/">Essay</a></li>
      <li class="nav-item" data-path="/en/categories/novel/"><a href="/en/categories/novel/">Novel</a></li>
      <li class="nav-item" data-path="/en/about/"><a href="/en/about/">About</a></li>
    </ul>
  </div>
</div>
<script>
  let navs = document.querySelectorAll('.nav-item');
  let pagePath = window.location.pathname;
  for (let nav of navs) {
    let navPath = nav.getAttribute("data-path");
    if (navPath && navPath === pagePath) {
      nav.className = "nav-item active";
    }
  }
</script>       
  <div class="flex-container">          
  <!-- 同时引入 post.ejs 和 index.ejs -->
  
<div class="container post-details" id="post-details">
  <div class="post-content">
    <div class="post-title">Update hexo to v6.3.0</div>
    <div class="post-attach">
      <span class="post-pubtime">
        <i class="iconfont icon-edit" title="Update time"></i> 2022-12-16 20:29
      </span>
      <span class="post-count">≈ 612Words</span>
      <span class="post-count">≈ 3Minutes</span>
    </div>
    <div class="markdown-body"><blockquote>
<p><strong>Note</strong></p>
<p>This article was automatically translated using Google</p>
</blockquote>
<p>In the past few days, I have focused on updating articles, and suddenly found that <code>hexo g</code> displayed a highlight error, because I have been submitting to git to automatically generate articles before, so I have not checked the log carefully</p>
<p>The main reason is that it only reports a warning when it is generated, and it does not affect the use. This time I found out that I wanted to adjust the theme style, so I need to upgrade the plugin (it has not been upgraded for almost a year, and my hexo version is still 5.4, now 6.3)</p>
<h3 id="Upgrade-hexo-and-plugins"><a href="#Upgrade-hexo-and-plugins" class="headerlink" title="Upgrade hexo and plugins"></a>Upgrade hexo and plugins</h3><blockquote>
<p>There are many ways to upgrade node and npm on the Internet, just search for it</p>
</blockquote>
<ol>
<li>Check the hexo version: <code>hexo version</code></li>
<li>Global upgrade: <code>npm i hexo-cli -g</code></li>
<li>Navigate to the hexo directory</li>
<li>Check plugin: <code>npm-check</code></li>
<li>You can manually upgrade according to the prompt, or directly: <code>npm-upgrade</code> + <code>npm update --save</code></li>
<li>Check the version number again to confirm: <code>hexo version</code></li>
</ol>
<h3 id="Check-if-the-modified-place-is-overwritten"><a href="#Check-if-the-modified-place-is-overwritten" class="headerlink" title="Check if the modified place is overwritten"></a>Check if the modified place is overwritten</h3><p>There is no problem with the upgrade itself, but when using it, because I don’t like to write comments, I may manually modify some plug-ins and forget it. This time, it will be overwritten after the upgrade.</p>
<p>There are two main system plug-ins I changed:</p>
<p><a href="https://www.igerm.ee/en/experience/Hexo's-beautification-optimization-and-Lighthouse's-ultimate-tracking/#Modify-hexo-generator-index-pagination">hexo-generator-index</a> As mentioned in the article, I removed several categories from the homepage. If I don’t modify them, the paginated pages still contain articles of this category, which will cause the number of articles on the page to be incorrect.</p>
<p><code>hexo-generator-category</code>, I also changed this, but I forgot it completely, which caused a problem with the sorting in my novel category. I found the reason by directly modifying and comparing with git, sweating…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">&#x27;hexo-pagination&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>. <span class="built_in">exports</span> = <span class="keyword">function</span>(<span class="params">locals</span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> config = <span class="variable language_">this</span>.<span class="property">config</span>;</span><br><span class="line">   <span class="keyword">const</span> perPage = config. category_generator. per_page;</span><br><span class="line">   <span class="keyword">const</span> paginationDir = config.<span class="property">pagination_dir</span> || <span class="string">&#x27;page&#x27;</span>;</span><br><span class="line">   <span class="keyword">var</span> orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-order&#x27;</span>; <span class="comment">// use variable var instead of constant</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> locals.<span class="property">categories</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">result, category</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (!category. length) <span class="keyword">return</span> result;</span><br><span class="line">    </span><br><span class="line">     <span class="comment">//When classified as a novel, manual sorting is used, and others are sorted by default date. This order is written in the Front-matter of the novel md file</span></span><br><span class="line">     <span class="comment">//For centralized display of novels in the same category</span></span><br><span class="line">     <span class="comment">//Then sort by date in the novel page</span></span><br><span class="line">     <span class="keyword">if</span>(category.<span class="property">name</span> == <span class="string">&#x27;novel&#x27;</span>)&#123;</span><br><span class="line">       orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-order&#x27;</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-date&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> posts = category. posts. <span class="title function_">sort</span>(orderBy);</span><br><span class="line">     <span class="keyword">const</span> data = <span class="title function_">pagination</span>(category. path, posts, &#123;</span><br><span class="line">       per <span class="title class_">Page</span>,</span><br><span class="line">       <span class="attr">layout</span>: [<span class="string">&#x27;category&#x27;</span>, <span class="string">&#x27;archive&#x27;</span>, <span class="string">&#x27;index&#x27;</span>],</span><br><span class="line">       <span class="attr">format</span>: paginationDir + <span class="string">&#x27;/%d/&#x27;</span>,</span><br><span class="line">       <span class="attr">data</span>: &#123;</span><br><span class="line">         <span class="attr">category</span>: category.<span class="property">name</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> result.<span class="title function_">concat</span>(data);</span><br><span class="line">   &#125;, []);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Hurry up and manually record the upgrade process, save it and forget about it when you upgrade later, the final display effect is very good</p>
<p><img src="https://s2.loli.net/2022/12/30/Cjxh8RQy7DFYp5X.jpg" alt="1671162733620"></p>
<h3 id="Remaining-problem"><a href="#Remaining-problem" class="headerlink" title="Remaining problem"></a>Remaining problem</h3><p>In fact, there is still a remaining problem, which is the context address of the article. This address seems to have been created when the system paginated or even earlier, and the original logic is no problem. But I want him to generate three different context-corresponding addresses based on the three categories of essays, experiences, and novels</p>
<p>That is to say, the context of the articles in my essays will not point to the articles in the experience. At present, it is sorted by time globally. This should also find the place to modify, but let’s talk about it in two days.</p>
</div>
      
        <div class="prev-or-next">
          <div class="post-foot-prev">
              <a href="/en/experience/Realize-that-the-prev-and-next-pages-only-contain-articles-of-the-same-category/" target="_self">
                <i class="iconfont icon-chevronleft"></i>  
                <span>Realize that the prev and next pages only contain articles of the same category</span> 
              </a>
          </div>
          <div class="post-foot-next">
              <a href="/en/experience/Use-ipv6-and-ddns-to-do-external-access-for-Synology/" target="_self">
                <span>Use ipv6 and ddns to do external access for Synology</span>
                <i class="iconfont icon-chevronright"></i>             
              </a> 
          </div>
        </div>
      
    </div>
    
<div class="post-catalog" id="catalog">
  <div class="title">Contents</div>
  <div class="catalog-content">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Upgrade-hexo-and-plugins"><span class="toc-text">Upgrade hexo and plugins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Check-if-the-modified-place-is-overwritten"><span class="toc-text">Check if the modified place is overwritten</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Remaining-problem"><span class="toc-text">Remaining problem</span></a></li></ol>
  </div>
</div>
<script async src="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/js/catalog.js"></script>


    <div class="comments-container">
  <script src="https://utteranc.es/client.js"
        repo="wellmoonloft/repo_wellmoonloft"
        issue-term="pathname"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>
</div>
  </div>

  <div class="footer">
  <div class="social">
    <ul>
      <li><a title="rss" href="/en/atom.xml"><i class="iconfont icon-rss"></i></a></li>
    </ul>
  </div>
  <div class="footer-more">
      <a href="https://www.igerm.ee/en/">Copyright © wellmoonloft 2024</a>  
  </div><div class="footer-more">
      <a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges ｜ Powered by Hexo</a>  
  </div>
</div>
  </div>
  <div style="position: fixed;right: 2.2rem;top: 2.2rem;font-weight: bold;font-size: 1.6rem;">
  <a href="https://www.igerm.ee"> CN</a>
  <a href="https://www.igerm.ee/jp"> JP</a>
  <a href="https://www.igerm.ee/en"> EN</a>
  </div><div class="back-to-top hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>
<script async src="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.4/source/js/backtoTop.js"></script>
  <div class="search-icon" id="search-icon">
    <a href="javascript: void(0)"><i class="iconfont icon-search"></i></a>
  </div>
  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)"><i class="iconfont icon-search"></i></a>
        </span><input type="text" class="search-input" id="search-input" placeholder="Search...">
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)"><i class="iconfont icon-close"></i></a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>
  <script async src="https://cdn.jsdelivr.net/gh/wellmoonloft/peach@v0.1.6/source/js/search.js"></script>
  </div>
</body>
</html>