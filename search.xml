<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Use iPhone&#39;s built-in shortcuts and numbers to keep accounts</title>
      <link href="/en/experience/Use-iPhone-built-in-shortcuts-and-numbers-to-keep-accounts/"/>
      <url>/en/experience/Use-iPhone-built-in-shortcuts-and-numbers-to-keep-accounts/</url>
      
        <content type="html"><![CDATA[<p>Since I started investing, I have become more and more stingy (although I was stingy before…)</p><p>I want to write a financial management APP to record income and expenses, but all payment methods except Apple Pay cannot obtain transaction information due to security considerations. The most troublesome thing about bookkeeping is the process of recording. If you can’t record without feeling, who can manually record every day for 360 days?</p><p>I happened to see an article on Xiaohongshu or somewhere else that uses iPhone shortcuts and iPhone’s built-in image recognition + screenshots to automatically identify bills, and then automatically write them into Apple’s built-in numbers. With this data, you can make table templates and analysis templates in Numbers by yourself. However, the big brother seems to have made it into paid content, and it is said that it sold tens of thousands of yuan. I have to admire his business acumen.</p><h3 id="First-set-Numbers"><a href="#First-set-Numbers" class="headerlink" title="First set Numbers"></a>First set Numbers</h3><p>There are three names to remember:</p><ol><li><p>File name</p></li><li><p>Form name (sheet name)</p></li><li><p>Table name</p></li></ol><p><img src="https://s2.loli.net/2024/09/18/ipwgZ8kIYNQuxse.jpg"></p><h3 id="Set-shortcuts"><a href="#Set-shortcuts" class="headerlink" title="Set shortcuts"></a>Set shortcuts</h3><p>You can directly use the one I shared to import, or you can set it yourself</p><p>To import, just copy the link below and open it in Safari on your phone</p><p><code>https://www.icloud.com/shortcuts/94e976c316b84a9e95dc25c48842dd86</code></p><ol><li><p>Screenshot</p></li><li><p>Extract text from the screenshot</p></li><li><p>Select the text like <code>number </code>+<code>.</code>+<code>number</code> from the text to extract the price</p></li><li><p>If the amount cannot be extracted, set a variable and require manual input</p></li><li><p>If the amount is fine or after manual input</p></li><li><p>Then you are required to enter the category of this expenditure, which can be added, deleted, or modified by yourself</p></li><li><p>With the amount and category, insert it directly into number, insert the current time, category, and amount in order, and then choose to insert it at the end of the table</p></li></ol><p>Just like the picture below</p><p><img src="https://s2.loli.net/2024/09/18/WqJokyCfRureQVH.jpg" alt="IMG_6549.PNG_compressed"></p><p><img src="https://s2.loli.net/2024/09/18/oRW7V9mdY5aFvkq.jpg" alt="IMG_6550.PNG_compressed"></p><p>Whether you import or write it yourself, you only need to change the last three table names, the file name of numbers, the name of sheet, and the name of the table. After the modification, you can use it.</p><h3 id="Set-up-quick-launch"><a href="#Set-up-quick-launch" class="headerlink" title="Set up quick launch"></a>Set up quick launch</h3><ol><li>iPhone enters settings–accessibility–touch–tap back</li><li>In the double or triple tap, select the shortcut command [Automatic Accounting] you wrote or imported</li><li>After you pay, when the page with payment success details appears on the phone, double tap the back and select a category to complete</li></ol><p><img src="https://s2.loli.net/2024/09/18/Pq9ivVEkfSyRz6r.jpg" alt="IMG_6552.PNG_compressed"></p><p>As you can see, the amount has been entered. This method can achieve semi-automatic accounting without spending money. However, you still have to manually select the category, and you must click on the back twice. There is no way around it. There is no initiation logic. Even if you set it up, for example, when you start Alipay, the screenshot at that time is not the settled amount, so it can only be considered semi-automatic.</p><p><img src="https://s2.loli.net/2024/09/18/x5g6JWTrzFI7o9b.png" alt="image-20240918132307191"></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Esketit A investment platform from Ireland</title>
      <link href="/en/experience/Esketit&#39;s-investment-platform-from-Ireland/"/>
      <url>/en/experience/Esketit&#39;s-investment-platform-from-Ireland/</url>
      
        <content type="html"><![CDATA[<p>Today I want to share a p2p investment platform that I have used for nearly a year. It promises an annualized return of more than 10% to 11%. In my experience, it is more than 11% per year. In addition, like peerbeery, it also provides a loyalty program reward. If the investment is activated at 25,000&#x2F;50,000 euros, an additional 0.5%&#x2F;1% return bonus will be added (but only investments in Jordan can enable this program)</p><p><img src="https://s2.loli.net/2024/09/10/kyozCJOZbKR8U7j.png" alt="image-20240910134437903"></p><p><a href="https://esketit.com/">Esketit</a> is a multi-lender P2P investment website based in Ireland, with investable products including business loans, short-term loans, etc. It was launched in 2020 slightly later than peerberry, and was founded in December 2020 by Davis Barons and Matiss Ansviesulis, both founders of the highly successful AvaFin Holding (formerly Creamfinance). The group has been profit-focused since its inception in 2012, with continued growth and increasing profitability. Loans are issued by affiliated loan originators, and the entire process is transparent and easy to monitor. Davis and Matiss adopt a “skin in the game” approach, thereby providing more security for investors on the Esketit platform.</p><p>Peerberry has actually always been my top choice, but since 2023, they have more investors and fewer lenders. At the same time, due to the Russian invasion of Ukraine, their loans in Ukraine and Russia have been severely delayed, and a group of users have been lost. But on the bright side, they are the only one? The platform that got the war loan back is still reliable.</p><p>But the problem is that I put a lot of money on Peerberry and couldn’t invest. I had to look for similar products on Trustpilot, and then I found Esketit, which has a <a href="https://uk.trustpilot.com/review/esketit.com">high score of 4.4 points</a> on Trustpilot. You should know that there will be a lot of complaints about P2P investment platforms like this, and 4.4 points is already very high. I checked their 1-point reviews, one of which was about account being stolen, and another was about being unable to register, etc. There was no big problem, so I started my investment on Esketit.</p><p>If you are a user of peerberry like me, then Esketit will be very suitable for you. It also has a 60-day default repurchase guarantee. The difference between it and peerberry is:</p><ol><li><p>It has a secondary market, but I don’t recommend it</p></li><li><p>Its automatic investment strategy has a combination investment method, you can worry-free and let the AI strategy match the investment</p></li></ol><p><img src="https://s2.loli.net/2024/09/10/P1cBeCwzlf2ZUY7.png" alt="image-20240910134543098"></p><p>However, I did not use this strategy. I continued my short-term loan investment method, mainly because of compound interest. Choosing a short-term loan of about 3 to 30 days can make full use of compound interest calculation to quickly increase your wealth.</p><p>I found a <a href="https://www.investor.gov/financial-tools-calculators/calculators/compound-interest-calculator">compound interest calculator</a>. Assuming you have 20,000 euros in principal, compound interest is calculated monthly, and 300 euros are added each month. The annual interest rate is 10%. Then after 5 years, you will get <strong>32,906.18</strong> yuan. If you don’t calculate compound interest, you can only get <strong>32,210.2</strong>. The longer the time, the greater the difference. You spend the same money and the same time, and the difference in 5 years is <strong>695.98</strong>.</p><p>Automatic investment options include country, loan term, interest rate and loan originator. It should be noted that some loan originators will have delayed payment. Here is the <a href="https://esketit.com/statistics">statistics</a>. Of course, I hope to choose an investment with 100% on-time repayment, but you may not be able to grab it. So instead of worrying about the default rate, it is better to diversify your investments, such as keeping the single amount to 300 euros, so that the risk is spread out and your large funds will not be delayed for 1 to 60 days. I think this is acceptable.</p><p>Like Peerberry, their customer service is also friendly. I like to send emails when I have problems, and they are also happy to get feedback from customers.</p><h2 id="The-point-l-like"><a href="#The-point-l-like" class="headerlink" title="The point l like"></a>The point l like</h2><ul><li>High interest rates - usually 10% to 11%, and short periods (I set up automatic investments for 3 to 30 days, and the single amount does not exceed 300 euros, which can greatly avoid risks)</li><li>One of the best designed P2P websites. Simple, beautiful and practical design</li><li>Esketit includes multiple lenders, which will provide diversification opportunities.</li><li>Most loans have a buyback guarantee. <strong>If the loan is overdue for more than 60 days, the lender will buy back the loan and pay the principal and interest</strong></li><li>The website is available in English, German and Spanish</li><li>So far, the performance of the loans has been good and transparent, and this <a href="https://esketit.com/statistics">statistics</a> is not available on peerberry</li><li>The management team is willing to listen to feedback and provide good communication (almost every question is answered within two days, including usage feedback and investment overdue questions)</li></ul><h2 id="question"><a href="#question" class="headerlink" title="question"></a>question</h2><p>This website may attract a large number of peerberry users, and most of them will choose automatic investment. Therefore, if your automatic investment settings are too strict, some funds will not be automatically invested. Therefore, it is better to log in once every two weeks. I hope they can trigger an idle fund reminder, such as sending me an email if there is idle funds for more than a certain number of days.</p><h2 id="Risks-and-benefits"><a href="#Risks-and-benefits" class="headerlink" title="Risks and benefits"></a>Risks and benefits</h2><p>Since most loans on Esketit come with a buyback guarantee, it is important to understand the financial situation of each lender. Esketit provides business updates for each loan originator and also shares other financial information.</p><p>But to be honest, I didn’t go through the details of each lender. I trusted the Trustpilot rating and my previous experience with P2P platforms. Of course, I still hope that peerberry can get better so that I can invest my money in both platforms. At present, I only keep 1,000 euros in peerbeery because there are really no investment opportunities.</p><p>By the way, Esketit is only for residents of the EEA region. You can register with your passport, but you need to have euros. Wise is a good choice. They have linked with Wise and can deposit directly. In addition, bank transfers, including N26 and Revolut, are no problem.</p><p>If you want to invest and have euros, <a href="https://esketit.com/?promo=R1670160093">then click here to get started</a></p><p><img src="https://s2.loli.net/2024/09/10/D9RPJSQHT1lxFeC.png" alt="image-20240910140836364"></p><p>It should be noted that you will get a bonus if you register and invest through the link above. The bonus depends on the amount of investment in the first month, and I will also get a corresponding amount. If you don’t want to give me these bonuses, you can also click here <a href="https://esketit.com/">direct registration</a>, it doesn’t matter, but you are still welcome to click the link above.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> invest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>West Korea&#39;s attitude is really ambiguous</title>
      <link href="/en/essay/West-Korea&#39;s-attitude-is-really-ambiguous/"/>
      <url>/en/essay/West-Korea&#39;s-attitude-is-really-ambiguous/</url>
      
        <content type="html"><![CDATA[<p>Since Russia invaded Ukraine, the attitude of the leaders of West Korea has been extremely ambiguous, with a completely mean face.</p><p>On the one hand, they say they remain neutral, on the other hand, they support it through various speeches internally, and at the same time secretly aid Russia in private, but they just don’t admit it. They are really shameless.</p><p>Until now, Ukraine wants to take back the occupied territory, Finland wants to take back the islands in the Gulf of Finland, Georgia wants to take back Abkhazia, Moldova wants to recover the coast of the Dniester River, and Japan wants to take back the four northern islands.</p><p>However, this country, which has more than four million square kilometers of land occupied, has its outlet to the sea in Northeast Asia blocked, and has changed Vladivostok to “rule the East” in Russian, has been shouting “Go Russian daddy” from beginning to end.</p><p>How dare such an idiot say that not an inch of land is redundant? It’s pure nonsense.</p>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Can you post articles if you are dead?</title>
      <link href="/en/essay/Can-you-post-articles-if-you-are-dead/"/>
      <url>/en/essay/Can-you-post-articles-if-you-are-dead/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>The answer is yes!</p><p>Just start training a mental model of your AI from now on!</p><p>The purpose of our Moments is to share, so what triggers your desire to share must be something you encounter. In the Internet age, the proportion of sharing what you encounter may not even be 5%. It’s more about the feeling you get after seeing the news and other people’s circle of friends.<br>Such as commenting, or sharing a favorite photo and music.</p><p>Then we can build this kind of AI model. The training cycle will be very long, but it is also subtle. After all, your evaluation of something when you were twenty must be different from when you were thirty.</p><p>So the simpler way is:</p><ol><li><p>Build your own information sources (such as news, headlines, Weibo, etc., they also make big data recommendations based on your preferences)</p></li><li><p>Executable algorithm (latitude includes: what time do you watch every day, what situations will trigger your desire to share, etc.)</p></li><li><p>Correction probability (the model is updated from time to time, but once the model has changed greatly compared with your real sharing, it is necessary to judge according to the source of information, what caused the change in your sharing, such as festivals? Life experience, etc. , it can be adjusted to the greatest extent, which is very important, because once you die, the system will adjust the sharing according to this correction algorithm)</p></li><li><p>Sending goals (some things you like to put on Moments, some things you like to put on Weibo, different social channels, and then make algorithm corrections)</p></li><li><p>Regular testing (you need a certain amount of time to conduct AI testing, turn on a switch, and then see if it will also trigger sharing when you want to share, or if you want to share when it wants to share, use it to adjust a “share trigger threshold”)</p></li></ol><p>Finally, when you die, as long as there are people in the world who are willing to pay you for the server, then your social media will continue to be updated. Even friends who are not so close, don’t even know that you are dead, and what they see is still you.</p>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Flutter writes a Nas music player (5)</title>
      <link href="/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(5)/"/>
      <url>/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(5)/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><h3 id="1-Encapsulate-a-Toast"><a href="#1-Encapsulate-a-Toast" class="headerlink" title="1. Encapsulate a Toast"></a>1. Encapsulate a Toast</h3><p>There is no such a useful prompt box in Flutter, there is only a <strong>snackbar</strong> at the bottom, which feels outrageous</p><p>If I click to save the server, and there are important prompts such as missing information, it must be in the form of a dialog box, asking the user to click confirm to troubleshoot the error. But for example, the subtle operation of clicking on the single cycle is also a control that needs to prompt the user to change successfully and automatically close within one second. I searched the whole Internet and said that there is no official corresponding one, and I can only use a third-party plug-in. I am afraid that such a small thing will lead to a third-party control. I am afraid that it is a waste of money. It is also very simple to write one by myself.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyToast</span> </span>&#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">void</span> <span class="keyword">show</span>(&#123;<span class="keyword">required</span> BuildContext context, <span class="keyword">required</span> <span class="built_in">String</span> message&#125;) &#123;</span><br><span class="line">     OverlayEntry overlayEntry = <span class="keyword">new</span> OverlayEntry(builder: (context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Positioned(</span><br><span class="line">           bottom: <span class="number">95</span>,</span><br><span class="line">           child: Container(</span><br><span class="line">             <span class="comment">//It&#x27;s actually a full-screen horizontal bar, just a transparent color</span></span><br><span class="line">             color: Colors.transparent,</span><br><span class="line">             width: MediaQuery.of(context).size.width,</span><br><span class="line">             alignment: Alignment. center,</span><br><span class="line">             child: Card(</span><br><span class="line">               child: Padding(</span><br><span class="line">                 padding: EdgeInsets. all(<span class="number">10</span>),</span><br><span class="line">                 child: Text(</span><br><span class="line">                   message,</span><br><span class="line">                   style: normalGrayText,</span><br><span class="line">                 ),</span><br><span class="line">               ),</span><br><span class="line">               color: badgeDark,</span><br><span class="line">             ),</span><br><span class="line">           ));</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     Overlay.of(context)?.insert(overlayEntry);</span><br><span class="line">     Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>)).then((value) &#123;</span><br><span class="line">       overlayEntry. remove();</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// call method</span></span><br><span class="line">MyToast.<span class="keyword">show</span>(context: context, message: <span class="string">&quot;Single cycle&quot;</span>);</span><br></pre></td></tr></table></figure><p>All colors and backgrounds can be customized, how beautiful it is, this code can really be used directly, it is much better than introducing a third-party control, welcome to copy, it is in <strong>lib&#x2F;screens&#x2F;common&#x2F;myToast. In dart</strong>, there is a style file in <strong>baseCSS.dart</strong> in the same directory. If I could find someone to provide this code yesterday, I would not write it myself. How delicious it is to copy</p><p><img src="https://s2.loli.net/2023/01/16/emf1QUVuktnd8Gq.jpg" alt="1673846278685"></p><h3 id="2-Still-started-with-NetEase-Cloud"><a href="#2-Still-started-with-NetEase-Cloud" class="headerlink" title="2. Still started with NetEase Cloud"></a>2. Still started with NetEase Cloud</h3><h4 id="2-1-Deploy-the-ready-made-NetEase-Cloud-API"><a href="#2-1-Deploy-the-ready-made-NetEase-Cloud-API" class="headerlink" title="2.1 Deploy the ready-made NetEase Cloud API"></a>2.1 Deploy the ready-made NetEase Cloud API</h4><p>The main reason is that it is too silly to upload and download lyrics on the webpage by yourself, and then put them on your own server? What if <a href="https://www.navidrome.org/">Navidrome</a> supports it after the update that day, right? This should be what the server should do, so don’t worry about it</p><p>First of all, NetEase Cloud’s <strong>pc api</strong> is still available, and you can directly capture the data with postman, that’s for sure, otherwise, how to do it on the web side, it must be released. But you can only use the http protocol. If you want to use https, you need to log in and get your identity information. However, it is well known that ios does not support the http protocol for a long time (of course there are ways, but I just think it is unnecessary)</p><p>There are ready-made wheels on Github that can be used <a href="https://github.com/Binaryify/NeteaseCloudMusicApi">NeteaseCloudMusicApi</a>, its working principle is cross-site request forgery (CSRF), forging request headers, calling official API, anyway, as long as you External services are also unavoidable. At the same time, it supports serverless deployment to Vercel, which is very flattering.</p><p>Of course, due to the well-known brain-dead reasons (I really hate this wall now, because of the wall, there are a large number of brain-dead little pinks, okay digress), Vercel needs to make another address when doing CNAME, Otherwise, domestic visits will not be possible. You see, we are such an exception, so great!</p><ol><li><p>First fork this library to make your own library <a href="https://github.com/Binaryify/NeteaseCloudMusicApi">NeteaseCloudMusicApi</a></p></li><li><p>Log in to <a href="https://vercel.com/">vercel</a>, log in with the github account, and then you will be prompted to install the githubAPP, and you can deploy it directly after completion</p></li><li><p>Bind a custom domain name, pointing to a CNAME record that supports domestic access: <strong>cname-china.vercel-dns.com</strong>, I seriously doubt that this may be blocked in the future</p></li></ol><p><img src="https://s2.loli.net/2023/01/16/4nRqAG61YtiT7gD.png" alt="image-20230116183737042"></p><p>Seeing this page means that the deployment is successful. As long as there is no problem in the future, you don’t need to open this page again…</p><h4 id="2-2-Make-a-page-to-manually-get-lyrics"><a href="#2-2-Make-a-page-to-manually-get-lyrics" class="headerlink" title="2.2 Make a page to manually get lyrics"></a>2.2 Make a page to manually get lyrics</h4><p>Why not make it automatic in batches? Because of two reasons:</p><ol><li>The songs I collected are not necessarily sung by the original singers, so you may not be able to find them when you search for the lyrics, and even if you receive the original singers, there are many versions of the lyrics, and it is very possible to make them automatic The lyrics that came down are all wrong, and it will be more troublesome to adjust them when the time comes</li><li>If it is made in batches, it is easy to be blocked, and it is not necessary</li></ol><p>The workflow is just:</p><ol><li>Create a new song lyrics correspondence table</li><li>Make two DIO requests: search for songs according to the song title and artist name, get the song id of NetEase Cloud, and then use this song id to grab the lyrics, this is a one-to-one correspondence</li><li>Make a page, three tabs, search out the songs in your own music library, and then click to pop up a box, put the singer and song name in, this box can be modified. If it is sung by an online singer, change it to the original singer’s name, use the above request to search for songs on NetEase Cloud, get the second TAB, then choose a song that you think is right to search for lyrics, and get the lyrics back to the third View the page, if you think it is what you want, then click Bind, save your song id and lyrics in the database and it will be OK!</li></ol><p><img src="https://s2.loli.net/2023/01/16/q4cTbEs5YerWy3P.jpg" alt="1673866175582"></p><p><img src="https://s2.loli.net/2023/01/16/ZxgDQAP6BtcsHbj.jpg"></p><p><img src="https://s2.loli.net/2023/01/16/7bAVZG2edyTkjQB.jpg" alt="1673866144745"></p><p>As a result… the lyrics are all finished, but the playlist is still not done, hahahaha, maybe I repel it in my heart…</p><p>I can’t write any more functions, if I write any more, I’ll finish writing, then there’s nothing left to play with… Now what’s left is a playlist, which is a big function, and what’s left is to make error-throwing adjustments and UAT</p><p>After running everything on Mac OS, I can start to adapt the IOS side, but I put it on the real machine and the virtual machine for a brief look the day before yesterday, basically there is nothing to adjust</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> subsonic </tag>
            
            <tag> airsonic </tag>
            
            <tag> music </tag>
            
            <tag> navidrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter writes a Nas music player (4)</title>
      <link href="/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(4)/"/>
      <url>/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(4)/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Today I finished the long-awaited homepage, including three: random albums, most played songs list, and recently added albums</p><p>In fact, the biggest difference between this APP and Netease Cloud is that you collect and listen to these songs yourself, so those recommended algorithms are not needed</p><h3 id="CustomScrollView"><a href="#CustomScrollView" class="headerlink" title="CustomScrollView"></a>CustomScrollView</h3><p>The most troublesome thing about the homepage is the mixed arrangement of horizontal and vertical lists, but it is not very complicated. The main thing is that you must remember to set a fixed height and width, or the maximum width and maximum height, otherwise it is very easy to report an error</p><p>The first is <strong>Sliver</strong>, which makes people love and hate. The built-in animation saves a lot of things, but because of these automatic functions, only a small number of controls support it as its <strong>child</strong>. But fortunately, the official gave a <strong>SliverToBoxAdapter</strong> component, so that components that are not his <strong>child</strong> can be layered, which is very nice</p><p>The layout is a horizontal scrolling list of 10 random albums, below is a vertical list of the 10 most played songs, and below that is the most recently added horizontal 10 albums, maybe changing the most played songs to 5 looks better?</p><p><img src="https://s2.loli.net/2023/01/13/OHhjqkunaQwzP4p.png" alt="WechatIMG650"></p><p>The implementation is also relatively simple. In addition to the pro-son <strong>SliverList</strong> control, for example, the title part needs to be set with <strong>SliverToBoxAdapter</strong>, just look at the code</p><p>Because I want to be compatible with the desktop, the desktop can slide left and right except Apple’s Magic Mouse, the general mouse does not have this function, so I need to add a button that slides left and right to click on the desktop</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> CustomScrollView(</span><br><span class="line">       slivers: &lt;Widget&gt;[</span><br><span class="line">         <span class="comment">//This is the home page text</span></span><br><span class="line">         SliverToBoxAdapter(</span><br><span class="line">           child: Container(</span><br><span class="line">               padding: leftrightPadding,</span><br><span class="line">               child: Text(indexLocal, style: titleText1)),</span><br><span class="line">         ),</span><br><span class="line">         <span class="keyword">if</span> (_albums != <span class="keyword">null</span> &amp;&amp; _albums!.length &gt; <span class="number">0</span>)</span><br><span class="line">           SliverToBoxAdapter(</span><br><span class="line">             <span class="comment">//This set of horizontal title bars, including text and left and right buttons, I wrote a public file for easy application</span></span><br><span class="line">               child: MySliverControlBar(</span><br><span class="line">             title: <span class="string">&quot;Random Album&quot;</span>,</span><br><span class="line">             controller: _randomAlbumcontroller,</span><br><span class="line">           )),</span><br><span class="line">         <span class="keyword">if</span> (_albums != <span class="keyword">null</span> &amp;&amp; _albums!.length &gt; <span class="number">0</span>)</span><br><span class="line">           SliverToBoxAdapter(</span><br><span class="line">             <span class="comment">//This set of horizontal scrolling pictures, I wrote a public file for easy application</span></span><br><span class="line">               child: MySliverControlList(</span><br><span class="line">             controller: _randomAlbumcontroller,</span><br><span class="line">             albums: _albums!,</span><br><span class="line">             url: _imageURL!,</span><br><span class="line">           ))</span><br><span class="line">         ]</span><br><span class="line">   );</span><br></pre></td></tr></table></figure><p>This is the content in the homepage build, and then <strong>MySliverControlBar</strong> is very simple, it is a Row set a Row layout</p><p><strong>MySliverControlList</strong> is actually a horizontal <strong>ListView</strong></p><p>Note here that if there is no need for the desktop side, that is, if you don’t need to manually control the scrolling, you don’t need to write a controller, but if I need to control the scrolling, I need to inject a controller. The control method is relatively simple, just click the button to trigger</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">controller.animateTo(controller.offset - _size.width / <span class="number">2</span>,</span><br><span class="line">                         duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">200</span>),</span><br><span class="line">                         curve: Curves. ease);</span><br></pre></td></tr></table></figure><p>Offset is the displacement, atmospheric point, click once to move half the screen directly, the saved point will not be driven for half a day</p><p>In this way, the homepage is finished, and if you want to add any content to it later, it will be done in minutes, so let’s leave it at that.</p><p>In addition, the layout was adjusted again today, and the following control part was completely taken into <strong>bottomNavigationBar</strong>, so that the layout looks much simpler, and there may be another adjustment later, which is the middle part. Directly embed <strong>LeftScreen</strong> into each page, so that I can use flutter’s overall routing, and I can remove a global variable that controls routing</p><p>The most important thing is to make another judgment. If it is on the desktop, it will display <strong>LeftScreen</strong>. If it is on the mobile terminal, add navigation directly in <strong>bottomNavigationBar</strong>, so that the side-sliding button on the top left of the mobile terminal It can be removed. The left side is free to leave a place for Windows. When the client is Windows, the search and setting buttons can be pasted to the left, because the zoom in and out of Windows and the fork are on the right. I removed it for the sake of looking good. The title bar, so it can’t block the fork</p><h3 id="Using-MediaQuery-causes-the-soft-keyboard-to-not-pop-up"><a href="#Using-MediaQuery-causes-the-soft-keyboard-to-not-pop-up" class="headerlink" title="Using MediaQuery causes the soft keyboard to not pop up"></a>Using MediaQuery causes the soft keyboard to not pop up</h3><h4 id="Mobile-solution"><a href="#Mobile-solution" class="headerlink" title="Mobile solution"></a>Mobile solution</h4><p>This is a problem encountered during multi-terminal development, because <strong>Scaffold</strong> will adapt to different window sizes according to different devices, and the method to dynamically get the window size is *<em>MediaQuery.of(context).size</em> *, this is very convenient when developing on the desktop, but there will be problems when the keyboard pops up on the mobile phone</p><p>If the height of your panel is defined by size, but the soft keyboard pops up, the height of sliding up the form is also calculated by this, so after sliding up, your panel pushes down the position of the keyboard, which will cause the soft keyboard Frequent flashing will not keep the pop-up state, and the page keeps refreshing</p><p>If you want to do forced positioning, the best way is to use <strong>window.physicalSize</strong>, because the size of the form on the mobile terminal will not change, and then in order to do multi-terminal adaptation, the final width used should be: <strong>window .physicalSize.width &#x2F; window.devicePixelRatio</strong>, and add <strong>resizeToAvoidBottomInset: false</strong> in <strong>Scaffold</strong> to avoid errors caused by small displacements</p><h4 id="Desktop-solution"><a href="#Desktop-solution" class="headerlink" title="Desktop solution"></a>Desktop solution</h4><p>After the mobile terminal is set up, there will be such a problem on the desktop terminal, <strong>window.physicalSize</strong> is called once. However, the desktop side can be dragged to zoom in and out. If we continue to use <strong>window.physicalSize</strong> on the desktop side, the panel will still be at the original height when zooming in and out. At this time, we want it to make dynamic adjustments , there are two ways to do it, one is to add a window listener to reacquire window.physicalSize when the size of the window changes, and the easiest way is to continue to use <strong>window.physicalSize</strong>, But put it in a global variable</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ValueNotifier&lt;<span class="built_in">double</span>&gt; windowsWidth =</span><br><span class="line">     ValueNotifier&lt;<span class="built_in">double</span>&gt;(<span class="built_in">window</span>. physicalSize. width / <span class="built_in">window</span>. devicePixelRatio);</span><br><span class="line"></span><br><span class="line">ValueNotifier&lt;<span class="built_in">double</span>&gt; windowsHeight =</span><br><span class="line">     ValueNotifier&lt;<span class="built_in">double</span>&gt;(<span class="built_in">window</span>. physicalSize. height / <span class="built_in">window</span>. devicePixelRatio);</span><br></pre></td></tr></table></figure><p>Then when the outermost layer is built, it is outside <strong>Saffold</strong>, just right where <strong>MediaQuery.of(context).size</strong> can be obtained to make a value change, and then there is no need to do Value in other places Listening, because flutter will automatically <strong>rebuild saffold</strong> when the window changes. At this time, the change of these two values ​​will be triggered first, and then the latter will be rendered. When rendering, the new value will naturally be taken, no need Do the monitoring again, if you can be a little lazy, just be a little lazy, the value monitoring needs to be set up again, all kinds of nesting dolls are too uncomfortable to watch</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Use this to dynamically monitor form changes when it is not a mobile terminal</span></span><br><span class="line">     <span class="comment">//If it is a mobile terminal, the form will not change</span></span><br><span class="line">     <span class="keyword">if</span> (!isMobile. value) &#123;</span><br><span class="line">       windowsWidth.value = MediaQuery.of(context).size.width;</span><br><span class="line">       windowsHeight.value = MediaQuery.of(context).size.height;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><p>In this way, the adaptation of the mobile terminal and the desktop terminal can be completed with the least code</p><h3 id="The-matte-effect-being-played"><a href="#The-matte-effect-being-played" class="headerlink" title="The matte effect being played"></a>The matte effect being played</h3><p>Originally, I wanted to be “rule” and split the top and bottom into <strong>AppBar</strong> and <strong>bottomSheet</strong>, but I changed my mind when writing the playing page, because when making the bottom pop-up window, I hope that a full-screen page will pop up directly, instead of being stuck between <strong>AppBar</strong> and <strong>bottomSheet</strong>, so that even if the effect of frosted glass is done, it looks…actually pretty good, but um , I have OCD…</p><p><img src="https://s2.loli.net/2023/01/14/4TIs16giHNxMPdm.png" alt="WechatIMG21777"></p><p>This kind of pop-up window that is playing feels…not good-looking, so I still continue my violent thinking, directly write the top and bottom into my own control to achieve a full-screen effect, and at the same time, I can rearrange the playback control on the pop-up page button, so put more buttons on it for movement.</p><p>The setting here is <strong>BoxDecoration(color: Colors.black.withOpacity(0.7))</strong>, I think it can actually be set to about 0.8</p><p>The implementation method is to use Stack to cover a layer, see the code</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Stack(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          ConstrainedBox(</span><br><span class="line">              constraints: <span class="keyword">const</span> BoxConstraints.expand(),</span><br><span class="line">              child: ValueListenableBuilder&lt;<span class="built_in">Map</span>&gt;(</span><br><span class="line">                  valueListenable: activeSong,</span><br><span class="line">                  builder: ((context, value, child) &#123;</span><br><span class="line">                    <span class="keyword">return</span> ClipRRect(</span><br><span class="line">                      <span class="comment">//这里设置背景图片，其实可以直接Image的，不需要做个圆角矩形，我是复制过来的，无所谓啦</span></span><br><span class="line">                      borderRadius: BorderRadius.circular(<span class="number">15</span>),</span><br><span class="line">                      child: (value.isEmpty)</span><br><span class="line">                          ? Image.asset(<span class="string">&quot;assets/images/logo.jpg&quot;</span>)</span><br><span class="line">                          : CachedNetworkImage(</span><br><span class="line">                              imageUrl: value[<span class="string">&quot;url&quot;</span>],</span><br><span class="line">                              fit: BoxFit.cover,</span><br><span class="line">                              placeholder: (context, url) &#123;</span><br><span class="line">                                <span class="keyword">return</span> AnimatedSwitcher(</span><br><span class="line">                                  child: Image.asset(<span class="string">&quot;assets/images/logo.jpg&quot;</span>),</span><br><span class="line">                                  duration:</span><br><span class="line">                                      <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: imageMilli),</span><br><span class="line">                                );</span><br><span class="line">                              &#125;,</span><br><span class="line">                            ),</span><br><span class="line">                    );</span><br><span class="line">                  &#125;))),</span><br><span class="line">          Center(</span><br><span class="line">            child: ClipRect(</span><br><span class="line">              child: BackdropFilter(</span><br><span class="line">                filter: ImageFilter.blur(sigmaX: <span class="number">10.0</span>, sigmaY: <span class="number">10.0</span>),</span><br><span class="line">                child: Container(</span><br><span class="line">                  width: windowsWidth.value,</span><br><span class="line">                  height: windowsHeight.value,</span><br><span class="line">                  decoration:</span><br><span class="line">                      BoxDecoration(color: Colors.black.withOpacity(<span class="number">0.8</span>)), <span class="comment">//这里是控制透明度的，然后前面的颜色设置成白色和黑色有不同的效果，都可以调整</span></span><br><span class="line">                  child:... <span class="comment">//放上层控件</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/01/14/yVBtma79ERxfC82.jpg" alt="1673685301772"></p><h3 id="Lyrics"><a href="#Lyrics" class="headerlink" title="Lyrics"></a>Lyrics</h3><p>The implementation of the lyrics uses the only and very good third-party component <a href="https://pub.dev/packages/flutter_lyric">flutter_lyric: ^2.0.4+6</a> on the pub. It is not difficult to implement. The author wrote a demo and put it online. You can download the example in the source code and look at it accordingly. The lyrics themselves are “drawn”, so they are quite stable. Since my playback control and progress bar are obtained with <strong>StreamBuilder</strong>, I need to define There are a lot less things in the author’s example</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lyricModel =</span><br><span class="line">    LyricsModelBuilder.create().bindLyricToMain(normalLyric).getModel(); <span class="comment">//The lyrics file normalLyric is just a string, just copy it</span></span><br><span class="line"><span class="keyword">var</span> lyricUI = UINetease(); <span class="comment">//Get the UI file, you can also change it later, font color, etc.</span></span><br><span class="line"><span class="keyword">var</span> lyricPadding = <span class="number">40.0</span>; <span class="comment">//Copied directly, can be changed</span></span><br><span class="line"><span class="keyword">var</span> playing = <span class="keyword">true</span>; <span class="comment">//This is to control the playback of the lyrics. The author uses the linkage button to control the highlighting of the lyrics. I don’t need linkage to pass true directly, and I need to add it to my own pause button later (actually, it seems to be OK if you don’t add it ...it will always be true)</span></span><br></pre></td></tr></table></figure><p>Then add two lines in <strong>initState</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lyricUI.highlight = <span class="keyword">true</span>; <span class="comment">//Set highlight</span></span><br></pre></td></tr></table></figure><p>Then build the Widget of the lyrics reading UI and put it in the desired position</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">   Widget _buildReaderWidget() &#123;</span><br><span class="line">     <span class="keyword">return</span> StreamBuilder&lt;PositionData&gt;(</span><br><span class="line">         stream: _positionDataStream,</span><br><span class="line">         builder: (context, snapshot) &#123;</span><br><span class="line">           <span class="keyword">final</span> positionData = snapshot.data;</span><br><span class="line">           <span class="keyword">final</span> position = positionData?.position.inMilliseconds??<span class="number">0</span>;</span><br><span class="line">           <span class="comment">//My positioning information is controlled by StreamBuilder, so I have to wrap my head around it</span></span><br><span class="line">           <span class="keyword">return</span> LyricsReader(</span><br><span class="line">             padding: EdgeInsets.symmetric(horizontal: lyricPadding),</span><br><span class="line">             model: lyricModel, <span class="comment">//What needs to be noted here is that because this StreamBuilder is running all the time, don’t dare to assign variable values here, otherwise it will run all the time. If you make a global variable of lyrics to read like me, the detection value Be sure to put it in the outer layer of StreamBuilder! ! ! Otherwise the subtitles will keep flashing</span></span><br><span class="line">             position: position,</span><br><span class="line">             lyricUi: lyricUI,</span><br><span class="line">             playing: playing,</span><br><span class="line">             <span class="comment">// set the size</span></span><br><span class="line">             size: Size(windowsWidth. value / <span class="number">2</span>, windowsHeight. value / <span class="number">2</span>),</span><br><span class="line">             emptyBuilder: () =&gt; Center(</span><br><span class="line">               child: Text(</span><br><span class="line">                 <span class="string">&quot;No lyrics&quot;</span>,</span><br><span class="line">                 style: lyricUI. getOtherMainTextStyle(),</span><br><span class="line">               ),</span><br><span class="line">             ),</span><br><span class="line">             selectLineBuilder: (progress, confirm) &#123;</span><br><span class="line">               <span class="keyword">return</span> Row(</span><br><span class="line">                 children: [</span><br><span class="line">                   IconButton(</span><br><span class="line">                       onPressed: () &#123;</span><br><span class="line">                         LyricsLog.logD(<span class="string">&quot;click event&quot;</span>);</span><br><span class="line">                         confirm. call();</span><br><span class="line">                         <span class="comment">//Here is the position to update seek, but my progress bar has been monitored, so I don’t need setState, just change it directly</span></span><br><span class="line">                         <span class="comment">//setState(() &#123;</span></span><br><span class="line">                         widget.player.seek(<span class="built_in">Duration</span>(milliseconds: progress));</span><br><span class="line">                         <span class="comment">// &#125;);</span></span><br><span class="line">                       &#125;,</span><br><span class="line">                       icon: Icon(Icons. play_arrow, color: kGrayColor)),</span><br><span class="line">                   Expanded(</span><br><span class="line">                     child: Container(</span><br><span class="line">                       decoration: BoxDecoration(color: kGrayColor),</span><br><span class="line">                       height: <span class="number">1</span>,</span><br><span class="line">                       width: <span class="built_in">double</span>.infinity,</span><br><span class="line">                     ),</span><br><span class="line">                   ),</span><br><span class="line">                   Text(</span><br><span class="line">                     <span class="comment">//This is a method written by myself, which is used to change Duration to a string such as hours, minutes, and seconds</span></span><br><span class="line">                     formatDurationMilliseconds(progress),,</span><br><span class="line">                     style: TextStyle(color: kGrayColor),</span><br><span class="line">                   )</span><br><span class="line">                 ],</span><br><span class="line">               );</span><br><span class="line">             &#125;,</span><br><span class="line">           );</span><br><span class="line">         &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> formatDurationMilliseconds(<span class="built_in">int</span> _duration) &#123;</span><br><span class="line">   <span class="built_in">Duration</span> _dura = <span class="built_in">Duration</span>(milliseconds: _duration);</span><br><span class="line">   <span class="keyword">if</span> (_dura.inHours != <span class="number">0</span>) &#123;</span><br><span class="line">     <span class="built_in">String</span> hours = _dura.inHours.toString().padLeft(<span class="number">0</span>, <span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">     <span class="built_in">String</span> minutes = _dura.inMinutes.remainder(<span class="number">60</span>).toString().padLeft(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="built_in">String</span> seconds = _dura.inSeconds.remainder(<span class="number">60</span>).toString().padLeft(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$hours</span>:<span class="subst">$minutes</span>:<span class="subst">$seconds</span>&quot;</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="built_in">String</span> minutes = _dura.inMinutes.remainder(<span class="number">60</span>).toString().padLeft(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="built_in">String</span> seconds = _dura.inSeconds.remainder(<span class="number">60</span>).toString().padLeft(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$minutes</span>:<span class="subst">$seconds</span>&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>At this point, the lyrics problem is solved, and it is enough to pass in different <strong>normalLyric</strong> later. You need to be careful not to run into the value monitoring of the progress bar, otherwise the lyrics will keep flashing if you keep running</p><p>It’s just that there is a problem with the current control. When you drag the lyrics to a certain sentence, you can indeed locate the desired position by clicking OK, but the scrolling of the lyrics will be stuck. I think the same is true in the author’s demo, so I raised an <a href="https://github.com/ozyl/flutter_lyric/issues/23">issue</a> to the author, let’s see how to solve it later</p><p><img src="https://s2.loli.net/2023/01/15/WCFZOToQYNlg47s.jpg" alt="1673766650968"></p><p>Then the key thing is… how to find lyrics in batches… maybe I have to use Netease Cloud’s api…</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> subsonic </tag>
            
            <tag> airsonic </tag>
            
            <tag> music </tag>
            
            <tag> navidrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter writes a Nas music player (3)</title>
      <link href="/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(3)/"/>
      <url>/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(3)/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>It has been six days since I wrote this player, and most of the functions have been implemented so far. The most important thing I can think of is the home page.</p><blockquote><p>The most important thing is indeed the least important to me. It is mainly because I listen to songs first by query, and second by selecting singers. It seems that a new function needs to be added here. The current page is from singers to albums and then to songs. I seem to I should make a page of all songs, or use the last.fm interface to make a Top10 hit song, or define the hit song based on my own play count</p></blockquote><p>lyrics! lyrics! lyrics! The important thing is said three times. In fact, there are ready-made wheels that can be used <a href="https://pub.dev/packages/flutter_lyric">flutter_lyric 2.0.4+6</a>. Thinking about downloading the lyrics and then doing the matching, it’s a bit…let’s put it away for now, and I’ll talk about it after I find a way to import lyrics in batches</p><h3 id="Fuzzy-search-simplified-and-traditional-search"><a href="#Fuzzy-search-simplified-and-traditional-search" class="headerlink" title="Fuzzy search + simplified and traditional search"></a>Fuzzy search + simplified and traditional search</h3><p>This function is what I have always wanted, but sonixd does not have it. After all, it was developed by foreigners, so there is no such requirement. But my demand is very big, because there is a mixture of simplified and traditional Chinese in the music library. Without this search, it makes me crazy. Today, I mainly realize this function.</p><p>I am going to write two search entries, one is a small column with a height of 25 at the top for quick search, and a drop-down pop-up window is added to select songs. Writing another search page is mainly to display more content. In fact, it is enough to keep one. Let’s do the function first. Anyway, it can be used in both interfaces.</p><h4 id="Simplified-and-traditional-conversion"><a href="#Simplified-and-traditional-conversion" class="headerlink" title="Simplified and traditional conversion"></a>Simplified and traditional conversion</h4><p>I didn’t think about this at all before, but today I was thinking whether it can be solved by changing the code. I tried it, it was just a display method, and then I wanted to use the API to do this, but just such a small function leads to an API. I felt uncomfortable and thought about it. I saw an article on CDSN, saying that you don’t have to worry about it. If you want to do it, you can just make a dictionary. Anyway, the commonly used Chinese words are only 4000 to 6000 words.</p><p>The trouble is that you have to get two strings, and then the index corresponds, which is very annoying. After searching for a long time, I found a [kind brother released it](<a href="https://blog.csdn.net/great_domino/article/details/">https://blog.csdn.net/great_domino/article/details/</a> 280162), I don’t know when it will be gone, I will put it in the back later, and anyone who wants to search can use it for free in the future.</p><p>The big brother is JS, but the implementation logic is the same, just come to the code</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">converToTraditional(<span class="built_in">String</span> simplified) &#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> xx =</span><br><span class="line">      <span class="string">&#x27;啊阿埃挨哎唉哀皑癌蔼矮艾碍爱隘鞍氨安俺按暗岸胺案肮昂盎凹敖熬翱袄傲奥懊澳芭捌扒叭吧笆八疤巴拔跋靶把耙坝霸罢爸白柏百摆佰败拜稗斑班搬扳般颁板版扮拌伴瓣半办绊邦帮梆榜膀绑棒磅蚌镑傍谤苞胞包褒剥薄雹保堡饱宝抱报暴豹鲍爆杯碑悲卑北辈背贝钡倍狈备惫焙被奔苯本笨崩绷甭泵蹦迸逼鼻比鄙笔彼碧蓖蔽毕毙毖币庇痹闭敝弊必辟壁臂避陛鞭边编贬扁便变卞辨辩辫遍标彪膘表鳖憋别瘪彬斌濒滨宾摈兵冰柄丙秉饼炳病并玻菠播拨钵波博勃搏铂箔伯帛舶脖膊渤泊驳捕卜哺补埠不布步簿部怖擦猜裁材才财睬踩采彩菜蔡餐参蚕残惭惨灿苍舱仓沧藏操糙槽曹草厕策侧册测层蹭插叉茬茶查碴搽察岔差诧拆柴豺搀掺蝉馋谗缠铲产阐颤昌猖场尝常长偿肠厂敞畅唱倡超抄钞朝嘲潮巢吵炒车扯撤掣彻澈郴臣辰尘晨忱沉陈趁衬撑称城橙成呈乘程惩澄诚承逞骋秤吃痴持匙池迟弛驰耻齿侈尺赤翅斥炽充冲虫崇宠抽酬畴踌稠愁筹仇绸瞅丑臭初出橱厨躇锄雏滁除楚础储矗搐触处揣川穿椽传船喘串疮窗幢床闯创吹炊捶锤垂春椿醇唇淳纯蠢戳绰疵茨磁雌辞慈瓷词此刺赐次聪葱囱匆从丛凑粗醋簇促蹿篡窜摧崔催脆瘁粹淬翠村存寸磋撮搓措挫错搭达答瘩打大呆歹傣戴带殆代贷袋待逮怠耽担丹单郸掸胆旦氮但惮淡诞弹蛋当挡党荡档刀捣蹈倒岛祷导到稻悼道盗德得的蹬灯登等瞪凳邓堤低滴迪敌笛狄涤翟嫡抵底地蒂第帝弟递缔颠掂滇碘点典靛垫电佃甸店惦奠淀殿碉叼雕凋刁掉吊钓调跌爹碟蝶迭谍叠丁盯叮钉顶鼎锭定订丢东冬董懂动栋侗恫冻洞兜抖斗陡豆逗痘都督毒犊独读堵睹赌杜镀肚度渡妒端短锻段断缎堆兑队对墩吨蹲敦顿囤钝盾遁掇哆多夺垛躲朵跺舵剁惰堕蛾峨鹅俄额讹娥恶厄扼遏鄂饿恩而儿耳尔饵洱二贰发罚筏伐乏阀法珐藩帆番翻樊矾钒繁凡烦反返范贩犯饭泛坊芳方肪房防妨仿访纺放菲非啡飞肥匪诽吠肺废沸费芬酚吩氛分纷坟焚汾粉奋份忿愤粪丰封枫蜂峰锋风疯烽逢冯缝讽奉凤佛否夫敷肤孵扶拂辐幅氟符伏俘服浮涪福袱弗甫抚辅俯釜斧脯腑府腐赴副覆赋复傅付阜父腹负富讣附妇缚咐噶嘎该改概钙盖溉干甘杆柑竿肝赶感秆敢赣冈刚钢缸肛纲岗港杠篙皋高膏羔糕搞镐稿告哥歌搁戈鸽胳疙割革葛格蛤阁隔铬个各给根跟耕更庚羹埂耿梗工攻功恭龚供躬公宫弓巩汞拱贡共钩勾沟苟狗垢构购够辜菇咕箍估沽孤姑鼓古蛊骨谷股故顾固雇刮瓜剐寡挂褂乖拐怪棺关官冠观管馆罐惯灌贯光广逛瑰规圭硅归龟闺轨鬼诡癸桂柜跪贵刽辊滚棍锅郭国果裹过哈骸孩海氦亥害骇酣憨邯韩含涵寒函喊罕翰撼捍旱憾悍焊汗汉夯杭航壕嚎豪毫郝好耗号浩呵喝荷菏核禾和何合盒貉阂河涸赫褐鹤贺嘿黑痕很狠恨哼亨横衡恒轰哄烘虹鸿洪宏弘红喉侯猴吼厚候后呼乎忽瑚壶葫胡蝴狐糊湖弧虎唬护互沪户花哗华猾滑画划化话槐徊怀淮坏欢环桓还缓换患唤痪豢焕涣宦幻荒慌黄磺蝗簧皇凰惶煌晃幌恍谎灰挥辉徽恢蛔回毁悔慧卉惠晦贿秽会烩汇讳诲绘荤昏婚魂浑混豁活伙火获或惑霍货祸击圾基机畸稽积箕肌饥迹激讥鸡姬绩缉吉极棘辑籍集及急疾汲即嫉级挤几脊己蓟技冀季伎祭剂悸济寄寂计记既忌际妓继纪嘉枷夹佳家加荚颊贾甲钾假稼价架驾嫁歼监坚尖笺间煎兼肩艰奸缄茧检柬碱硷拣捡简俭剪减荐槛鉴践贱见键箭件健舰剑饯渐溅涧建僵姜将浆江疆蒋桨奖讲匠酱降蕉椒礁焦胶交郊浇骄娇嚼搅铰矫侥脚狡角饺缴绞剿教酵轿较叫窖揭接皆秸街阶截劫节茎睛晶鲸京惊精粳经井警景颈静境敬镜径痉靖竟竞净炯窘揪究纠玖韭久灸九酒厩救旧臼舅咎就疚鞠拘狙疽居驹菊局咀矩举沮聚拒据巨具距踞锯俱句惧炬剧捐鹃娟倦眷卷绢撅攫抉掘倔爵桔杰捷睫竭洁结解姐戒藉芥界借介疥诫届巾筋斤金今津襟紧锦仅谨进靳晋禁近烬浸尽劲荆兢觉决诀绝均菌钧军君峻俊竣浚郡骏喀咖卡咯开揩楷凯慨刊堪勘坎砍看康慷糠扛抗亢炕考拷烤靠坷苛柯棵磕颗科壳咳可渴克刻客课肯啃垦恳坑吭空恐孔控抠口扣寇枯哭窟苦酷库裤夸垮挎跨胯块筷侩快宽款匡筐狂框矿眶旷况亏盔岿窥葵奎魁傀馈愧溃坤昆捆困括扩廓阔垃拉喇蜡腊辣啦莱来赖蓝婪栏拦篮阑兰澜谰揽览懒缆烂滥琅榔狼廊郎朗浪捞劳牢老佬姥酪烙涝勒乐雷镭蕾磊累儡垒擂肋类泪棱楞冷厘梨犁黎篱狸离漓理李里鲤礼莉荔吏栗丽厉励砾历利傈例俐痢立粒沥隶力璃哩俩联莲连镰廉怜涟帘敛脸链恋炼练粮凉梁粱良两辆量晾亮谅撩聊僚疗燎寥辽潦了撂镣廖料列裂烈劣猎琳林磷霖临邻鳞淋凛赁吝拎玲菱零龄铃伶羚凌灵陵岭领另令溜琉榴硫馏留刘瘤流柳六龙聋咙笼窿隆垄拢陇楼娄搂篓漏陋芦卢颅庐炉掳卤虏鲁麓碌露路赂鹿潞禄录陆戮驴吕铝侣旅履屡缕虑氯律率滤绿峦挛孪滦卵乱掠略抡轮伦仑沦纶论萝螺罗逻锣箩骡裸落洛骆络妈麻玛码蚂马骂嘛吗埋买麦卖迈脉瞒馒蛮满蔓曼慢漫谩芒茫盲氓忙莽猫茅锚毛矛铆卯茂冒帽貌贸么玫枚梅酶霉煤没眉媒镁每美昧寐妹媚门闷们萌蒙檬盟锰猛梦孟眯醚靡糜迷谜弥米秘觅泌蜜密幂棉眠绵冕免勉娩缅面苗描瞄藐秒渺庙妙蔑灭民抿皿敏悯闽明螟鸣铭名命谬摸摹蘑模膜磨摩魔抹末莫墨默沫漠寞陌谋牟某拇牡亩姆母墓暮幕募慕木目睦牧穆拿哪呐钠那娜纳氖乃奶耐奈南男难囊挠脑恼闹淖呢馁内嫩能妮霓倪泥尼拟你匿腻逆溺蔫拈年碾撵捻念娘酿鸟尿捏聂孽啮镊镍涅您柠狞凝宁拧泞牛扭钮纽脓浓农弄奴努怒女暖虐疟挪懦糯诺哦欧鸥殴藕呕偶沤啪趴爬帕怕琶拍排牌徘湃派攀潘盘磐盼畔判叛乓庞旁耪胖抛咆刨炮袍跑泡呸胚培裴赔陪配佩沛喷盆砰抨烹澎彭蓬棚硼篷膨朋鹏捧碰坯砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬篇偏片骗飘漂瓢票撇瞥拼频贫品聘乒坪苹萍平凭瓶评屏坡泼颇婆破魄迫粕剖扑铺仆莆葡菩蒲埔朴圃普浦谱曝瀑期欺栖戚妻七凄漆柒沏其棋奇歧畦崎脐齐旗祈祁骑起岂乞企启契砌器气迄弃汽泣讫掐洽牵扦钎铅千迁签仟谦乾黔钱钳前潜遣浅谴堑嵌欠歉枪呛腔羌墙蔷强抢橇锹敲悄桥瞧乔侨巧鞘撬翘峭俏窍切茄且怯窃钦侵亲秦琴勤芹擒禽寝沁青轻氢倾卿清擎晴氰情顷请庆琼穷秋丘邱球求囚酋泅趋区蛆曲躯屈驱渠取娶龋趣去圈颧权醛泉全痊拳犬券劝缺炔瘸却鹊榷确雀裙群然燃冉染瓤壤攘嚷让饶扰绕惹热壬仁人忍韧任认刃妊纫扔仍日戎茸蓉荣融熔溶容绒冗揉柔肉茹蠕儒孺如辱乳汝入褥软阮蕊瑞锐闰润若弱撒洒萨腮鳃塞赛三叁伞散桑嗓丧搔骚扫嫂瑟色涩森僧莎砂杀刹沙纱傻啥煞筛晒珊苫杉山删煽衫闪陕擅赡膳善汕扇缮墒伤商赏晌上尚裳梢捎稍烧芍勺韶少哨邵绍奢赊蛇舌舍赦摄射慑涉社设砷申呻伸身深娠绅神沈审婶甚肾慎渗声生甥牲升绳省盛剩胜圣师失狮施湿诗尸虱十石拾时什食蚀实识史矢使屎驶始式示士世柿事拭誓逝势是嗜噬适仕侍释饰氏市恃室视试收手首守寿授售受瘦兽蔬枢梳殊抒输叔舒淑疏书赎孰熟薯暑曙署蜀黍鼠属术述树束戍竖墅庶数漱恕刷耍摔衰甩帅栓拴霜双爽谁水睡税吮瞬顺舜说硕朔烁斯撕嘶思私司丝死肆寺嗣四伺似饲巳松耸怂颂送宋讼诵搜艘擞嗽苏酥俗素速粟僳塑溯宿诉肃酸蒜算虽隋随绥髓碎岁穗遂隧祟孙损笋蓑梭唆缩琐索锁所塌他它她塔獭挞蹋踏胎苔抬台泰酞太态汰坍摊贪瘫滩坛檀痰潭谭谈坦毯袒碳探叹炭汤塘搪堂棠膛唐糖倘躺淌趟烫掏涛滔绦萄桃逃淘陶讨套特藤腾疼誊梯剔踢锑提题蹄啼体替嚏惕涕剃屉天添填田甜恬舔腆挑条迢眺跳贴铁帖厅听烃汀廷停亭庭挺艇通桐酮瞳同铜彤童桶捅筒统痛偷投头透凸秃突图徒途涂屠土吐兔湍团推颓腿蜕褪退吞屯臀拖托脱鸵陀驮驼椭妥拓唾挖哇蛙洼娃瓦袜歪外豌弯湾玩顽丸烷完碗挽晚皖惋宛婉万腕汪王亡枉网往旺望忘妄威巍微危韦违桅围唯惟为潍维苇萎委伟伪尾纬未蔚味畏胃喂魏位渭谓尉慰卫瘟温蚊文闻纹吻稳紊问嗡翁瓮挝蜗涡窝我斡卧握沃巫呜钨乌污诬屋无芜梧吾吴毋武五捂午舞伍侮坞戊雾晤物勿务悟误昔熙析西硒矽晰嘻吸锡牺稀息希悉膝夕惜熄烯溪汐犀檄袭席习媳喜铣洗系隙戏细瞎虾匣霞辖暇峡侠狭下厦夏吓掀锨先仙鲜纤咸贤衔舷闲涎弦嫌显险现献县腺馅羡宪陷限线相厢镶香箱襄湘乡翔祥详想响享项巷橡像向象萧硝霄削哮嚣销消宵淆晓小孝校肖啸笑效楔些歇蝎鞋协挟携邪斜胁谐写械卸蟹懈泄泻谢屑薪芯锌欣辛新忻心信衅星腥猩惺兴刑型形邢行醒幸杏性姓兄凶胸匈汹雄熊休修羞朽嗅锈秀袖绣墟戌需虚嘘须徐许蓄酗叙旭序畜恤絮婿绪续轩喧宣悬旋玄选癣眩绚靴薛学穴雪血勋熏循旬询寻驯巡殉汛训讯逊迅压押鸦鸭呀丫芽牙蚜崖衙涯雅哑亚讶焉咽阉烟淹盐严研蜒岩延言颜阎炎沿奄掩眼衍演艳堰燕厌砚雁唁彦焰宴谚验殃央鸯秧杨扬佯疡羊洋阳氧仰痒养样漾邀腰妖瑶摇尧遥窑谣姚咬舀药要耀椰噎耶爷野冶也页掖业叶曳腋夜液一壹医揖铱依伊衣颐夷遗移仪胰疑沂宜姨彝椅蚁倚已乙矣以艺抑易邑屹亿役臆逸肄疫亦裔意毅忆义益溢诣议谊译异翼翌绎茵荫因殷音阴姻吟银淫寅饮尹引隐印英樱婴鹰应缨莹萤营荧蝇迎赢盈影颖硬映哟拥佣臃痈庸雍踊蛹咏泳涌永恿勇用幽优悠忧尤由邮铀犹油游酉有友右佑釉诱又幼迂淤于盂榆虞愚舆余俞逾鱼愉渝渔隅予娱雨与屿禹宇语羽玉域芋郁吁遇喻峪御愈欲狱育誉浴寓裕预豫驭鸳渊冤元垣袁原援辕园员圆猿源缘远苑愿怨院曰约越跃钥岳粤月悦阅耘云郧匀陨允运蕴酝晕韵孕匝砸杂栽哉灾宰载再在咱攒暂赞赃脏葬遭糟凿藻枣早澡蚤躁噪造皂灶燥责择则泽贼怎增憎曾赠扎喳渣札轧铡闸眨栅榨咋乍炸诈摘斋宅窄债寨瞻毡詹粘沾盏斩辗崭展蘸栈占战站湛绽樟章彰漳张掌涨杖丈帐账仗胀瘴障招昭找沼赵照罩兆肇召遮折哲蛰辙者锗蔗这浙珍斟真甄砧臻贞针侦枕疹诊震振镇阵蒸挣睁征狰争怔整拯正政帧症郑证芝枝支吱蜘知肢脂汁之织职直植殖执值侄址指止趾只旨纸志挚掷至致置帜峙制智秩稚质炙痔滞治窒中盅忠钟衷终种肿重仲众舟周州洲诌粥轴肘帚咒皱宙昼骤珠株蛛朱猪诸诛逐竹烛煮拄瞩嘱主著柱助蛀贮铸筑住注祝驻抓爪拽专砖转撰赚篆桩庄装妆撞壮状椎锥追赘坠缀谆准捉拙卓桌琢茁酌啄着灼浊兹咨资姿滋淄孜紫仔籽滓子自渍字鬃棕踪宗综总纵邹走奏揍租足卒族祖诅阻组钻纂嘴醉最罪尊遵昨左佐柞做作坐座&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> yy =</span><br><span class="line">      <span class="string">&#x27;啊阿埃挨哎唉哀皚癌藹矮艾礙愛隘鞍氨安俺按暗岸胺案肮昂盎凹敖熬翺襖傲奧懊澳芭捌扒叭吧笆八疤巴拔跋靶把耙壩霸罷爸白柏百擺佰敗拜稗斑班搬扳般頒板版扮拌伴瓣半辦絆邦幫梆榜膀綁棒磅蚌鎊傍謗苞胞包褒剝薄雹保堡飽寶抱報暴豹鮑爆杯碑悲卑北輩背貝鋇倍狽備憊焙被奔苯本笨崩繃甭泵蹦迸逼鼻比鄙筆彼碧蓖蔽畢斃毖幣庇痹閉敝弊必辟壁臂避陛鞭邊編貶扁便變卞辨辯辮遍標彪膘表鼈憋別癟彬斌瀕濱賓擯兵冰柄丙秉餅炳病並玻菠播撥缽波博勃搏鉑箔伯帛舶脖膊渤泊駁捕蔔哺補埠不布步簿部怖擦猜裁材才財睬踩采彩菜蔡餐參蠶殘慚慘燦蒼艙倉滄藏操糙槽曹草廁策側冊測層蹭插叉茬茶查碴搽察岔差詫拆柴豺攙摻蟬饞讒纏鏟産闡顫昌猖場嘗常長償腸廠敞暢唱倡超抄鈔朝嘲潮巢吵炒車扯撤掣徹澈郴臣辰塵晨忱沈陳趁襯撐稱城橙成呈乘程懲澄誠承逞騁秤吃癡持匙池遲弛馳恥齒侈尺赤翅斥熾充沖蟲崇寵抽酬疇躊稠愁籌仇綢瞅醜臭初出櫥廚躇鋤雛滁除楚礎儲矗搐觸處揣川穿椽傳船喘串瘡窗幢床闖創吹炊捶錘垂春椿醇唇淳純蠢戳綽疵茨磁雌辭慈瓷詞此刺賜次聰蔥囪匆從叢湊粗醋簇促躥篡竄摧崔催脆瘁粹淬翠村存寸磋撮搓措挫錯搭達答瘩打大呆歹傣戴帶殆代貸袋待逮怠耽擔丹單鄲撣膽旦氮但憚淡誕彈蛋當擋黨蕩檔刀搗蹈倒島禱導到稻悼道盜德得的蹬燈登等瞪凳鄧堤低滴迪敵笛狄滌翟嫡抵底地蒂第帝弟遞締顛掂滇碘點典靛墊電佃甸店惦奠澱殿碉叼雕凋刁掉吊釣調跌爹碟蝶叠諜疊丁盯叮釘頂鼎錠定訂丟東冬董懂動棟侗恫凍洞兜抖鬥陡豆逗痘都督毒犢獨讀堵睹賭杜鍍肚度渡妒端短鍛段斷緞堆兌隊對墩噸蹲敦頓囤鈍盾遁掇哆多奪垛躲朵跺舵剁惰墮蛾峨鵝俄額訛娥惡厄扼遏鄂餓恩而兒耳爾餌洱二貳發罰筏伐乏閥法琺藩帆番翻樊礬釩繁凡煩反返範販犯飯泛坊芳方肪房防妨仿訪紡放菲非啡飛肥匪誹吠肺廢沸費芬酚吩氛分紛墳焚汾粉奮份忿憤糞豐封楓蜂峰鋒風瘋烽逢馮縫諷奉鳳佛否夫敷膚孵扶拂輻幅氟符伏俘服浮涪福袱弗甫撫輔俯釜斧脯腑府腐赴副覆賦複傅付阜父腹負富訃附婦縛咐噶嘎該改概鈣蓋溉幹甘杆柑竿肝趕感稈敢贛岡剛鋼缸肛綱崗港杠篙臯高膏羔糕搞鎬稿告哥歌擱戈鴿胳疙割革葛格蛤閣隔鉻個各給根跟耕更庚羹埂耿梗工攻功恭龔供躬公宮弓鞏汞拱貢共鈎勾溝苟狗垢構購夠辜菇咕箍估沽孤姑鼓古蠱骨谷股故顧固雇刮瓜剮寡挂褂乖拐怪棺關官冠觀管館罐慣灌貫光廣逛瑰規圭矽歸龜閨軌鬼詭癸桂櫃跪貴劊輥滾棍鍋郭國果裹過哈骸孩海氦亥害駭酣憨邯韓含涵寒函喊罕翰撼捍旱憾悍焊汗漢夯杭航壕嚎豪毫郝好耗號浩呵喝荷菏核禾和何合盒貉閡河涸赫褐鶴賀嘿黑痕很狠恨哼亨橫衡恒轟哄烘虹鴻洪宏弘紅喉侯猴吼厚候後呼乎忽瑚壺葫胡蝴狐糊湖弧虎唬護互滬戶花嘩華猾滑畫劃化話槐徊懷淮壞歡環桓還緩換患喚瘓豢煥渙宦幻荒慌黃磺蝗簧皇凰惶煌晃幌恍謊灰揮輝徽恢蛔回毀悔慧卉惠晦賄穢會燴彙諱誨繪葷昏婚魂渾混豁活夥火獲或惑霍貨禍擊圾基機畸稽積箕肌饑迹激譏雞姬績緝吉極棘輯籍集及急疾汲即嫉級擠幾脊己薊技冀季伎祭劑悸濟寄寂計記既忌際妓繼紀嘉枷夾佳家加莢頰賈甲鉀假稼價架駕嫁殲監堅尖箋間煎兼肩艱奸緘繭檢柬堿鹼揀撿簡儉剪減薦檻鑒踐賤見鍵箭件健艦劍餞漸濺澗建僵姜將漿江疆蔣槳獎講匠醬降蕉椒礁焦膠交郊澆驕嬌嚼攪鉸矯僥腳狡角餃繳絞剿教酵轎較叫窖揭接皆稭街階截劫節莖睛晶鯨京驚精粳經井警景頸靜境敬鏡徑痙靖竟競淨炯窘揪究糾玖韭久灸九酒廄救舊臼舅咎就疚鞠拘狙疽居駒菊局咀矩舉沮聚拒據巨具距踞鋸俱句懼炬劇捐鵑娟倦眷卷絹撅攫抉掘倔爵桔傑捷睫竭潔結解姐戒藉芥界借介疥誡屆巾筋斤金今津襟緊錦僅謹進靳晉禁近燼浸盡勁荊兢覺決訣絕均菌鈞軍君峻俊竣浚郡駿喀咖卡咯開揩楷凱慨刊堪勘坎砍看康慷糠扛抗亢炕考拷烤靠坷苛柯棵磕顆科殼咳可渴克刻客課肯啃墾懇坑吭空恐孔控摳口扣寇枯哭窟苦酷庫褲誇垮挎跨胯塊筷儈快寬款匡筐狂框礦眶曠況虧盔巋窺葵奎魁傀饋愧潰坤昆捆困括擴廓闊垃拉喇蠟臘辣啦萊來賴藍婪欄攔籃闌蘭瀾讕攬覽懶纜爛濫琅榔狼廊郎朗浪撈勞牢老佬姥酪烙澇勒樂雷鐳蕾磊累儡壘擂肋類淚棱楞冷厘梨犁黎籬狸離漓理李裏鯉禮莉荔吏栗麗厲勵礫曆利傈例俐痢立粒瀝隸力璃哩倆聯蓮連鐮廉憐漣簾斂臉鏈戀煉練糧涼梁粱良兩輛量晾亮諒撩聊僚療燎寥遼潦了撂鐐廖料列裂烈劣獵琳林磷霖臨鄰鱗淋凜賃吝拎玲菱零齡鈴伶羚淩靈陵嶺領另令溜琉榴硫餾留劉瘤流柳六龍聾嚨籠窿隆壟攏隴樓婁摟簍漏陋蘆盧顱廬爐擄鹵虜魯麓碌露路賂鹿潞祿錄陸戮驢呂鋁侶旅履屢縷慮氯律率濾綠巒攣孿灤卵亂掠略掄輪倫侖淪綸論蘿螺羅邏鑼籮騾裸落洛駱絡媽麻瑪碼螞馬罵嘛嗎埋買麥賣邁脈瞞饅蠻滿蔓曼慢漫謾芒茫盲氓忙莽貓茅錨毛矛鉚卯茂冒帽貌貿麽玫枚梅酶黴煤沒眉媒鎂每美昧寐妹媚門悶們萌蒙檬盟錳猛夢孟眯醚靡糜迷謎彌米秘覓泌蜜密冪棉眠綿冕免勉娩緬面苗描瞄藐秒渺廟妙蔑滅民抿皿敏憫閩明螟鳴銘名命謬摸摹蘑模膜磨摩魔抹末莫墨默沫漠寞陌謀牟某拇牡畝姆母墓暮幕募慕木目睦牧穆拿哪呐鈉那娜納氖乃奶耐奈南男難囊撓腦惱鬧淖呢餒內嫩能妮霓倪泥尼擬你匿膩逆溺蔫拈年碾攆撚念娘釀鳥尿捏聶孽齧鑷鎳涅您檸獰凝甯擰濘牛扭鈕紐膿濃農弄奴努怒女暖虐瘧挪懦糯諾哦歐鷗毆藕嘔偶漚啪趴爬帕怕琶拍排牌徘湃派攀潘盤磐盼畔判叛乓龐旁耪胖抛咆刨炮袍跑泡呸胚培裴賠陪配佩沛噴盆砰抨烹澎彭蓬棚硼篷膨朋鵬捧碰坯砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬篇偏片騙飄漂瓢票撇瞥拼頻貧品聘乒坪蘋萍平憑瓶評屏坡潑頗婆破魄迫粕剖撲鋪仆莆葡菩蒲埔樸圃普浦譜曝瀑期欺棲戚妻七淒漆柒沏其棋奇歧畦崎臍齊旗祈祁騎起豈乞企啓契砌器氣迄棄汽泣訖掐洽牽扡釺鉛千遷簽仟謙乾黔錢鉗前潛遣淺譴塹嵌欠歉槍嗆腔羌牆薔強搶橇鍬敲悄橋瞧喬僑巧鞘撬翹峭俏竅切茄且怯竊欽侵親秦琴勤芹擒禽寢沁青輕氫傾卿清擎晴氰情頃請慶瓊窮秋丘邱球求囚酋泅趨區蛆曲軀屈驅渠取娶齲趣去圈顴權醛泉全痊拳犬券勸缺炔瘸卻鵲榷確雀裙群然燃冉染瓤壤攘嚷讓饒擾繞惹熱壬仁人忍韌任認刃妊紉扔仍日戎茸蓉榮融熔溶容絨冗揉柔肉茹蠕儒孺如辱乳汝入褥軟阮蕊瑞銳閏潤若弱撒灑薩腮鰓塞賽三三傘散桑嗓喪搔騷掃嫂瑟色澀森僧莎砂殺刹沙紗傻啥煞篩曬珊苫杉山刪煽衫閃陝擅贍膳善汕扇繕墒傷商賞晌上尚裳梢捎稍燒芍勺韶少哨邵紹奢賒蛇舌舍赦攝射懾涉社設砷申呻伸身深娠紳神沈審嬸甚腎慎滲聲生甥牲升繩省盛剩勝聖師失獅施濕詩屍虱十石拾時什食蝕實識史矢使屎駛始式示士世柿事拭誓逝勢是嗜噬適仕侍釋飾氏市恃室視試收手首守壽授售受瘦獸蔬樞梳殊抒輸叔舒淑疏書贖孰熟薯暑曙署蜀黍鼠屬術述樹束戍豎墅庶數漱恕刷耍摔衰甩帥栓拴霜雙爽誰水睡稅吮瞬順舜說碩朔爍斯撕嘶思私司絲死肆寺嗣四伺似飼巳松聳慫頌送宋訟誦搜艘擻嗽蘇酥俗素速粟僳塑溯宿訴肅酸蒜算雖隋隨綏髓碎歲穗遂隧祟孫損筍蓑梭唆縮瑣索鎖所塌他它她塔獺撻蹋踏胎苔擡台泰酞太態汰坍攤貪癱灘壇檀痰潭譚談坦毯袒碳探歎炭湯塘搪堂棠膛唐糖倘躺淌趟燙掏濤滔縧萄桃逃淘陶討套特藤騰疼謄梯剔踢銻提題蹄啼體替嚏惕涕剃屜天添填田甜恬舔腆挑條迢眺跳貼鐵帖廳聽烴汀廷停亭庭挺艇通桐酮瞳同銅彤童桶捅筒統痛偷投頭透凸禿突圖徒途塗屠土吐兔湍團推頹腿蛻褪退吞屯臀拖托脫鴕陀馱駝橢妥拓唾挖哇蛙窪娃瓦襪歪外豌彎灣玩頑丸烷完碗挽晚皖惋宛婉萬腕汪王亡枉網往旺望忘妄威巍微危韋違桅圍唯惟爲濰維葦萎委偉僞尾緯未蔚味畏胃喂魏位渭謂尉慰衛瘟溫蚊文聞紋吻穩紊問嗡翁甕撾蝸渦窩我斡臥握沃巫嗚鎢烏汙誣屋無蕪梧吾吳毋武五捂午舞伍侮塢戊霧晤物勿務悟誤昔熙析西硒矽晰嘻吸錫犧稀息希悉膝夕惜熄烯溪汐犀檄襲席習媳喜銑洗系隙戲細瞎蝦匣霞轄暇峽俠狹下廈夏嚇掀鍁先仙鮮纖鹹賢銜舷閑涎弦嫌顯險現獻縣腺餡羨憲陷限線相廂鑲香箱襄湘鄉翔祥詳想響享項巷橡像向象蕭硝霄削哮囂銷消宵淆曉小孝校肖嘯笑效楔些歇蠍鞋協挾攜邪斜脅諧寫械卸蟹懈泄瀉謝屑薪芯鋅欣辛新忻心信釁星腥猩惺興刑型形邢行醒幸杏性姓兄凶胸匈洶雄熊休修羞朽嗅鏽秀袖繡墟戌需虛噓須徐許蓄酗敘旭序畜恤絮婿緒續軒喧宣懸旋玄選癬眩絢靴薛學穴雪血勳熏循旬詢尋馴巡殉汛訓訊遜迅壓押鴉鴨呀丫芽牙蚜崖衙涯雅啞亞訝焉咽閹煙淹鹽嚴研蜒岩延言顔閻炎沿奄掩眼衍演豔堰燕厭硯雁唁彥焰宴諺驗殃央鴦秧楊揚佯瘍羊洋陽氧仰癢養樣漾邀腰妖瑤搖堯遙窯謠姚咬舀藥要耀椰噎耶爺野冶也頁掖業葉曳腋夜液一壹醫揖銥依伊衣頤夷遺移儀胰疑沂宜姨彜椅蟻倚已乙矣以藝抑易邑屹億役臆逸肄疫亦裔意毅憶義益溢詣議誼譯異翼翌繹茵蔭因殷音陰姻吟銀淫寅飲尹引隱印英櫻嬰鷹應纓瑩螢營熒蠅迎贏盈影穎硬映喲擁傭臃癰庸雍踴蛹詠泳湧永恿勇用幽優悠憂尤由郵鈾猶油遊酉有友右佑釉誘又幼迂淤于盂榆虞愚輿余俞逾魚愉渝漁隅予娛雨與嶼禹宇語羽玉域芋郁籲遇喻峪禦愈欲獄育譽浴寓裕預豫馭鴛淵冤元垣袁原援轅園員圓猿源緣遠苑願怨院曰約越躍鑰嶽粵月悅閱耘雲鄖勻隕允運蘊醞暈韻孕匝砸雜栽哉災宰載再在咱攢暫贊贓髒葬遭糟鑿藻棗早澡蚤躁噪造皂竈燥責擇則澤賊怎增憎曾贈紮喳渣劄軋鍘閘眨柵榨咋乍炸詐摘齋宅窄債寨瞻氈詹粘沾盞斬輾嶄展蘸棧占戰站湛綻樟章彰漳張掌漲杖丈帳賬仗脹瘴障招昭找沼趙照罩兆肇召遮折哲蟄轍者鍺蔗這浙珍斟真甄砧臻貞針偵枕疹診震振鎮陣蒸掙睜征猙爭怔整拯正政幀症鄭證芝枝支吱蜘知肢脂汁之織職直植殖執值侄址指止趾只旨紙志摯擲至致置幟峙制智秩稚質炙痔滯治窒中盅忠鍾衷終種腫重仲衆舟周州洲謅粥軸肘帚咒皺宙晝驟珠株蛛朱豬諸誅逐竹燭煮拄矚囑主著柱助蛀貯鑄築住注祝駐抓爪拽專磚轉撰賺篆樁莊裝妝撞壯狀椎錐追贅墜綴諄准捉拙卓桌琢茁酌啄著灼濁茲咨資姿滋淄孜紫仔籽滓子自漬字鬃棕蹤宗綜總縱鄒走奏揍租足卒族祖詛阻組鑽纂嘴醉最罪尊遵昨左佐柞做作坐座&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> traditional = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt;= simplified.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//循环把传入的简体取出来</span></span><br><span class="line">    <span class="built_in">String</span> _temp = simplified[i];</span><br><span class="line">    <span class="comment">//找到简体对应的序号</span></span><br><span class="line">    <span class="built_in">int</span> dddd = xx.indexOf(_temp);</span><br><span class="line">    <span class="comment">//如果能找到序号，就填入对应的繁体</span></span><br><span class="line">    <span class="keyword">if</span> (dddd &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      traditional += yy[dddd];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//如果找不到序号就把简体写进去，无所谓啦，说不定后面数据like也能搜出来呢</span></span><br><span class="line">      traditional += _temp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//返回繁体</span></span><br><span class="line">  <span class="keyword">return</span> traditional;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>So the difficulty of this method is not in the programming, but in the two strings provided by a kind brother, otherwise you will be crazy if you do it yourself!</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">getSongByName(<span class="built_in">String</span> title, <span class="built_in">String</span> title2) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> db = <span class="keyword">await</span> instance.db;</span><br><span class="line">    <span class="comment">//如果繁体没查到就用简体查两次呗</span></span><br><span class="line">    <span class="keyword">if</span> (title2 == <span class="string">&quot;&quot;</span>) title2 = title;</span><br><span class="line">    <span class="comment">//这里的%就是模糊查找，前后放，其实还可以把字符串拆开一个字一个字的放...不过没那么无聊吧，哈哈哈哈</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> db.rawQuery(</span><br><span class="line">        <span class="string">&quot;SELECT * FROM <span class="subst">$SongsTable</span> WHERE title like &#x27;%<span class="subst">$title</span>%&#x27; or  title like &#x27;%<span class="subst">$title2</span>%&#x27; &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (res.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="built_in">List</span>&lt;Songs&gt; lists = res.map((e) =&gt; Songs.fromJson(e)).toList();</span><br><span class="line">    <span class="keyword">return</span> lists;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;err is 👉 <span class="subst">$err</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Then call it directly on the search page, just put the code directly</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在TextField的onSubmitted里面调用即可</span></span><br><span class="line"><span class="comment">//其实很多人还做了onChanged的查找，不过我总觉得那玩意是缓存吧，真一个字一个字的查数据库吗？</span></span><br><span class="line"></span><br><span class="line">_getSongsbyName() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">String</span> _title1 = searchController.text;</span><br><span class="line">  <span class="built_in">String</span> _title2 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="built_in">List</span>&lt;Songs&gt; _list = [];</span><br><span class="line">  _title2 = <span class="keyword">await</span> converToTraditional(_title1);</span><br><span class="line">  <span class="keyword">final</span> _songsList = <span class="keyword">await</span> BaseDB.instance.getSongByName(_title1, _title2);</span><br><span class="line">  <span class="keyword">if</span> (_songsList != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> element <span class="keyword">in</span> _songsList) &#123;</span><br><span class="line">      Songs _tem = element;</span><br><span class="line">      _list.add(_tem);</span><br><span class="line">    &#125;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _songs = _list;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Then the effect will come out! <strong>back</strong> is really nice, a song shows <strong>fuzzy search</strong> and <strong>simplified and traditional search</strong></p><p><img src="https://s2.loli.net/2023/01/11/IDi42VYrsEpfcuN.png" alt="image-20230111230719183"></p><h3 id="Lyrics"><a href="#Lyrics" class="headerlink" title="Lyrics"></a>Lyrics</h3><p>In fact, I didn’t think about how to display the lyrics. This thing is necessary when you don’t have it. When you have it, the time to read the lyrics may only account for 1% of the total usage time.</p><p>As for the display methods, there are three ways. On the desktop, you can create a floating window like a cool dog, or on the Mac, it will be in the status bar at the top, and on IOS, click the picture of the current song and pop up a bottom The pop-up page is shown in</p><p>So I removed the original Now Playing page from the left navigation bar, thinking that clicking on the song picture is the most appropriate trigger for Now Playing. But I just remembered a problem when I wrote this. My entire form is written in <code>body</code>, which is fine on the desktop. Split it into <code>appBar</code> and <code>bottomNavigationBar</code>, but it is not necessarily, because I wrote the route myself, so there is no problem of passing the status. Let’s talk about it when it is adapted. It’s good not to have the top, but there are some The problem is that when it pops up, it will cover the lower part, because the bottom is not bottom, but there are always various ways to do it. Let’s do it today, sleep, birthday</p><p><img src="https://s2.loli.net/2023/01/11/auTFf9l7ERKO4p2.gif" alt="478bbb7d-2dfa-4ac3-a9f1-5ccb37fc9152"></p><hr><h3 id="Adjusted-the-layout"><a href="#Adjusted-the-layout" class="headerlink" title="Adjusted the layout"></a>Adjusted the layout</h3><p>According to the idea of last night, I used the appbar, but in order to simplify the code, I did not use the default <code>AppBar</code> control. Anyway, it is also <code>extends StatefulWidget implements PreferredSizeWidget</code>, so I also write it like this, and I can directly<code>return</code>My original code, this is simple, just use the <code>get</code> method to inject the height.</p><p>Look directly at the code:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../../models/notifierValue.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../common/baseCSS.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAppBar</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> <span class="keyword">implements</span> <span class="title">PreferredSizeWidget</span> </span>&#123;</span><br><span class="line">   MyAppBar(&#123;Key? key, <span class="keyword">required</span> <span class="keyword">this</span>. drawer&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> drawer;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   _AMyAppBarState createState() =&gt; _AMyAppBarState();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   Size <span class="keyword">get</span> preferredSize =&gt; Size. fromHeight(appBarHeight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AMyAppBarState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyAppBar</span>&gt; </span>&#123;</span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   <span class="keyword">void</span> initState() &#123;</span><br><span class="line">     <span class="keyword">super</span>.initState();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">     <span class="keyword">super</span>.dispose();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Container(</span><br><span class="line">       color: bkColor,</span><br><span class="line">       child: Row(</span><br><span class="line">         mainAxisAlignment: MainAxisAlignment. spaceBetween,</span><br><span class="line">         children: [</span><br><span class="line">           Row(</span><br><span class="line">             children: [</span><br><span class="line">               <span class="keyword">if</span> (isMobile. value)</span><br><span class="line">                 IconButton(</span><br><span class="line">                   icon: Icon(</span><br><span class="line">                     Icons.menu,</span><br><span class="line">                     color: kGrayColor,</span><br><span class="line">                     size: <span class="number">15</span>,</span><br><span class="line">                   ),</span><br><span class="line">                   color: kGrayColor,</span><br><span class="line">                   onPressed: () &#123;</span><br><span class="line">                     widget. drawer();</span><br><span class="line">                   &#125;,</span><br><span class="line">                 ),</span><br><span class="line">             ],</span><br><span class="line">           ),</span><br><span class="line">           Row(</span><br><span class="line">             children: [</span><br><span class="line">               Container(</span><br><span class="line">                 child: IconButton(</span><br><span class="line">                   icon: Icon(</span><br><span class="line">                     Icons. search,</span><br><span class="line">                     color: kGrayColor,</span><br><span class="line">                     size: <span class="number">15</span>,</span><br><span class="line">                   ),</span><br><span class="line">                   onPressed: () &#123;</span><br><span class="line">                     indexValue. value = <span class="number">10</span>;</span><br><span class="line">                   &#125;,</span><br><span class="line">                 ),</span><br><span class="line">               ),</span><br><span class="line">               Container(</span><br><span class="line">                 child: IconButton(</span><br><span class="line">                   icon: Icon(</span><br><span class="line">                     Icons. settings,</span><br><span class="line">                     color: kGrayColor,</span><br><span class="line">                     size: <span class="number">15</span>,</span><br><span class="line">                   ),</span><br><span class="line">                   onPressed: () &#123;</span><br><span class="line">                     indexValue. value = <span class="number">7</span>;</span><br><span class="line">                   &#125;,</span><br><span class="line">                 ),</span><br><span class="line">               ),</span><br><span class="line">             ],</span><br><span class="line">           ),</span><br><span class="line">         ],</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Flutter is still very powerful. I have been debugging based on the desktop side before, but I just thought about how to deal with the mobile side when writing. Today, I opened the IOS virtual machine and took a look. It is very good. Basically, it can be adapted directly without major changes.</p><p><img src="https://s2.loli.net/2023/01/12/vMEGWZdzIblT9qx.jpg" alt="Simulator Screen Shot - iPhone 14 Pro Max - 2023-01-12 at 17.27.13"></p><p>Isn’t this the simplest <code>StatefulWidget</code> you have ever seen? It just doesn’t deserve to be called <code>ful</code>, right? ! ! Hahaha, I will add a search box and a pop-up window under the search box later, and then it will be called <code>ful</code>. The current logic is to click the search button to jump directly to the search page, and the subsequent logic should be to click the search button to slide out the search box from the left, and enter within three results will pop up, and then there are more at the bottom, click Go to the search page. When you find a song, you can order the song directly in the drop-down box and play it directly.</p><p>That’s it for today, I don’t work for my birthday, and I originally wanted to remove the collection function. After all, it is based on my own music server, so what are the favorites? Aren’t all my own songs are my favorites… I didn’t decide whether to keep it, because there is no such thing in the api, if I want it, I can only add it directly In the database, does this make sense? To quickly find: 1, search; 2, playlist, right?</p><p>There are two playlists and homepages at the back. After finishing it, you can go to the biggest lyrics function. The place has been reserved, and there is also a wheel <a href="https://pub.dev/packages/flutter_lyric">flutter_lyric</a> that can be used directly Use it, put it to the end.</p><p>The follow-up should be to get the playlist and homepage done first, then start to adapt to the mobile terminal (it may be finished in two days), and then find an api to get singer information. The current album pictures are <a href="https://picard.musicbrainz.org/">MusicBrainz Picard</a>, there is no singer information, good-looking photos and profiles, etc., you should be able to use the API of NetEase Cloud, this can be cached in the database, and it is enough to get it once , so you can take your time when it is unstable, and there are ready-made wheels that can be written with <a href="https://github.com/Binaryify/NeteaseCloudMusicApi">NeteaseCloudMusicApi</a> NodeJS, it should be easy to get flutter to use</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> subsonic </tag>
            
            <tag> airsonic </tag>
            
            <tag> music </tag>
            
            <tag> navidrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter writes a Nas music player (2)</title>
      <link href="/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(2)/"/>
      <url>/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(2)/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>**Shout out! **If you want to do partial refresh through routing, you must write the routing yourself, don’t use the one that comes with flutter, it will make you feel crashed. Today, I switched to the global routing for the local refresh on the right side. After changing most of the code, I found that it was impossible to dynamically refresh while keeping the left and bottom <strong>Widget</strong>. I rewrote it in a fit of anger and it finally worked. But it wasted a long time. There is no way, in order to adjust the mobile terminal at that time, the left side can be used as a side-sliding window independently, decided to use <strong>ValueNotifier</strong> to hard-write the route, and then remove the current page highlight on the left side, mainly <strong>Although the Detail</strong> page can be tracked to the superior, it doesn’t matter if you want it or not. I wrote a huge 40 point headline and put it there, so I can’t miss it</p><p>At present, it can be used. The singer, album and all the logic of playing have been completed. There is also the home page after that. It is nothing more than a convenient use such as query point is playing. There are two more important points, search and lyrics. I don’t know if direct transcoding can realize complex and simple search. If not, you need to use API, which will waste query time</p><p><img src="https://s2.loli.net/2023/01/10/BCPjVHlazr2mK1R.jpg"></p><h3 id="1-Album-Waterfall"><a href="#1-Album-Waterfall" class="headerlink" title="1. Album Waterfall"></a>1. Album Waterfall</h3><p>This is what I have always wanted. Since I used Jellyfin, I feel that I have watched movies for nothing before. This kind of TV curtain wall is more handsome. Waterfall has ready-made wheels that can be used [flutter_staggered_grid_view](<a href="https://pub.dev/">https://pub.dev</a> &#x2F;packages&#x2F;flutter_staggered_grid_view) is very simple to implement, just add it in <code>pubspec.yaml</code> and then <code>flutter pub get</code></p><p>It itself supports a variety of presentation methods, you can go to the homepage for details, but I chose <code>MasonryGridView</code>, which is most suitable for a large number of pictures. It is the same as building a ListView. There are three attributes that need to be defined here.</p><p><strong>crossAxisCount:</strong> How many columns</p><p><strong>mainAxisSpacing:</strong> line spacing</p><p><strong>crossAxisSpacing:</strong> Column spacing</p><p>I suggest doing a calculation, because if you fix <strong>Count</strong>, it will cause a problem. Dragging the form will make the picture very large, which is very strange</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Get the window size</span></span><br><span class="line">Size _size = MediaQuery.of(context).size;</span><br><span class="line"><span class="comment">//The right side is the part I want to display, first calculate the width, and then divide it by the width of the image you want to present</span></span><br><span class="line"><span class="built_in">double</span> _rightWidth = (_size. width - <span class="number">160</span>) / <span class="number">180</span>;</span><br><span class="line"><span class="comment">// then round down</span></span><br><span class="line"><span class="built_in">int</span> _count = _rightWidth.truncate();</span><br></pre></td></tr></table></figure><p>In this way, how do you drag the form? The width of the picture will only change in a small range, it will not be particularly exaggerated, and the construction is also very simple.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MasonryGridView.count(</span><br><span class="line">               crossAxisCount: _count,</span><br><span class="line">               mainAxisSpacing: <span class="number">10</span>,</span><br><span class="line">               crossAxisSpacing: <span class="number">10</span>,</span><br><span class="line">               itemCount: _albums!.length,</span><br><span class="line">               itemBuilder: (context, index) &#123;</span><br><span class="line">                 <span class="keyword">return</span>...</span><br><span class="line">               &#125;</span><br></pre></td></tr></table></figure><p>You can seal a combination of <strong>Widget</strong> inside, such as adding two lines of text to a picture, and the effect will come out</p><p>Of course, you can do image caching. I wanted to do it at first, but I just didn’t know whether to save it in a folder or convert it to base64 and save it in the database.</p><p>In fact, it’s okay to not do caching, and the effect of lazy loading of pictures is still possible. Use <strong>frameBuilder</strong> to achieve the fade-in effect</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ClipRRect(</span><br><span class="line">   borderRadius: BorderRadius.circular(<span class="number">15</span>),</span><br><span class="line">   child: Image.network(</span><br><span class="line">     _temURL,</span><br><span class="line">     fit: BoxFit. cover,</span><br><span class="line">     frameBuilder: (context, child, frame, wasSynchronouslyLoaded) &#123;</span><br><span class="line">       <span class="keyword">if</span> (wasSynchronouslyLoaded) &#123;</span><br><span class="line">         <span class="keyword">return</span> child;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> AnimatedSwitcher(</span><br><span class="line">         child: frame != <span class="keyword">null</span></span><br><span class="line">           ? child</span><br><span class="line">           : Image.asset(<span class="string">&quot;assets/images/logo.jpg&quot;</span>),</span><br><span class="line">         duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">2000</span>),</span><br><span class="line">       );</span><br><span class="line">     &#125;,</span><br><span class="line">   ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="2-Music-playback"><a href="#2-Music-playback" class="headerlink" title="2. Music playback"></a>2. Music playback</h3><p>Playing a song is very simple, just <code>setAudioSource</code>, the trouble is the playlist, and the button operation to control the playlist. For example, the previous song is gone, but if the button is not grayed out, an error will be reported. All controls are performed using <code>ValueNotifier</code>. I understand it.</p><h4 id="2-1-Set-monitoring-variables"><a href="#2-1-Set-monitoring-variables" class="headerlink" title="2.1. Set monitoring variables"></a>2.1. Set monitoring variables</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Monitor the current resource ID. This is not only used for music playback, but also for obtaining singer pictures.</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">String</span>&gt; activeSongValue = ValueNotifier&lt;<span class="built_in">String</span>&gt;(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Listen to the current playlist</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">List</span>&gt; activeList = ValueNotifier&lt;<span class="built_in">List</span>&gt;([]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Listen to the current song sequence</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">int</span>&gt; activeIndex = ValueNotifier&lt;<span class="built_in">int</span>&gt;(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Monitor the current song, similar to the above, just pass it to save a database query, because you need to fill in the song name, singer name and album name, otherwise you don’t need to pass it</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">Map</span>&gt; activeSong = ValueNotifier&lt;<span class="built_in">Map</span>&gt;(<span class="built_in">Map</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//Monitor whether out of order, this is to monitor the out of order button for triggering</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">bool</span>&gt; isShuffleModeEnabledNotifier = ValueNotifier&lt;<span class="built_in">bool</span>&gt;(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Monitor whether it is the first song</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">bool</span>&gt; isFirstSongNotifier = ValueNotifier&lt;<span class="built_in">bool</span>&gt;(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Monitor whether it is the last song, this is to block the button of the previous song and the next song to avoid error reporting</span></span><br><span class="line">ValueNotifier&lt;<span class="built_in">bool</span>&gt; isLastSongNotifier = ValueNotifier&lt;<span class="built_in">bool</span>&gt;(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure><h4 id="2-2-Triggering"><a href="#2-2-Triggering" class="headerlink" title="2.2. Triggering"></a>2.2. Triggering</h4><p>After clicking the song in the song list, pass the id, song List and the index of the current song in the list, and then seal a Map</p><p>The main purpose is to get the picture URL of the song. This is not in the original Map. You need to go to the background to create a URL with the server address and identity information. Otherwise, it is more convenient to use the Songs instance directly.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">   activeSongValue.value = _tem.id;</span><br><span class="line">   <span class="comment">//List of album songs where the song is located</span></span><br><span class="line">   activeList.value = _songs!;</span><br><span class="line">   <span class="comment">// current song queue</span></span><br><span class="line">   activeIndex. value = index;</span><br><span class="line">   <span class="comment">// Assemble the current song</span></span><br><span class="line">   Map_activeSong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">   <span class="built_in">String</span> _url = <span class="keyword">await</span> getCoverArt(_tem.id);</span><br><span class="line">   _activeSong[<span class="string">&quot;artist&quot;</span>] = _tem.artist;</span><br><span class="line">   _activeSong[<span class="string">&quot;url&quot;</span>] = _url;</span><br><span class="line">   _activeSong[<span class="string">&quot;title&quot;</span>] = _tem.title;</span><br><span class="line">   _activeSong[<span class="string">&quot;album&quot;</span>] = _tem.album;</span><br><span class="line">   activeSong.value = _activeSong;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-Receive-and-generate-playlist"><a href="#2-3-Receive-and-generate-playlist" class="headerlink" title="2.3. Receive and generate playlist"></a>2.3. Receive and generate playlist</h4><p>What is received here is <code>activeSongValue</code>, why not use <code>activeList</code> directly, because if you receive <code>activeList</code>, click other songs in the current list, and its default value will not change</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ValueListenableBuilder&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">    valueListenable: activeSongValue,</span><br><span class="line">    builder: ((context, value, child) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">       setAudioSource();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>...</span><br></pre></td></tr></table></figure><p>If it is the default value <strong>1</strong>, it means that you have not selected music</p><p>When the value changes, start generating the playlist</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="keyword">void</span>&gt; setAudioSource() <span class="keyword">async</span> &#123;</span><br><span class="line">     <span class="comment">//1. Declaration</span></span><br><span class="line">     <span class="keyword">final</span> playlist = ConcatenatingAudioSource(</span><br><span class="line">       useLazyPreparation: <span class="keyword">true</span>,</span><br><span class="line">       shuffleOrder: DefaultShuffleOrder(),</span><br><span class="line">       children: <span class="keyword">await</span> _getPlayList(),</span><br><span class="line">     );</span><br><span class="line">     <span class="comment">//3. Add a playlist, by the way, set which song is currently playing</span></span><br><span class="line">     <span class="keyword">await</span> _player.setAudioSource(playlist,</span><br><span class="line">         initialIndex: activeIndex.value, initialPosition: <span class="built_in">Duration</span>.zero);</span><br><span class="line">     <span class="comment">//4. Start playing</span></span><br><span class="line">     _player.play();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   _getPlayList() <span class="keyword">async</span> &#123;</span><br><span class="line">     <span class="built_in">List</span>&lt;AudioSource&gt; children = [];</span><br><span class="line">     List_songs = activeList. value;</span><br><span class="line">     Take out the value passed when the trigger <span class="keyword">is</span> triggered</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">var</span> element <span class="keyword">in</span> _songs) &#123;</span><br><span class="line">       Songs_song = element;</span><br><span class="line">       <span class="comment">//2. Go to the database to spell the address of the music file</span></span><br><span class="line">       <span class="built_in">String</span> _url = <span class="keyword">await</span> getSongStreamUrl(_song.id);</span><br><span class="line">       children.add(AudioSource.uri(<span class="built_in">Uri</span>.parse(_url), tag: _song.id)); <span class="comment">//Pay attention to setting the tag here, which can be used for later monitoring</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> children;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-Monitor-playback-changes"><a href="#2-4-Monitor-playback-changes" class="headerlink" title="2.4. Monitor playback changes"></a>2.4. Monitor playback changes</h4><p>When playing the next song, you need to replace the information of the song name and cover. At this time, you need to inject monitoring to operate</p><p>Just Audio has a number of different event streams, all of which can be listened to:</p><ul><li><strong>sequenceStream</strong>: This is the playlist in the order it was added, whenever the playlist changes, a new list will be generated here</li><li><strong>shuffleModeEnabledStream</strong>: ShuffleModeEnabledStream listener, open and close this mode, is a Boolean value</li><li><strong>shuffleIndicesStream</strong>: This is a list of shuffle integers pointing to the <code>sequenceStream</code> of items in the playlist (it does not shuffle itself). <code>shuffle</code> When this method is called on the audio player, a new list will be generated here.</li><li><strong>currentIndexStream</strong>: This stream notifies the index of the current song when the song first starts. This integer points to an audio source <code>sequenceStream</code> in the playlist</li><li><strong>loopModeStream</strong>:By default all songs in the list are played at once. However, you can also choose to repeat a single song or even a playlist, which is the loop mode, <code>LoopMode</code> This stream will generate a new value every time the loop mode changes</li></ul><p>Well, just look at the above. For monitoring, you can do it with one, that is, <strong>sequenceStateStream</strong>. Here, as long as one of the above five streams generates a new value, <code>sequenceStateStream</code> will generate a combined value type <code> SequenceState</code>, one top five, happy</p><p>First add this method call in <strong>initState</strong>, then..</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _listenForChangesInSequenceState() &#123;</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="comment">//Triggered when playing to the next song</span></span><br><span class="line">  _player.sequenceStateStream.listen((sequenceState) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">//Roll when there is nothing</span></span><br><span class="line">    <span class="keyword">if</span> (sequenceState == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update the information of the currently playing song</span></span><br><span class="line">    <span class="keyword">final</span> currentItem = sequenceState. currentSource;</span><br><span class="line">    <span class="comment">//Get the id put in the tag when generating the playlist</span></span><br><span class="line">    final_title = currentItem?.tag <span class="keyword">as</span> <span class="built_in">String?</span>;</span><br><span class="line">    <span class="comment">//Go to the database to check the information to get the song information</span></span><br><span class="line">    <span class="keyword">final</span> _tem = <span class="keyword">await</span> getSong(_title. toString());</span><br><span class="line">    <span class="comment">//Update the current song id</span></span><br><span class="line">    activeSongValue.value = _title.toString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Assemble the current song</span></span><br><span class="line">    Map_activeSong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    <span class="built_in">String</span> _url = <span class="keyword">await</span> getCoverArt(_tem[<span class="string">&quot;id&quot;</span>]);</span><br><span class="line">    _activeSong[<span class="string">&quot;artist&quot;</span>] = _tem[<span class="string">&quot;artist&quot;</span>];</span><br><span class="line">    _activeSong[<span class="string">&quot;url&quot;</span>] = _url;</span><br><span class="line">    _activeSong[<span class="string">&quot;title&quot;</span>] = _tem[<span class="string">&quot;title&quot;</span>];</span><br><span class="line">    _activeSong[<span class="string">&quot;album&quot;</span>] = _tem[<span class="string">&quot;album&quot;</span>];</span><br><span class="line">    activeSong.value = _activeSong;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The out-of-order monitoring here is useless for me, I wrote one myself (mainly I wrote the out-of-order logic first, and then made the playlist, I am too lazy to change it)</span></span><br><span class="line">    <span class="comment">// isShuffleModeEnabledNotifier.value = sequenceState.shuffleModeEnabled;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the playlist</span></span><br><span class="line">    <span class="keyword">final</span> playlist = sequenceState. effectiveSequence;</span><br><span class="line">    <span class="comment">//Judge the previous song and the next song, and then pass the value to the button for status judgment</span></span><br><span class="line">    <span class="keyword">if</span> (playlist.isEmpty || currentItem == <span class="keyword">null</span>) &#123;</span><br><span class="line">      isFirstSongNotifier. value = <span class="keyword">true</span>;</span><br><span class="line">      isLastSongNotifier. value = <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      isFirstSongNotifier.value = playlist.first == currentItem;</span><br><span class="line">      isLastSongNotifier.value = playlist.last == currentItem;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-Fast-Forward-and-Fast-Rewind"><a href="#2-5-Fast-Forward-and-Fast-Rewind" class="headerlink" title="2.5. Fast Forward and Fast Rewind"></a>2.5. Fast Forward and Fast Rewind</h4><p>In fact, many people have canceled these two buttons now, because there is a progress bar, that is so convenient, but I have written the buttons before, so I will write them, it is a pity to delete them</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">IconButton(</span><br><span class="line">  icon: <span class="keyword">const</span> Icon(</span><br><span class="line">    Icons. fast_rewind,</span><br><span class="line">    color: kTextColor,</span><br><span class="line">  ),</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    <span class="keyword">if</span> (widget. player. position. inSeconds - <span class="number">15</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      widget.player.seek(</span><br><span class="line">          <span class="built_in">Duration</span>(seconds: widget. player. position. inSeconds - <span class="number">15</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>Here you need to make a judgment. If your current position minus the position you want to cancel is less than 0, don’t operate to avoid error reporting. It doesn’t matter if you move forward.</p><h4 id="2-6-Head-up-and-down"><a href="#2-6-Head-up-and-down" class="headerlink" title="2.6. Head up and down"></a>2.6. Head up and down</h4><p>Here you need to monitor the previously set values of <strong>isFirstSongNotifier</strong> and <strong>isLastSongNotifier</strong>. If you don’t filter, click on the first song when playing the first song, and click on the next song when you are playing the last song. there will be problems</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ValueListenableBuilder&lt;<span class="built_in">bool</span>&gt;(</span><br><span class="line">             valueListenable: isLastSongNotifier,</span><br><span class="line">             builder: (_, isLast, __) &#123;</span><br><span class="line">               <span class="keyword">return</span> IconButton(</span><br><span class="line">                 icon: Icon(</span><br><span class="line">                   Icons. skip_next,</span><br><span class="line">                   color: isLast ? badgeDark : kTextColor,</span><br><span class="line">                 ),</span><br><span class="line">                 onPressed: () &#123;</span><br><span class="line">                   (isLast) ? <span class="keyword">null</span> : widget. player. seekToNext();</span><br><span class="line">                 &#125;,</span><br><span class="line">               );</span><br><span class="line">             &#125;),</span><br></pre></td></tr></table></figure><p>Make a judgment, if there is a problem, just gray the button, and then pass a null in onPressed</p><h4 id="2-7-Single-loop-all-loop-random-play-stop-pause"><a href="#2-7-Single-loop-all-loop-random-play-stop-pause" class="headerlink" title="2.7. Single loop, all loop, random play, stop, pause"></a>2.7. Single loop, all loop, random play, stop, pause</h4><p>The difficulty lies in the above. After everything is written, the button part is relatively simple</p><p><strong>Single loop:</strong><code>player.setLoopMode(LoopMode.one);</code></p><p>**Loop all: ** <code>player.setLoopMode(LoopMode.all);</code></p><p><strong>Play in random order:</strong> <code>player.setShuffleModeEnabled(true);</code></p><h3 id="3-Monospace-font"><a href="#3-Monospace-font" class="headerlink" title="3. Monospace font"></a>3. Monospace font</h3><p>Since numbers are added before and after the progress bar of the song, an old-fashioned problem arises, that is, when the number goes from 1 to 0, the progress bar behind will be displaced, so the numbers here need to use monospaced fonts.</p><p>I used two fonts for the whole APP, one is <strong>NotoSansSC</strong>, which supports Chinese, Japanese, Korean and English, and it is very happy to use. It was dragged from the backup font of Jellyfin I set at that time. At that time, it was also used to display Chinese, Japanese, Korean and English subtitles, and it can be used here as well.</p><p>However, there is a problem with this font. It has two versions. The normal version can display both numbers and English, but the Mono version, which is a monospaced font, will display English and numbers in half-width, and it will become thinner. It looks like The head is very big, so I found a small monospaced font from Google Fonts, which is specially used for the number in front of the progress bar to avoid displacement</p><ol><li><p>Declare Asset</p><p> Still declared in pubspec.yaml</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># To add assets to your application, add an assets section, like this:</span></span><br><span class="line"><span class="attr">assets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">assets/images/</span></span><br><span class="line"><span class="attr">fonts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">family:</span> <span class="string">NotoSansSC</span></span><br><span class="line">    <span class="attr">fonts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">asset:</span> <span class="string">assets/fonts/NotoSansSC-Regular.otf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">family:</span> <span class="string">ChivoMono</span></span><br><span class="line">    <span class="attr">fonts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">asset:</span> <span class="string">assets/fonts/ChivoMono-Regular.ttf</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Topical use</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">        formatSongDuration(widget. position),</span><br><span class="line">        style: TextStyle(</span><br><span class="line">            color: borderColor, fontFamily: <span class="string">&#x27;ChivoMono&#x27;</span>, fontSize: <span class="number">12</span>),</span><br><span class="line">      )</span><br></pre></td></tr></table></figure><ol start="3"><li>Global use</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> MaterialApp(</span><br><span class="line">       debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">       title: <span class="string">&#x27;XiuMusic&#x27;</span>,</span><br><span class="line">       theme: ThemeData(fontFamily: <span class="string">&#x27;NotoSansSC&#x27;</span>),</span><br><span class="line">       home: MainScreen(),</span><br><span class="line">     );</span><br></pre></td></tr></table></figure><h3 id="4-Todo-List"><a href="#4-Todo-List" class="headerlink" title="4. Todo List"></a>4. Todo List</h3><p>I have been playing with this thing for a week. When I am under a lot of pressure, writing code really relieves pressure, so I am not in a hurry to finish it, take it slowly</p><p><a href="https://github.com/wellmoonloft/xiumusic#todo-list">Todo List</a> was updated directly on Github</p><p>In fact, it is already available, and those who are interested can come down and play, <a href="https://github.com/wellmoonloft/xiumusic">XiuMusic</a></p><p><img src="https://s2.loli.net/2023/01/10/3Wj8w7QfbZJ9N4y.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> subsonic </tag>
            
            <tag> airsonic </tag>
            
            <tag> music </tag>
            
            <tag> navidrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter writes a Nas music player (1)</title>
      <link href="/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(1)/"/>
      <url>/en/experience/Flutter%20writes%20a%20Nas%20music%20player%20(1)/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Because the last two months have been boring, I have been tossing my old NAS at home, [set up a music server](<a href="https://www.igerm.ee/experience/%E7%AE%A1%E7%90%86">https://www.igerm.ee/experience/%E7%AE%A1%E7%90%86</a> %E7%BC%96%E8%BE%91%E5%88%86%E8%BD%A8%E6%AC%A3%E8%B5%8F%E6%9C%AC%E5%9C%B0%E9 %9F%B3%E4%B9%90%E4%B8%80%E6%9D%A1%E9%BE%99&#x2F;), but I can’t find a particularly satisfactory player. There is also [Sonixd] on the desktop (<a href="https://github.com/jeffvli/sonixd">https://github.com/jeffvli/sonixd</a>) has a good appearance and no fancy functions, but I am not satisfied with the mobile phone. Only <a href="https://substreamerapp.com/">substreamer</a> can be used. But not very pretty.</p><p>The most important thing is that these two players do not support lyrics, and they cannot search in fuzzy or simplified or traditional characters. For example, I want to listen to Jay Chou’s “Back Back”, but the name I searched is <strong>Back Back</strong>, so when I search, I need to switch to traditional Chinese to find it out, which is quite annoying.</p><p>My first reaction was to go to Github to find out if there are any ready-made multi-terminal wheels, but the ones I like are all played locally, or there is a music player imitating NetEase Cloud through the API of NetEase Cloud, which may be blocked at any time. Not to mention breaking it, and it doesn’t even support Navidrome or Subsonic’s API. I really can’t find it, so I gritted my teeth and stomped my feet to make one myself!</p><h3 id="Subsonic-API"><a href="#Subsonic-API" class="headerlink" title="Subsonic API"></a>Subsonic API</h3><p>Navidrome itself has a native API, but not many, and the author is planning to rewrite, but fortunately he has almost all support for Subsonic’s API, so even if Navidrome itself has no API documentation, look at [Subsonic’s documentation](http: &#x2F;&#x2F;<a href="http://www.subsonic.org/pages/api.jsp">www.subsonic.org/pages/api.jsp</a>) can also be put on Postman to try</p><h4 id="Authentication-Server"><a href="#Authentication-Server" class="headerlink" title="Authentication Server"></a>Authentication Server</h4><p><img src="https://s2.loli.net/2023/01/05/V3865yluGvdKPTz.jpg" alt="1672924014867"></p><p>It’s a bit confusing at first glance, but it’s actually very simple. There are two types of verification: either pass in <strong>password</strong>, or pass in <strong>encrypted (password + six-digit salt value) plus six-digit salt value</strong></p><p>First <code>Ping</code> the server for testing (using <a href="https://pub.dev/packages/dio">dio: ^4.0.6</a> can save a lot of operations)</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> Dio(). <span class="keyword">get</span>(</span><br><span class="line">    _baseUrl +</span><br><span class="line">        <span class="string">&#x27;rest/ping?v=0.0.1&amp;c=xiumusic&amp;f=json&amp;u=&#x27;</span> +</span><br><span class="line">        _username + <span class="comment">//v is the client version number, c is the name of the client, u is the username, p is the password</span></span><br><span class="line">        <span class="string">&#x27;&amp;p=&#x27;</span> +</span><br><span class="line">        _password,</span><br><span class="line">  );</span><br><span class="line">  <span class="built_in">print</span>(response);</span><br><span class="line">  <span class="keyword">if</span> (response. statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">//There needs to be one more step here, that is, don’t be happy even if code200 is returned, and verify the feedback from the subsonic server</span></span><br><span class="line">    <span class="built_in">Map</span> _value = response.data[<span class="string">&#x27;subsonic-response&#x27;</span>];</span><br><span class="line">    <span class="built_in">String</span> _status = _value[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    <span class="comment">//The normal state is ok, I am too lazy to throw it wrong, I check it in the debug, and I will definitely throw it out when it is commercialized, but hey, hehe</span></span><br><span class="line">    <span class="keyword">if</span> (_status == <span class="string">&#x27;failed&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(e);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>After completing the two-step verification server and Subsonic’s api, you can save the server information. The subsequent apis are obtained using salt values. In fact, it doesn’t matter, they are all free.</p><h4 id="Encrypted-Login"><a href="#Encrypted-Login" class="headerlink" title="Encrypted Login"></a>Encrypted Login</h4><ol><li><p>Use <code>Rondom</code> to write a randomly generated 6-bit character</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> generateRandomString() &#123;</span><br><span class="line">  final_random = Random();</span><br><span class="line">  <span class="keyword">const</span> _availableChars =</span><br><span class="line">      <span class="string">&#x27;AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz1234567890&#x27;</span>;</span><br><span class="line">  <span class="keyword">final</span> randomString = <span class="built_in">List</span>. generate(<span class="number">6</span>,</span><br><span class="line">          (index) =&gt; _availableChars[_random.nextInt(_availableChars.length)])</span><br><span class="line">      .join();</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">return</span> randomString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Then encrypt with MD5 after splicing</p></li></ol><p>Save these two characters for later API use</p><h4 id="Get-directory"><a href="#Get-directory" class="headerlink" title="Get directory"></a>Get directory</h4><p>The directories in Subsonic are hierarchical from top to bottom like this</p><ul><li>music folder</li><li>Artist folder</li><li>Album</li><li>songs</li></ul><p>However, Navidrome seems to have only one music folder, so I directly use the second-level <code>getIndexes</code> to make my directory master list, and then go down to the album list according to the <code>musician ID</code></p><p><img src="https://s2.loli.net/2023/01/05/IcxZnBTRm9P25f7.jpg" alt="1672925500580"></p><h4 id="play-music"><a href="#play-music" class="headerlink" title="play music"></a>play music</h4><p>Use <code>ValueNotifier</code> for variable monitoring, do not use <a href="https://pub.dev/packages/provider">provider: ^6.0.5 </a> lightly, although it is really convenient, there will always be various global variables The problem, especially when you rely on him and want to change the code back, the workload simply makes you rewrite it!</p><p>In fact, <code>ValueNotifier</code> is also very convenient to use. It can be followed by <code>&lt;int&gt;</code> parameters to specify the type of value, and you can also customize the monitoring data type. I am based on [this article](<a href="https://blog/">https://blog</a>. csdn.net&#x2F;Mr_Tony&#x2F;article&#x2F;details&#x2F;112170758) to operate</p><ol><li><p>Define the data monitor</p><p> <code>ValueNotifier&lt;String&gt; activeSongValue = ValueNotifier&lt;String&gt;(&quot;1&quot;);</code></p><p> In theory, it can be placed in any file, but it is recommended to put it in a unified global variable definition file for easy management. Here I pass in the <code>id</code> of the song and filter it with a default value. If it is <code>&quot;1&quot;</code>, it will be Do not call the interface to get song information (<code>Null safety</code> is mandatory after flutter2.12, I didn’t adapt to it at first, but now I think it’s good)</p></li><li><p>Change the value of the data</p><p> <code>activeSongValue. value = _tem[&quot;id&quot;];</code></p><p> You can use it directly, so it seems that it is actually simpler than <code>provider</code></p></li><li><p>Monitor data changes</p><p> Use the <code>ValueListenableBuilder</code> construct to construct the listening part</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ValueListenableBuilder&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">        valueListenable: activeSongValue, <span class="comment">//monitor</span></span><br><span class="line">        builder: ((context, value, child) &#123;</span><br><span class="line">          <span class="keyword">if</span> (value != <span class="string">&quot;1&quot;</span>) &#123; <span class="comment">// change the value</span></span><br><span class="line">            _setAudioSource(value); <span class="comment">//Directly use id to query and other follow-up work</span></span><br><span class="line">          &#125;</span><br><span class="line">         </span><br><span class="line">          <span class="keyword">return</span> Container()...</span><br></pre></td></tr></table></figure></li><li><p>Get song information</p><p> After you have the song <code>id</code>, you can use <code>getSong</code> to get the music information, use <code>getCoverArt</code> to get the album image, and then use <code>stream</code> to get the streaming file</p></li><li><p>Play the music stream</p><p> Using <a href="https://pub.dev/packages/just_audio">just_audio: ^0.9.31</a> can greatly speed up the development progress, it is the second-ranked dependencies, the first is audioplayers, but just these days he updated the version , the address of the official document is lost, this is called fate</p><p> It is also extremely simple to use. If you don’t care about the display of controls such as button sliders, it only takes three lines of code from clicking the music to starting playback:</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Define the component</span></span><br><span class="line">final_player = AudioPlayer();</span><br><span class="line"><span class="comment">//The url of splicing stream</span></span><br><span class="line"><span class="built_in">String</span> _url = <span class="keyword">await</span> getSongStreamUrl(_id);</span><br><span class="line"><span class="comment">// Get the stream and play it</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> _player.setAudioSource(AudioSource.uri(<span class="built_in">Uri</span>.parse(_url)));</span><br><span class="line">      _player.play();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Error loading audio source: <span class="subst">$e</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol><p>The above is the current progress, including the server test on the desktop, and then the directory enters the song level, and then plays the music.</p><p>There is still a lot of work in the future, but I have been paying attention to Flutter since the 1.x version. I once complained that Huawei’s engineers are useless if they don’t use Flutter. Just pay attention to the adaptation of the mobile terminal. After finishing writing, it is estimated that a simple adjustment of the mobile terminal will be enough. Currently, it is only for functions)</p><p>Here is the <a href="https://github.com/wellmoonloft/xiumusic">Github address</a>, it’s good to be willing to come down and play, but it’s only for development, it’s far from normal use.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> subsonic </tag>
            
            <tag> airsonic </tag>
            
            <tag> music </tag>
            
            <tag> navidrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Realize that the prev and next pages only contain articles of the same category</title>
      <link href="/en/experience/Realize-that-the-prev-and-next-pages-only-contain-articles-of-the-same-category/"/>
      <url>/en/experience/Realize-that-the-prev-and-next-pages-only-contain-articles-of-the-same-category/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>I upgraded hexo to 6.3.0 during the day, but it’s still boring at night, and the outside is still very dangerous, so I just put <a href="https://www.igerm.ee/en/experience/Update-hexo-to-v6-3-0/#Remaining-problem">this function is realized</a>, this problem has always existed, However, due to laziness, it dragged on for nearly a year.</p><p>Let me briefly introduce that my website has three navigations belonging to three <code>categories</code>, so when entering the article, the titles and links of the previous and next pages in the footer are actually in the order of <code>date</code> for all articles as a whole Arranged, so for example, if you click on the next page in the essay, you may click on the article in the experience sharing, which is a bit of a drama. Solve that problem tonight.</p><p>Since each person’s theme is different, the writing method of <code>ejs</code> corresponding to the article page may also be different, here is the original code to explain it (it’s ugly, definitely not the best practice, but it can be used, some masters see it and want to help I’ll optimize it and ask for a message [laughing])</p><blockquote><p>I commented out the ejs syntax and html syntax, in order to better display the js code</p><p>This is written in the post.ejs file</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmpNext = page.<span class="property">next</span>; <span class="comment">//Give the next page object of the current page to a variable</span></span><br><span class="line">     <span class="keyword">while</span>(<span class="literal">true</span>)&#123; <span class="comment">//violent loop</span></span><br><span class="line">       <span class="keyword">if</span>(tmpNext)&#123; <span class="comment">//When the next page is not empty</span></span><br><span class="line">         <span class="keyword">if</span>(page.<span class="property">categories</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">name</span> == tmpNext.<span class="property">categories</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">name</span>)&#123; <span class="comment">//The first category of the current page is the same as the category of the next page</span></span><br><span class="line">           <span class="keyword">if</span>(page.<span class="property">categories</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">name</span> == <span class="string">&#x27;novel&#x27;</span>)&#123; <span class="comment">//The current page is a novel category</span></span><br><span class="line">             <span class="keyword">if</span>(page.<span class="property">categories</span>.<span class="property">data</span>[<span class="number">1</span>].<span class="property">name</span> == tmpNext.<span class="property">categories</span>.<span class="property">data</span>[<span class="number">1</span>].<span class="property">name</span>)&#123; <span class="comment">//Add a second-level category judgment</span></span><br><span class="line">               <span class="comment">// &lt;a href=&quot;&lt;%- url_for(tmpNext.path) %&gt;&quot; target=&quot;_self&quot;&gt;</span></span><br><span class="line">               <span class="comment">// &lt;span&gt;&lt;%= tmpNext. title %&gt;&lt;/span&gt;</span></span><br><span class="line">               <span class="comment">// &lt;i class=&quot;iconfont icon-chevronright&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">               <span class="comment">// &lt;/a&gt;</span></span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               tmpNext = tmpNext.<span class="property">next</span>; <span class="comment">//Find the next big complaint</span></span><br><span class="line">           &#125;</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               <span class="comment">// &lt;a href=&quot;&lt;%- url_for(tmpNext.path) %&gt;&quot; target=&quot;_self&quot;&gt;</span></span><br><span class="line">               <span class="comment">// &lt;span&gt;&lt;%= tmpNext. title %&gt;&lt;/span&gt;</span></span><br><span class="line">               <span class="comment">// &lt;i class=&quot;iconfont icon-chevronright&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">               <span class="comment">// &lt;/a&gt;</span></span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         tmpNext = tmpNext.<span class="property">next</span>; <span class="comment">//Find the next big complaint</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123; <span class="comment">//The next page is empty and exit the loop</span></span><br><span class="line">     <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>I found that it is not clear to use the source code, it is also because I wrote too violently, let me briefly explain:</p><ol><li>First judge whether there is a next page</li><li>Then judge whether the classification of the current page and the next page are consistent, if not, find the next big complaint</li><li>When the current page is consistent with the next page, then judge whether it is a novel category, if not, it will be it directly</li><li>When the current page is a novel classification, then judge the second-level classification (my novels are stored in collections according to the second-level classification), if not, find the next big complaint</li><li>The current page is a novel category, and it belongs to a collection, that’s it</li></ol><p>This perfectly fulfills my needs:</p><ol><li>Essays and experience classification All articles are linked to the next page</li><li>Classification of novels is linked to the next page by collection</li></ol><p>I think there is a better way of writing, and other topics should have the same needs as mine, but since I like this topic, I am too lazy to study other topics. After all, the most important thing about a personal website is the content, so use it first if it can satisfy the function.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Update hexo to v6.3.0</title>
      <link href="/en/experience/Update-hexo-to-v6-3-0/"/>
      <url>/en/experience/Update-hexo-to-v6-3-0/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>In the past few days, I have focused on updating articles, and suddenly found that <code>hexo g</code> displayed a highlight error, because I have been submitting to git to automatically generate articles before, so I have not checked the log carefully</p><p>The main reason is that it only reports a warning when it is generated, and it does not affect the use. This time I found out that I wanted to adjust the theme style, so I need to upgrade the plugin (it has not been upgraded for almost a year, and my hexo version is still 5.4, now 6.3)</p><h3 id="Upgrade-hexo-and-plugins"><a href="#Upgrade-hexo-and-plugins" class="headerlink" title="Upgrade hexo and plugins"></a>Upgrade hexo and plugins</h3><blockquote><p>There are many ways to upgrade node and npm on the Internet, just search for it</p></blockquote><ol><li>Check the hexo version: <code>hexo version</code></li><li>Global upgrade: <code>npm i hexo-cli -g</code></li><li>Navigate to the hexo directory</li><li>Check plugin: <code>npm-check</code></li><li>You can manually upgrade according to the prompt, or directly: <code>npm-upgrade</code> + <code>npm update --save</code></li><li>Check the version number again to confirm: <code>hexo version</code></li></ol><h3 id="Check-if-the-modified-place-is-overwritten"><a href="#Check-if-the-modified-place-is-overwritten" class="headerlink" title="Check if the modified place is overwritten"></a>Check if the modified place is overwritten</h3><p>There is no problem with the upgrade itself, but when using it, because I don’t like to write comments, I may manually modify some plug-ins and forget it. This time, it will be overwritten after the upgrade.</p><p>There are two main system plug-ins I changed:</p><p><a href="https://www.igerm.ee/en/experience/Hexo's-beautification-optimization-and-Lighthouse's-ultimate-tracking/#Modify-hexo-generator-index-pagination">hexo-generator-index</a> As mentioned in the article, I removed several categories from the homepage. If I don’t modify them, the paginated pages still contain articles of this category, which will cause the number of articles on the page to be incorrect.</p><p><code>hexo-generator-category</code>, I also changed this, but I forgot it completely, which caused a problem with the sorting in my novel category. I found the reason by directly modifying and comparing with git, sweating…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">&#x27;hexo-pagination&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>. <span class="built_in">exports</span> = <span class="keyword">function</span>(<span class="params">locals</span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> config = <span class="variable language_">this</span>.<span class="property">config</span>;</span><br><span class="line">   <span class="keyword">const</span> perPage = config. category_generator. per_page;</span><br><span class="line">   <span class="keyword">const</span> paginationDir = config.<span class="property">pagination_dir</span> || <span class="string">&#x27;page&#x27;</span>;</span><br><span class="line">   <span class="keyword">var</span> orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-order&#x27;</span>; <span class="comment">// use variable var instead of constant</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> locals.<span class="property">categories</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">result, category</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (!category. length) <span class="keyword">return</span> result;</span><br><span class="line">    </span><br><span class="line">     <span class="comment">//When classified as a novel, manual sorting is used, and others are sorted by default date. This order is written in the Front-matter of the novel md file</span></span><br><span class="line">     <span class="comment">//For centralized display of novels in the same category</span></span><br><span class="line">     <span class="comment">//Then sort by date in the novel page</span></span><br><span class="line">     <span class="keyword">if</span>(category.<span class="property">name</span> == <span class="string">&#x27;novel&#x27;</span>)&#123;</span><br><span class="line">       orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-order&#x27;</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       orderBy = config.<span class="property">category_generator</span>.<span class="property">order_by</span> || <span class="string">&#x27;-date&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> posts = category. posts. <span class="title function_">sort</span>(orderBy);</span><br><span class="line">     <span class="keyword">const</span> data = <span class="title function_">pagination</span>(category. path, posts, &#123;</span><br><span class="line">       per <span class="title class_">Page</span>,</span><br><span class="line">       <span class="attr">layout</span>: [<span class="string">&#x27;category&#x27;</span>, <span class="string">&#x27;archive&#x27;</span>, <span class="string">&#x27;index&#x27;</span>],</span><br><span class="line">       <span class="attr">format</span>: paginationDir + <span class="string">&#x27;/%d/&#x27;</span>,</span><br><span class="line">       <span class="attr">data</span>: &#123;</span><br><span class="line">         <span class="attr">category</span>: category.<span class="property">name</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> result.<span class="title function_">concat</span>(data);</span><br><span class="line">   &#125;, []);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Hurry up and manually record the upgrade process, save it and forget about it when you upgrade later, the final display effect is very good</p><p><img src="https://s2.loli.net/2022/12/30/Cjxh8RQy7DFYp5X.jpg" alt="1671162733620"></p><h3 id="Remaining-problem"><a href="#Remaining-problem" class="headerlink" title="Remaining problem"></a>Remaining problem</h3><p>In fact, there is still a remaining problem, which is the context address of the article. This address seems to have been created when the system paginated or even earlier, and the original logic is no problem. But I want him to generate three different context-corresponding addresses based on the three categories of essays, experiences, and novels</p><p>That is to say, the context of the articles in my essays will not point to the articles in the experience. At present, it is sorted by time globally. This should also find the place to modify, but let’s talk about it in two days.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Use ipv6 and ddns to do external access for Synology</title>
      <link href="/en/experience/Use-ipv6-and-ddns-to-do-external-access-for-Synology/"/>
      <url>/en/experience/Use-ipv6-and-ddns-to-do-external-access-for-Synology/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>The easiest one is definitely quickconnect, but the account must be migrated to the country, which means that user information, address links, etc. must be stored in the country. I am very disgusted with this point since Apple put the data on the cloud in Guizhou. Therefore, I now use 5G space to synchronize some configuration information on icloud, and put all important files and photos on my nas (this is also the reason why I bought nas in the first place)</p><p>Although we are not trying to do anything illegal, but your messing around with my privacy is pure nonsense. There are many ways to prevent Internet fraud, various real-name and various monitoring, and I have not seen much less domestic fraud, so I decisively migrated Delete the device in the domestic account, and then re-register an account, ready to do external network access by yourself</p><p>After logging in to the new account, you will find that there is a prompt in quickconnect suggesting that you migrate, hehe, give them a smile and experience it for yourself</p><p><img src="https://s2.loli.net/2022/12/30/elRXEcQd1thVvoz.jpg" alt="1670905069658"></p><h3 id="Get-ipv6-address"><a href="#Get-ipv6-address" class="headerlink" title="Get ipv6 address"></a>Get ipv6 address</h3><p>Well, let’s get far, the premise of doing ddns is that you have an external network IP. Of course, at least Beijing has not allocated it to individuals, but it costs 100 yuan a month to open a value-added service, and you can share one, which is pure nonsense. What should have been given to me in the first place, made up a bunch of reasons not to give it, and then opened an opening to collect money. This is a typical robber’s thinking.</p><p>But fortunately, there are plenty of ipv6 addresses. At least Beijing should have all allocated them. First, change the optical modem to bridge connection (I rooted and changed it by myself four or five years ago. You may need to search for the tutorial), and then Enter the router and turn on ipv6, select Native mode, and select automatic configuration for ipv6 dns, <strong>Also remember to turn off the ipv6 firewall</strong></p><p>After confirmation, you can see in the group that you have obtained the ipv6 address starting with 2408. At the same time, all the devices under your router should be able to obtain the ipv6 address.</p><p><img src="https://s2.loli.net/2022/12/30/hq1xuRmDcBsSfIv.jpg" alt="1670904756888"></p><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>Compared with people who play nas, they already have their own domain names. The easiest registration is Ali and Tencent, a one-stop service, registration plus analysis. But in fact, you can transfer the domain name to other platforms to manage and resolve it. I have been using <a href="https://freedns.afraid.org/">freedns</a>. The interface is simple but extremely reliable. The most important thing is to configure ddns extremely simple</p><p>Let me say one more thing here, in order to monitor all kinds of monsters, a group of idiots used to give China the authority to issue ssl certificates, but they made it up by themselves. The reason is that they hijacked dns with fake certificates and were discovered. It’s so ridiculous. , so if you go to all government websites now, you will find that their certificates are all issued by the United States, hahahahaha! !</p><p><img src="https://s2.loli.net/2022/12/30/wBXItQWcTaKz531.jpg" alt="1670905482299"></p><p>First do a domain name analysis, choose AAAA to analyze the ipv6 address and save it</p><p>Then click <a href="https://freedns.afraid.org/dynamic/">Dynamic DNS</a> on the left to enter the configuration page, and click the dynamic update interface above</p><p><img src="https://s2.loli.net/2022/12/30/eTPq1RLQcAE7DMa.jpg" alt="1670905618484"></p><p>Then you can choose the domain name to enable DDNS, activate it, and an upload link with a dynamic password will appear later, just copy it.</p><p><img src="https://s2.loli.net/2022/12/30/HPj4dBcvolfMnrZ.jpg" alt="1670905719483"></p><h3 id="Automatically-upload-new-addresses"><a href="#Automatically-upload-new-addresses" class="headerlink" title="Automatically upload new addresses"></a>Automatically upload new addresses</h3><p>If you are also using freedns, the good news is that you don’t need to use the ddns that comes with Synology (because you can’t upload ipv6 addresses in it), and you don’t need to use the famous ddns-go, you just need to open the text editor and write A shell file:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">curl http://v6.sync.afraid.org/u/**************</span><br></pre></td></tr></table></figure><p>It’s as simple as that, after curl is the upload address you just copied</p><p>Then save it as a .sh file (remember the utf-8 encoding), and put it in any path of Synology</p><p>Enter the control panel, pull down to the bottom and there is a scheduled task. The name and scheduled time are in front of it. I chose to execute it every 10 minutes from 0:00 to 11:50 every day. Run the command here and directly bash the script you just saved. The location is enough</p><p><img src="https://s2.loli.net/2022/12/30/QsnHzfaFXMC4bkR.jpg" alt="1670906114629"></p><p>Later, you can open a task execution log, but you can open this kind of thing to take a look, so just close it, there are quite a lot of log files once every ten minutes.</p><h3 id="Apply-for-an-SSL-certificate"><a href="#Apply-for-an-SSL-certificate" class="headerlink" title="Apply for an SSL certificate"></a>Apply for an SSL certificate</h3><p>You don’t need to go to other places to apply. The certificate application tool that comes with Synology can apply for the free certificate of Let’s Encrypt. You can add it in the control panel-security-certificate. After the application is complete, set the certificate as the default certificate and enter Settings, re-select all the certificates inside, and now you can use <a href="https://custom/">https://custom</a> domain name to access your group on the external network</p><p><img src="https://s2.loli.net/2022/12/30/ed5YAtOXlDvyG9q.jpg" alt="1670906383630"></p><h3 id="Use-certificates-for-applications-in-Docker"><a href="#Use-certificates-for-applications-in-Docker" class="headerlink" title="Use certificates for applications in Docker"></a>Use certificates for applications in Docker</h3><p>With the certificate, there are actually two ways to enable https support for applications in docker:</p><ol><li><p>Import certificates for different applications and open them in their own way;</p></li><li><p>Use the reverse proxy server that comes with Synology</p></li></ol><p>It is strongly recommended to use a reverse proxy here. You don’t need to build an nginx yourself, because the reverse proxy server version 7.0 is really easy to use</p><p><img src="https://s2.loli.net/2022/12/30/lzvZ8j6Xw3DF1uq.jpg" alt="1670951541739"></p><p>Directly in the control panel - login portal - advanced - reverse proxy server - add, and then fill in the application that needs to be reverse proxy. There is a great advantage of using the built-in reverse proxy server here, no need Then deal with the certificate, after the selection is completed, Synology will automatically load the certificate</p><p>Then add a WebSocket in the custom title and save it directly</p><h3 id="Special-formulation-of-Home-Assistant"><a href="#Special-formulation-of-Home-Assistant" class="headerlink" title="Special formulation of Home Assistant"></a>Special formulation of Home Assistant</h3><p>When configuring the reverse proxy in the latest version of Home Assistant, for security needs, you must add an authorization information in the <code>configuration.yaml</code> file, and add the intranet IP of Synology, otherwise the reverse proxy will fail</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">use_x_forwarded_for:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">trusted_proxies:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">192.168</span><span class="number">.31</span><span class="number">.241</span> <span class="comment"># Add the IP address of the proxy server</span></span><br></pre></td></tr></table></figure><h3 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h3><p>After all, the ipv6 firewall of the router is turned off, so it is recommended to enable two-factor authentication. Download a SynologySecure Signin on the mobile phone. No more re-entering tokens</p><p>Then set the original port of the application in the firewall so that only the fixed ip of Synology can be accessed, which is a little more secure (it’s not a big problem, it’s mainly anti-scanning, and it’s definitely risky to throw it on the public network. I did everything, it doesn’t matter)</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Add utterances comments to hexo</title>
      <link href="/en/experience/Add-utterances-comments-to-hexo/"/>
      <url>/en/experience/Add-utterances-comments-to-hexo/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>It has been more than a year since I transferred the article to hexo, and it is very smooth to use, but the comment system has not been very satisfactory. I was thinking about it, I am afraid that no one will read this stuff for a few years, because there are a lot of “you know” things written in the essay, so I have no motivation to do SEO, just let it go</p><p>However, there are still some things in the experience sharing, which may be helpful to some people, even if not. In case I want to make some new things one day, I can come back and look through it. After all, I have forgotten a lot of configurations after a long time, and it is very troublesome to search.</p><p>When I came up, I saw one or two people set up according to my operation, which is very good. But some time ago, I changed the structure of the website and changed the code of the home page, which led to a change in the path of experience sharing articles, and the previous comments disappeared. I am a little sorry for others. Moreover, I am not very satisfied with what gitalk, valine, and qisqus are used. Now that github has been prostituted to the end, maybe a warehouse can also realize the comment function. Thinking of this, I searched and found a good thing <a href="https://utteranc.es/">utteranc</a></p><p>This is a comment function based on the issues of the github warehouse. The principle is very simple, that is, to hang each article in the issues as a question, and then the people behind can comment on this question, and it also supports emoticons. The function is very complete.</p><p>As for some people who don’t have a github account? Those people may not have the need to comment, hahaha</p><h4 id="1-Create-a-Github-warehouse"><a href="#1-Create-a-Github-warehouse" class="headerlink" title="1. Create a Github warehouse"></a>1. Create a Github warehouse</h4><h4 id="2-Add-Github-App"><a href="#2-Add-Github-App" class="headerlink" title="2. Add Github App"></a>2. Add Github App</h4><p>This is mainly used to automatically create an Issue and associate it with the article address according to the rules when others comment. Of course, if you are not at ease, you can build a set of automatic adding programs yourself, it’s just a little troublesome, and it’s not necessary</p><p>Address: <a href="https://github.com/apps/utterances">https://github.com/apps/utterances</a></p><p>Visit the address, enter the installation page, and click the <code>Install</code> button</p><p><img src="https://s2.loli.net/2022/12/30/Tm9tgsrRMLnu5FC.png" alt="Installation"></p><p>Then select the newly built warehouse and click <code>Install</code></p><h4 id="3-Get-the-web-page-code"><a href="#3-Get-the-web-page-code" class="headerlink" title="3. Get the web page code"></a>3. Get the web page code</h4><p>Enter here<a href="https://utteranc.es/">utteranc</a>, fill in <strong>Repository</strong> according to the instructions, select the <strong>corresponding method</strong> of the article and Issue (recommended to use the default), <strong>Issue Label</strong> if It is enough to create a new warehouse and leave it blank. If you want to use the original warehouse, you can add a label (no problem if you don’t add it, because there should be less Issues in that warehouse), <strong>Theme</strong> select it, and finally You will see the insertion code in the place of <strong>Enable Utterances</strong>, copy it out</p><p><img src="https://s2.loli.net/2022/12/30/FMfSVsnTocI83kb.jpg" alt="1671016771605"></p><h4 id="4-Insert-the-corresponding-area-of-the-theme"><a href="#4-Insert-the-corresponding-area-of-the-theme" class="headerlink" title="4. Insert the corresponding area of the theme"></a>4. Insert the corresponding area of the theme</h4><p>At present, many themes should have started to support utterances. It doesn’t matter if they don’t support it. Just find the comment area of the original article. There is a separate <code>comments.ejs</code> to manage the place where the Oranges theme inserts comments. Add an open button, and then copy the above code into it, just pass the parameters or something, mainly because of my theme, you may not see the original Oranges after reading the code, it was changed by a pass.. .</p><h4 id="5-Principle-of-use"><a href="#5-Principle-of-use" class="headerlink" title="5. Principle of use"></a>5. Principle of use</h4><p>After deployment, you will see a utterances comment area under each article. It should be noted that there is no Issue associated with this article in the comment library at this time, only the utterances when the first comment is initiated. The github app will help you create a new Issue associated with this article. This is the background logic. For the actual user experience, this step is invisible, enjoy.</p><p><img src="https://s2.loli.net/2022/12/30/F3L8AHW9gKhT5Gf.jpg" alt="1671017518617"></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>The perfect Hexo multilingual solution</title>
      <link href="/en/experience/The-perfect-Hexo-multilingual-solution/"/>
      <url>/en/experience/The-perfect-Hexo-multilingual-solution/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><blockquote><p><strong>Updated on 2022-12-17, this method can be used with peace of mind. The new library domain name on the github page is the original domain name&#x2F;new library name. It is recommended to directly take the abbreviation of the corresponding language, which is easy to remember and search, and more The key point is that compared to directly linking a google translation, the biggest advantage is google crawling</strong></p></blockquote><blockquote><p><strong>Updated on 2022.11.30, the node-version version has been upgraded, using 12 will prompt the upgrade in the management background, although it can be used normally, but the checkout@v2 in the code is changed to v3, setup-node@v1 is changed to v3, node-version Just change it to 16</strong></p></blockquote><h3 id="Program-advantages"><a href="#Program-advantages" class="headerlink" title="Program advantages"></a>Program advantages</h3><p>First of all, let me talk about the advantages of the program I currently use:</p><ul><li>Only one set of Hexo is deployed locally, and the styles and articles are maintained together (only the template and configuration files are different)</li><li>There are two independent front desks at the time of the visit, providing a completely immersive reading experience</li><li>With automated deployment, you can concentrate on writing articles after configuration, without additional operations</li><li>Truly independent classification and labeling</li><li>On Google analytics, the two front desks will be treated as one website for centralized data presentation</li><li>Independent site map, which is more effective for Google to grab links and facilitate SEO optimization</li></ul><h3 id="Interesting-discovery"><a href="#Interesting-discovery" class="headerlink" title="Interesting discovery"></a>Interesting discovery</h3><p>Hexo’s multi-language solution is a problem that many people are considering, but there has been no particularly perfect solution for a long time. There are currently two mainstream solutions:</p><ol><li><p>Use the <code>hexo-generator-i18n</code> plug-in, add the <code>lang</code> logo to the article to distinguish, and then use the template program to judge the generation when rendering</p></li><li><p>Deploy two sets of Hexo directly, upload them to different libraries, and add manual switching on the page</p></li></ol><p>When I was using the second solution and configuring the address of Github Pages today,  I found an interesting thing, that’s why I have this solution.</p><p><img src="https://s2.loli.net/2022/12/30/Eg7U1NHxf4DMwzb.png" alt="image-20210407134200285"></p><p>This is the address of the plan I created to store the English version of Hexo. You will find that I did not configure a custom domain name and did not enable mandatory Https, but the address of this library <code>github.com/wellmoonloft/en</code> has automatically become<code> https://www.igerm.ee/en/</code>, I guess it may be that my Chinese version of Hexo is configured with a custom domain name, and Github automatically replaces <code>wellmoonloft.github.io</code> with my custom domain name, then the same user The address of the <code>en</code> warehouse created below becomes like this, **This is great! **</p><h3 id="Multi-language-solution"><a href="#Multi-language-solution" class="headerlink" title="Multi-language solution"></a>Multi-language solution</h3><p>Let me talk about the multilingual plan I am thinking about:</p><h4 id="1-Use-multiple-configuration-files-system-and-template"><a href="#1-Use-multiple-configuration-files-system-and-template" class="headerlink" title="1. Use multiple configuration files (system and template)"></a>1. Use multiple configuration files (system and template)</h4><p><img src="https://s2.loli.net/2022/12/30/XOWljJmfUvRGN3k.png" alt="image-20210407135116959"></p><p>For the theme I use, three additional files need to be configured:</p><ol><li><p>System configuration file, used to distinguish different push warehouses</p></li><li><p>Theme configuration file, used to configure different buttons and styles (in fact, it can be merged into the system configuration)</p></li><li><p>The template file is used to add different page switching (ie <code>EN</code> on the Chinese version and <code>中</code> on the English version)</p></li></ol><p>In fact, I think these three files can be optimized to put all the differences in the system configuration file, but for quick implementation, so simply do this first</p><h4 id="2-Push-multiple-libraries-during-automatic-deployment"><a href="#2-Push-multiple-libraries-during-automatic-deployment" class="headerlink" title="2. Push multiple libraries during automatic deployment"></a>2. Push multiple libraries during automatic deployment</h4><p>It is very simple to implement. Many people may not have thought that after the main library is pushed, **change the names of the above three files and push them again. **</p><p>I wrote the code to change the file name very quickly, it is stored in the root directory of <code>change_name.js</code>, if anyone can help to improve it, it would be greatly appreciated</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;_config.yml&quot;</span>, <span class="string">&quot;_config1.yml&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;&#125;);</span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;_config_en.yml&quot;</span>, <span class="string">&quot;_config.yml&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;&#125;);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;themes/oranges/_config.yml&quot;</span>, <span class="string">&quot;themes/oranges/_config1.yml&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;&#125;);</span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;themes/oranges/_config_en.yml&quot;</span>, <span class="string">&quot;themes/oranges/_config.yml&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;&#125;);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;source/CNAME&quot;</span>, <span class="string">&quot;source/NOUSE&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;&#125;);</span><br></pre></td></tr></table></figure><p>To explain briefly (in fact, it doesn’t seem to be necessary), first change the name of the main file, and then change the English version of the file to the main file. The CNAME file cannot be excluded by <code>skip_render</code> because I have set a custom domain name for the main warehouse. Upload this file to the English version of the warehouse, <strong>then you will be frequently emailed errors</strong>, like this, so just change it to an inexplicable name by the way</p><p><img src="https://s2.loli.net/2022/12/30/EDZTgi76bJSrFcB.png" alt="image-20210407135946670"></p><h4 id="3-Use-skip-render-to-exclude-different-files"><a href="#3-Use-skip-render-to-exclude-different-files" class="headerlink" title="3. Use skip_render to exclude different files"></a>3. Use skip_render to exclude different files</h4><p>Create two new files under <code>source/_posts</code>, <code>cn</code> and <code>en</code> to put Chinese and English articles, and then use <code>skip_render</code> in the system configuration file to distinguish:</p><p>Inside <code>_config.yml</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render</span>:</span><br><span class="line">  - _posts/en<span class="comment">/**</span></span><br></pre></td></tr></table></figure><p>In <code>_config_en.yml</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render</span>:</span><br><span class="line">  - _posts/cn<span class="comment">/**</span></span><br></pre></td></tr></table></figure><h4 id="4-Add-renaming-and-deployment-in-the-automatic-deployment-file"><a href="#4-Add-renaming-and-deployment-in-the-automatic-deployment-file" class="headerlink" title="4. Add renaming and deployment in the automatic deployment file"></a>4. Add renaming and deployment in the automatic deployment file</h4><p>Before doing this step, remember to add the renamed <code>js</code> file in the root directory, and then modify the automatic deployment configuration file. For automatic deployment, please see me <a href="https://www.igerm.ee/en/tech/How-to-use-GitHub-Action-for-automatic-Hexo/">previous article</a>, and then look at the newly added part of the code, that is, add it after <code>- name: Deploy</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="string">-master</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.repository.owner.id</span> <span class="string">==</span> <span class="string">github.event.sender.id</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;12&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Setup</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HEXO_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$ACTION_DEPLOY_KEY&quot;&gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 700 ~/.ssh</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;wellmoonloft@gmail.com&quot;</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;wellmoonloft&quot;</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Change_Name</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          node change_name</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Setup</span> <span class="string">Hexo</span> <span class="string">EN</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HEXO_DEPLOY_KEY_EN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$ACTION_DEPLOY_KEY&quot;&gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 700 ~/.ssh</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br></pre></td></tr></table></figure><p>The code used to push the second warehouse starts from line 45 <code>-name: Change_name</code></p><ol><li><p>Run the renamed file first</p></li><li><p>Then modify the private key of the English version of the warehouse (I forgot to mention here, in order to automatically deploy you need to configure an additional pair of public and private keys for the English version of the warehouse, the private key is stored in this warehouse, and the public key is stored in the English version of the warehouse. So there will be two source file warehouses)</p></li></ol><p><img src="https://s2.loli.net/2022/12/30/bTYAwRGxKedoXrs.png" alt="image-20210407141134730"></p><ol start="3"><li>Hexo c, g, and d</li></ol><p><strong>Look at the effect, Google translated, don’t be too picky</strong></p><p><img src="https://s2.loli.net/2022/12/30/LHrPBKe4aScAExF.png" alt="image-20210407140520848"></p><p><img src="https://s2.loli.net/2022/12/30/q2XLOSJRKBnW4dx.png" alt="image-20210407140538753"></p><h3 id="PS-There-may-be-another-idea-behind"><a href="#PS-There-may-be-another-idea-behind" class="headerlink" title="PS: There may be another idea behind"></a>PS: There may be another idea behind</h3><p>Call a <code>NodeJS</code> program during deployment, automatically translate Chinese into English through Google’s translated <code>API</code>, and save it in the <code>en</code> folder</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> multilingual </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to use GitHub Action for automatic Hexo</title>
      <link href="/en/experience/How-to-use-GitHub-Action-for-automatic-Hexo/"/>
      <url>/en/experience/How-to-use-GitHub-Action-for-automatic-Hexo/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><blockquote><p><strong>Updated on 2022.11.30, the node-version version has been upgraded, using 12 will prompt the upgrade in the management background, although it can be used normally, but the checkout@v2 in the code is changed to v3, setup-node@v1 is changed to v3, node-version Just change it to 16</strong></p></blockquote><p>It has been 8 days since Hexo was set up, and it has become more and more comfortable to use, and the modified things have basically come to an end.</p><p>Today, in order to achieve a more perfect multi-language (including articles), I have to toss a bit. The plan has been thought about. Today, I will release Hexo to Github Action to prepare for the multi-language plan.</p><p>First of all, suppose that Hexo has been installed, and all the toss is almost done, then start to configure automatic deployment</p><p><a href="https://www.igerm.ee/en/experience/Use-Hexo-GitHub-Page-Typora-to-write-articles/">How to install Hexo and deploy to GitHub Pages here</a></p><p>First of all, since using Hexo, I believe you already have a warehouse for deploying Hexo Github Pages. Now we need to build another warehouse to store the original files of Hexo, which are the files in the root directory of your local Hexo. This step Using <code>VSCode</code> directly, you can directly <code>share</code> the project to Github</p><h3 id="Generate-key"><a href="#Generate-key" class="headerlink" title="Generate key"></a>Generate key</h3><p>Maybe people who use Hexo have already done this step, but I have been using vscode before, so I have not done this step. Now for automatic deployment, a new key is generated here to automatically deploy Hexo.</p><p>The following is the operation under macOS. The operation method under Linux is the same. Windows 10 users can install Ubuntu in the market and execute it afterwards:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;Hexo Deploy Key&quot; -f github-deploy-key -N &quot;&quot;</span><br></pre></td></tr></table></figure><p>This will generate two files in the current directory:</p><p>-github-deploy-key —— private key<br>-github-deploy-key.pub-public key</p><h3 id="GitHub-configuration-key"><a href="#GitHub-configuration-key" class="headerlink" title="GitHub configuration key"></a>GitHub configuration key</h3><p>Here put the <code>private key</code> in the code repository where the original Hexo files are stored, and use it when triggering Actions.</p><p>Put the <code>public key</code> in the code repository corresponding to GitHub Pages for writing during Hexo deployment.</p><h3 id="Configure-private-key"><a href="#Configure-private-key" class="headerlink" title="Configure private key"></a>Configure private key</h3><p>First open the repository where Hexo is saved on GitHub, visit <code>Settings -&gt; Secrets</code>, and select <code>New repository secret</code></p><p><img src="https://s2.loli.net/2022/12/30/iu8s2EZx6hmLRY7.png" alt="image-20210407125805861"></p><p>Fill in the name part: <code>HEXO_DEPLOY_KEY</code>, pay attention to the capitalization, this will be used by GitHub Actions Workflow later, ** must not be wrong. **</p><h3 id="Add-public-key"><a href="#Add-public-key" class="headerlink" title="Add public key"></a>Add public key</h3><p>Next, we need to access the warehouse where the webpage is stored, which is the warehouse after Hexo deployment, such as: <code>yourname.github.io</code>, visit <code>Settings -&gt; Deploy keys</code>, and then press <code>Add deploy key</code> to add a new The public key:</p><p><img src="https://s2.loli.net/2022/12/30/sInQUzm9vT5JAla.png" alt="image-20210407130033885"></p><p>Enter in the <code>Title</code>: <code>HEXO_DEPLOY_PUB</code>, of course, you can also fill in other custom names.</p><p>Paste the contents of the <code>github-deploy-key.pub</code> file in <code>Key</code>.</p><blockquote><p>Note: Be sure to check <code>Allow write access</code> to enable write access, otherwise the failure to write will result in deployment failure.</p></blockquote><h3 id="Create-Workflow"><a href="#Create-Workflow" class="headerlink" title="Create Workflow"></a>Create Workflow</h3><p>First create a new file in the Hexo warehouse: <code>.github/workflows/deploy.yml</code>, the file name can be taken by yourself, but it must be placed in the <code>.github/workflows</code> directory, the content of the file is as follows:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="string">-master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.repository.owner.id</span> <span class="string">==</span> <span class="string">github.event.sender.id</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;12&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Setup</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HEXO_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$ACTION_DEPLOY_KEY&quot;&gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 700 ~/.ssh</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;john@doe.com&quot;</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;John Doe&quot;</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">-name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br></pre></td></tr></table></figure><p>To explain briefly, when we push content to the remote <code>master</code> branch, this Workflow will be triggered.</p><p>Use <code>ubuntu-latest</code> as the system of <code>hexo deploy</code>.</p><p>First execute <code>actions/checkout@v2</code> to check out the source code (this is also the code written by others), and then set to use the latest Node.js v12 LTS as the node interpreter.</p><p>The next step is to create SSH-related configuration files. Note that <code>secrets.HEXO_DEPLOY_KEY</code> corresponds to the private key we set before, so the name must not be mistaken.</p><p>Just replace the name and email address related to <code>git config</code> with your own.</p><p>The last step is to install Hexo CLI, all dependent modules and deployment.</p><h4 id="It-is-recommended-to-load-the-dependency-package-locally"><a href="#It-is-recommended-to-load-the-dependency-package-locally" class="headerlink" title="It is recommended to load the dependency package locally"></a>It is recommended to load the dependency package locally</h4><p>It should be noted here that I suggest that you use my method, which is to remove <code>npm install</code> and run <code>npm install</code> locally, and then <code>push</code> all dependent packages to the warehouse. This has two advantages:</p><ol><li><p>When updating frequently, save the time of downloading dependent packages (think if you only update a certain file, there is no need to download the dependent package again)</p></li><li><p>Due to my special needs, <a href="https://www.igerm.ee/en/experience/Hexo's-beautification-optimization-and-Lighthouse's-ultimate-tracking/">I need to remove a certain category of articles when paging</a>, so I modified the <code>hexo -generator-index</code> The code of this package, if you re-download, then the part I modified will not be implemented</p></li></ol><p>After the configuration is complete, try to push the code, and then you can check the operation in the <code>Actions</code> of the warehouse</p><p><img src="https://s2.loli.net/2022/12/30/WQBlS1v67aPtMTV.png" alt="image-20210407133226277"></p><h3 id="Pit-one-change-the-deploy-configuration-warehouse-address-to-git-mode"><a href="#Pit-one-change-the-deploy-configuration-warehouse-address-to-git-mode" class="headerlink" title="Pit one, change the deploy configuration warehouse address to git mode"></a>Pit one, change the deploy configuration warehouse address to git mode</h3><p>Make sure that there is a <code>GitHub Pages</code> configuration similar to the following in the <code>_config.yml</code> file:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:wellmoonloft/en.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><blockquote><p>Note: If you use http, there will be problems when publishing later</p></blockquote><h3 id="Pit-two-remember-not-to-delete-the-time-zone-in-the-automatic-deployment-configuration-file"><a href="#Pit-two-remember-not-to-delete-the-time-zone-in-the-automatic-deployment-configuration-file" class="headerlink" title="Pit two, remember not to delete the time zone in the automatic deployment configuration file"></a>Pit two, remember not to delete the time zone in the automatic deployment configuration file</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br></pre></td></tr></table></figure><p>If you don’t add this, when someone in China publishes an article, the displayed article time will be exactly 8 hours away from your <code>date</code> time</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> GitHub Action </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wrong address when using Hexo full text search</title>
      <link href="/en/experience/Wrong-address-when-using-Hexo-full-text-search/"/>
      <url>/en/experience/Wrong-address-when-using-Hexo-full-text-search/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Hexo has been set up for 6 days, and it feels very good for normal use. Today, I found a problem. When using full-text search, if your current page is not the homepage, then the searched address is wrong.</p><p>I tracked down the wrong address and found that it was caused by the addition of the current address.</p><p>Take my website as an example, for example, the current address is: <code>https://www.igerm.ee/categories/gossip/</code>, and then I just search for a content</p><p><img src="https://s2.loli.net/2022/12/30/YOvpbAy4B9wah2n.png" alt="image-20210405200959515"></p><p>The actual address of the first article should be: <code>https://www.igerm.ee/2021/04/04/tech/Hexo beautification optimization extreme tracking/</code></p><p>But the address added in the <code>a</code> tag is: <code>https://www.igerm.ee/categories/gossip/2021/04/04/tech/Hexo beautification and optimization to chase points/</code> This makes it impossible to enter the article by clicking the title Page, and entered the 404 page</p><p>Preliminary guess may be caused by the automatic splicing of addresses. Looking at the source code, I believe that if there is no special requirement in the <code>search</code> part, everyone’s source code is copied from the official plug-in <code>demo</code>, then ours should be the same, from the <code>isMatch&#39; </code>Part start:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isMatch) &#123;</span><br><span class="line">   str += <span class="string">&quot;&lt;li&gt;&lt;a href=&#x27;&quot;</span> + <span class="string">&quot;&lt;%- theme.avatar.path %&gt;&quot;</span> + data_url + <span class="string">&quot;&#x27;class=&#x27;search-result-title&#x27;&gt;&quot;</span> + orig_data_title + <span class="string">&quot;&lt;/a&gt; &quot;</span>;</span><br><span class="line">   <span class="keyword">var</span> content = orig_data_content;</span><br><span class="line">   <span class="keyword">if</span> (first_occur &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">   <span class="comment">// cut out 100 characters</span></span><br><span class="line">   <span class="keyword">var</span> start = first_occur-<span class="number">20</span>;</span><br><span class="line">   <span class="keyword">var</span> end = first_occur + <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (start &lt;<span class="number">0</span>) &#123;</span><br><span class="line">      start = <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (start == <span class="number">0</span>) &#123;</span><br><span class="line">      end = <span class="number">100</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (end&gt; content.<span class="property">length</span>) &#123;</span><br><span class="line">      end = content.<span class="property">length</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> match_content = content.<span class="title function_">substr</span>(start, end);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// highlight all keywords</span></span><br><span class="line">   keywords.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">keyword</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> regS = <span class="keyword">new</span> <span class="title class_">RegExp</span>(keyword, <span class="string">&quot;gi&quot;</span>);</span><br><span class="line">      match_content = match_content.<span class="title function_">replace</span>(regS, <span class="string">&quot;&lt;span class=\&quot;search-keyword\&quot;&gt;&quot;</span> + keyword + <span class="string">&quot;&lt;/span&gt;&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">   str += <span class="string">&quot;&lt;p class=\&quot;search-result-abstract\&quot;&gt;&quot;</span> + match_content + <span class="string">&quot;...&lt;/p&gt;&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">   str += <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The <code>str</code> in the second line is where the <code>a</code> tag is output. You can see that I have added <code>&quot;&lt;%- theme.avatar.path %&gt;&quot;</code> in front, because the address in <code>data_url</code> is the address of the article Remove the part of the website address. If you don’t complete the URL in front, then the page will automatically be spliced ​​with the address of the current page, which also caused the error mentioned above. Here I spliced ​​the main address of my own website completely. Then the searched address will be no problem.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo&#39;s beautification, optimization and Lighthouse&#39;s ultimate tracking</title>
      <link href="/en/experience/Hexo&#39;s-beautification-optimization-and-Lighthouse&#39;s-ultimate-tracking/"/>
      <url>/en/experience/Hexo&#39;s-beautification-optimization-and-Lighthouse&#39;s-ultimate-tracking/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>I wrote an article before <a href="https://www.igerm.ee/en/experience/Use-Hexo-GitHub-Page-Typora-to-write-articles/">Using Hexo, GitHub Page, Typora to write articles</a> and shared the process of installing Hexo in detail. Today, let’s talk about how I did article migration in the past few days, choose Hexo theme, and the process of theme modification and Hexo pagination modification. Finally, I will briefly talk about how to achieve 100 points in Lighthouse.</p><h2 id="Hexo-Beautify"><a href="#Hexo-Beautify" class="headerlink" title="Hexo Beautify"></a>Hexo Beautify</h2><p>First of all, after Hexo is installed, the default theme is <code>landscape</code>, which is also very concise. It is completely fine for those who focus on writing articles. However, when I used Halo before, I used <a href="https://theme-next.iissnan.com/">Next theme</a>, so the first idea of ​​this migration is to still use <code>next</code></p><h3 id="Theme-installation"><a href="#Theme-installation" class="headerlink" title="Theme installation"></a>Theme installation</h3><p>What’s interesting is that I didn’t search for <code>next</code> directly, but wanted to find <code>next</code> in <a href="https://hexo.io/themes/">Hexo’s official theme library</a>. I think this is a kind of fate, let I found the theme of Oranges, you can take a look at <a href="https://hexo.theme.oranges.zcheng.site/">Demo</a>, this theme is more concise than <code>next</code></p><p><img src="https://s2.loli.net/2022/12/30/9FJTBEkxAMhI6gD.png" alt="image-20210404103130252"></p><p>All the variable buttons and columns have been removed, which brings a benefit. When selecting other tab buttons on the mobile terminal, there is no need to click a drop-down menu. Just a little bit of simplification made me choose [this theme](https: &#x2F;&#x2F;github.com&#x2F;zchengsite&#x2F;hexo-theme-oranges)</p><p>The installation process is very simple, there are only two steps:</p><ol><li><p><code>$ git clone https://github.com/zchengsite/hexo-theme-oranges.git themes/oranges</code></p></li><li><p>Modify the <code>_config.yml</code> file in the hexo root directory and change <code>theme</code> to <code>oranges</code></p></li></ol><h3 id="Theme-configuration"><a href="#Theme-configuration" class="headerlink" title="Theme configuration"></a>Theme configuration</h3><p>Before officially using the theme, you can also make some personalized configuration based on the theme. It can be seen that the author has very strict standards for the opening of some functions. Basically, the functions listed in the Readme file are basically required, which can be found in <a href="https://github.com/zchengsite/hexo-theme-oranges/blob/master/README-zh.md#%E9%85%8D%E7%BD%AE">here View</a>, because the author’s document is very detailed , I won’t list it separately, I will just briefly talk about the functions I have enabled:</p><p>Categories, tags, article directories, RSS, comments, Google Analytics, top and bottom pages, full text search</p><p>The image lazy loading is not turned on, mainly because I feel that the original image has already used the image bed + CDN, and one more lazy loading is unnecessary, and the look and feel is not good, you must first look at an unloaded image</p><h3 id="Theme-modification"><a href="#Theme-modification" class="headerlink" title="Theme modification"></a>Theme modification</h3><p>Let’s talk about what I’ve changed. It’s broken, let’s talk about it bit by bit.</p><h4 id="Add-email-recognition-to-footer"><a href="#Add-email-recognition-to-footer" class="headerlink" title="Add email recognition to footer"></a>Add email recognition to footer</h4><p><img src="https://s2.loli.net/2022/12/30/foYqDkQxIWFGV9m.png" alt="image-20210404104415928"></p><p>All the icons here correspond to a URL, so the author directly writes the address of the configuration file into the <code>href</code> of the <code>&lt;a&gt;</code> tag when processing, but as a mailbox, it needs to be added to the <code>href</code> The previous <code>mailto:</code>, but because there is a <code>:</code> in it, writing directly in the configuration file will report an error, so I modified the code as follows:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;social&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      &lt;% for(let item of theme.footer.social)&#123; %&gt;</span><br><span class="line">        &lt;% if (item.name == &quot;email&quot;) &#123;%&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">&quot;&lt;%- item.name %&gt;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mailto:&lt;%- item.path %&gt;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-&lt;%- item.icon %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%&#125; else &#123;%&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">&quot;&lt;%- item.name %&gt;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- item.path %&gt;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-&lt;%- item.icon %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%&#125; %&gt;</span><br><span class="line">      &lt;%&#125; %&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &lt;% for(let item of theme.footer.more)&#123; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer-more&quot;</span>&gt;</span></span><br><span class="line">      &lt;% if (item.path) &#123;%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- item.path %&gt;&quot;</span>&gt;</span>&lt;%- item.name %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      &lt;%&#125; else &#123;%&gt;</span><br><span class="line">        &lt;%- item.name %&gt;</span><br><span class="line">      &lt;%&#125; %&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &lt;%&#125; %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>When the social name in the configuration file is <code>email</code>, add <code>mailto:</code> to the code</p><h4 id="Remove-a-category-from-the-homepage-article-list"><a href="#Remove-a-category-from-the-homepage-article-list" class="headerlink" title="Remove a category from the homepage article list"></a>Remove a category from the homepage article list</h4><p>I don’t know if anyone else has this requirement, because in addition to technical articles in my blog, there are also some novels, and a daily paragraph similar to the previous talk, all piled in the homepage list is very confusing, so I modified After the code, remove a certain category from the list (it doesn’t matter if you remove a few), the code changes little, but the structure is more complicated, so I posted all index.ejs, if you want to change it, just copy it, and then Then manually change the 11th line</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container index&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Traverse the rendered article --&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">    var prev = -10086;// prev year</span><br><span class="line">    var curr;// curr year, ever step be updated</span><br><span class="line"></span><br><span class="line">    page.posts.forEach(function(item) &#123;</span><br><span class="line">      var mark = true;</span><br><span class="line">      item.categories.forEach(function(item1)&#123;</span><br><span class="line">        if(item1.name == &quot;novel&quot; || item1.name == &quot;breaking thoughts&quot;)&#123;</span><br><span class="line">          mark = false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      if(mark)&#123;</span><br><span class="line">        curr = item.date.year()</span><br><span class="line">        if (curr !== prev) &#123;</span><br><span class="line">          prev = curr;</span><br><span class="line"></span><br><span class="line">    %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-title&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&lt;%- curr %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">      &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-item&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&lt;%- item.title %&gt;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time-m-d&quot;</span>&gt;</span>&lt;%- item.date.format(&quot;MM-DD&quot;) %&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(item.path) %&gt;&quot;</span>&gt;</span></span><br><span class="line">            &lt;% if(item.title !== &quot;&quot;) &#123;%&gt;</span><br><span class="line">              &lt;% if (item.top) &#123;%&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">title</span>=<span class="string">&quot;&lt;%= __(&#x27;pinned&#x27;) %&gt;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon iconfont icon-pin-top post-top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&lt;%- item.title %&gt;&lt;/span &gt;</span><br><span class="line">              &lt;%&#125; else &#123;%&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>&lt;%- item.title %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              &lt;%&#125; %&gt;</span><br><span class="line">            &lt;%&#125; else &#123;%&gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>untitled<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &lt;%&#125; %&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &lt;% &#125;&#125;) %&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;post-navigation&quot;</span>&gt;</span></span><br><span class="line">    &lt;% if(page.prev !== 0)&#123; %&gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(page.prev_link)%&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-angleleft&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    &lt;%&#125; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;page-num&quot;</span>&gt;</span>&lt;%- page.current %&gt; / &lt;%- page.total -%&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    &lt;% if(page.next !== 0)&#123; %&gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(page.next_link)%&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-angleright&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    &lt;%&#125; %&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The difference from the original theme is that I extracted the year in the list and displayed it separately. This way, the look and feel is better. Of course, I copied it from the archive page.</p><p><img src="https://s2.loli.net/2022/12/30/ba4HmDgAX7t1VCM.png" alt="image-20210404105509804"></p><h4 id="Modify-hexo-generator-index-pagination"><a href="#Modify-hexo-generator-index-pagination" class="headerlink" title="Modify hexo-generator-index pagination"></a>Modify hexo-generator-index pagination</h4><p>It should be noted that unless you do not use paging (it seems unlikely), if you use system paging, then the system will not remove the articles you want to remove when paging by itself. This will cause a problem, such as If you divide 10 articles, but the homepage only displays 7 articles, then this page will be 7 articles after pagination. If a page happens to contain all the articles you want to remove, then there will be nothing on this page. Contrary to our original intention, so if we want to achieve a better look and feel, we also need to modify the paging program of Hexo</p><p>The modified location is in the <code>node_modules</code> folder of the root directory of your blog. Find the file <code>generator.js</code> in the folder <code>hexo-generator-index</code>, and open it with <code>vscode</code> or Notepad. After the article array is generated, before calling the paging function, add a piece of code. My method is to create a new array, then add a judgment to the old array, and push the unexcluded articles into the new array. The code is as follows, the change is from the 16th Line start</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">&#x27;hexo-pagination&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;sort&#125; = <span class="built_in">require</span>(<span class="string">&#x27;timsort&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span>(<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> config = <span class="variable language_">this</span>.<span class="property">config</span>;</span><br><span class="line">  <span class="keyword">const</span> posts = locals.<span class="property">posts</span>.<span class="title function_">sort</span>(config.<span class="property">index_generator</span>.<span class="property">order_by</span>);</span><br><span class="line">  <span class="keyword">const</span> temp_posts = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sort</span>(posts.<span class="property">data</span>, <span class="function">(<span class="params">a, b</span>) =&gt;</span> (b.<span class="property">sticky</span> || <span class="number">0</span>)-(a.<span class="property">sticky</span> || <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> paginationDir = config.<span class="property">pagination_dir</span> ||<span class="string">&#x27;page&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> path = config.<span class="property">index_generator</span>.<span class="property">path</span> ||<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(config.<span class="property">index_generator</span>.<span class="property">exclude</span>)&#123;</span><br><span class="line">    posts.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> mark=<span class="literal">true</span>;</span><br><span class="line">      element.<span class="property">categories</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">categories</span>)&#123;</span><br><span class="line">        config.<span class="property">index_generator</span>.<span class="property">exclude_list</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">category</span>)&#123;</span><br><span class="line">          <span class="keyword">if</span>(categories.<span class="property">name</span> == category)&#123;</span><br><span class="line">            mark=<span class="literal">false</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span>(mark)&#123;</span><br><span class="line">        temp_posts.<span class="title function_">push</span>(element);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">pagination</span>(path, config.<span class="property">index_generator</span>.<span class="property">exclude</span>? <span class="attr">temp_posts</span>: posts, &#123;</span><br><span class="line">    <span class="attr">perPage</span>: config.<span class="property">index_generator</span>.<span class="property">per_page</span>,</span><br><span class="line">    <span class="attr">layout</span>: [<span class="string">&#x27;index&#x27;</span>,<span class="string">&#x27;archive&#x27;</span>],</span><br><span class="line">    <span class="attr">format</span>: paginationDir +<span class="string">&#x27;/%d/&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">__index</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Then add the category name to be excluded in the system configuration file <code>_config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="string">path:&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude_list:</span></span><br><span class="line">    <span class="string">-novel</span></span><br><span class="line">    <span class="string">-gossip</span></span><br></pre></td></tr></table></figure><p>At this point, basically the visual changes are almost the same</p><h3 id="Hurry-Must-be-fast"><a href="#Hurry-Must-be-fast" class="headerlink" title="Hurry! Must be fast"></a>Hurry! Must be fast</h3><p>Next, the part I modified is mainly to open up the speed. Since I chose such a concise theme, it would be shameful for the <code>Lighthouse</code> to run less than 100 points? Below are the running scores of <a href="https://www.igerm.ee/">My Homepage</a>, including desktop and mobile</p><p><img src="https://s2.loli.net/2022/12/30/51DyS6NCAGRMEib.png"></p><p><img src="https://s2.loli.net/2022/12/30/p9A5OTWf3Fnyus8.png"></p><p>How to do it, in fact, google has given a lot of suggestions, here I will only talk about some of my practices for the subject</p><h4 id="Save-all-static-files-in-CDN"><a href="#Save-all-static-files-in-CDN" class="headerlink" title="Save all static files in CDN"></a>Save all static files in CDN</h4><p>The method is also very simple, upload the theme directory to a public repository in <code>github</code>, and then publish a <code>release</code> version, so that the static files in your version will be cached in jsdelivr, and the method to call is also very simple</p><p><code>https://cdn.jsdelivr.net/gh/your username/your warehouse name@Release version number/source/iconfont/iconfont-min.css</code></p><h4 id="Load-the-js-file-asynchronously"><a href="#Load-the-js-file-asynchronously" class="headerlink" title="Load the js file asynchronously"></a>Load the js file asynchronously</h4><p>After having the CDN address, change all the resources in the theme to CDN, mainly in <code>/layout/_partial/header.ejs</code>, there are also a few scattered places, look at the <code>source/*</code> for yourself Files, what needs to be modified can be changed, and there will be corresponding prompts when <code>Lighthouse</code> runs. Remember to add the <code>async</code> keyword to all the loading of <code>js</code> files, <code>jquery.min</code> is here It is used for full-text search. It is not involved when loading. <code>jquery.fancybox.min-3.5.2</code> is used here for the purpose of clicking on the image to enlarge the article, and it does not involve the initial page rendering, so it doesn’t matter if you add it without worry. Let these <code>js</code> files hinder page rendering</p><h4 id="Compress-all-js-and-css-files"><a href="#Compress-all-js-and-css-files" class="headerlink" title="Compress all js and css files"></a>Compress all js and css files</h4><p>This is a standard action. Search for css compression directly. There will be many online compression sites. Copy the file and click on the compression, then create a file of <code>XX-min.js</code> and save it.</p><p>So far, after a toss, my page desktop simulation is 100 points, and the mobile terminal simulation is 99 points. Of course, there is room for improvement, but I have the opportunity to toss again in the future.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Lighthouse </tag>
            
            <tag> CDN </tag>
            
            <tag> Jsdelivr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Use Hexo, GitHub Page, Typora to write articles</title>
      <link href="/en/experience/Use-Hexo-GitHub-Page-Typora-to-write-articles/"/>
      <url>/en/experience/Use-Hexo-GitHub-Page-Typora-to-write-articles/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>I have previously shared an article  <a href="https://www.igerm.ee/en/experience/How-to-write-articles-with-Typora/">How to write articles with Typora</a></p><p>Also shared an article <a href="https://www.igerm.ee/en/experience/Recommend-a-set-of-high-value-family-buckets-based-on-content-publishing/">Recommend a set of high-value family buckets based on content publishing</a></p><p>Recently, due to the server requesting the public security filing, the access speed of overseas servers is too slow. Cloudflare’s IP is now almost blocked. I was forced to plan to use Hexo+Github Page to build a set of blogs. After two days, it feels good to use, and it may be possible in the future. Become a content platform that I use for a long time.</p><h2 id="Hexo-installation"><a href="#Hexo-installation" class="headerlink" title="Hexo installation"></a>Hexo installation</h2><h3 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h3><p><strong>1. Install the latest version of node</strong></p><p>Generally programmers will install it, if not, install it yourself, and remember to add a domestic mirror source</p><p><code>npm config set registry https://registry.npm.taobao.org</code></p><p><strong>2. Install Git</strong></p><p>General programmers will also install it, but recently due to well-known reasons, it is necessary to hang an agent</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy<span class="string">&#x27;socks5://127.0.0.1:7890&#x27;</span></span><br><span class="line">git config --global https.proxy<span class="string">&#x27;socks5://127.0.0.1:7890&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>3. Register GitHub account</strong></p><p>General programmers will also have them. Open <a href="https://github.com/">Github official website</a>, create a new warehouse, enter your own project name, and be sure to add the suffix <code>.github.io</code> afterwards, and also check the README initialization on. *<em>The name must be exactly the same as your github name. For example, if your github name is <code>abc</code>, then the warehouse name must be <code>abc.github.io</code></em> Just leave the Description empty, remember to select public</p><p><strong>4. Create GitHub Pages</strong></p><p>After the project is built, click on <code>Settings</code>, scroll down until there is a <code>GitHub Pages</code> at the end, click on <code>Choose a theme</code> to select a theme. After waiting for the page to be automatically generated by the system, go back to <code>GitHub Pages</code> and you can modify the custom domain name. Here we don’t do any operation, because we need to generate a CNAME file and we will create it in Hexo later, which is relatively simple.</p><p><strong>5. Change DNS resolution</strong></p><p>Add a CNAME record in the place of DNS resolution, point the domain name you want to your warehouse name (this is the reason why the project name is added with <code>.github.io</code>)</p><p><img src="https://s2.loli.net/2022/12/30/iEKQCrdebMvWsTa.png"></p><h3 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h3><p><strong>1. Installation Procedure</strong></p><p>Create a new folder in a suitable place to place my blog files. For example, because I have two computers, I use <code>iCloud</code> to synchronize with each other, so I put it in <code>/Users/xxx/Documents/blog </code>Inside the directory</p><p>After the directory is created, use the terminal to open the directory, and enter <code>npm i hexo-cli -g</code> to install Hexo in the directory</p><p>After installation, enter <code>hexo -v</code> to verify whether the installation is successful.</p><p><img src="https://s2.loli.net/2022/12/30/N1KHkBG48q2Lwnu.png"></p><p>Then we must initialize our website, enter the <code>hexo init</code> initialization folder, and then enter <code>npm install</code> to install the necessary components</p><p>This way the local website configuration is also set up, enter <code>hexo g</code> to generate a static web page, then enter <code>hexo s</code> to open the local server, and then open the browser to open <code>http://localhost:4000/</code>, you can see our Blog, press <code>ctrl+c</code> to close the local server and prepare to upload</p><p>The configuration of github should not be repeated. The only reminder is that now **you need to hang up the agent, you need to hang up the agent, you need to hang up the agent, **Don’t hold the psychology of fluke, otherwise you will want to die when you synchronize the blog</p><p><strong>2. Modify hexo configuration</strong></p><p>If you are not familiar with the situation, just remember to modify one place, and you will see the others. It should be noted here that you need to change the encoding of the <strong>file <code>_config.yml</code> to UTF-8</strong> to Avoid garbled Chinese titles</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: https://github.com/wellmoonloft/wellmoonloft.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><p>Pay attention to what you write in brach, and the source set in Github Pages should correspond to it. Set main to select main, and set master to select master. This doesn’t matter.</p><p><strong>3. Modify the article template</strong></p><p>Before starting to create a new article, it is best to change the article template, the location is in the <code>scaffolds</code> folder under the directory you choose, just change <code>post.md</code>, so that when you create a new article, it will automatically add one you want You don’t have to write each one manually</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line"><span class="section">categories: default</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p><strong>4. Create a new article and article migration</strong></p><p>First, install an extension <code>npm i hexo-deployer-git</code> in the blog root directory.</p><p>Then enter <code>hexo new post &quot;new article title&quot;</code> to create a new article.</p><p>Then open the directory of <code>/Users/xxx/Documents/blog/source/_posts</code>, you can find that there is an additional <code>new article title.md</code> file below, which is your article file, you can directly open it with Typora for article writing, You can also directly copy all your previous articles to this directory. <strong>But it should be noted that if you do not create a new article through the command, you need to manually add a header to each article, and you cannot directly enter it. You need to use the source code mode to copy, or open it with Sublime Text or Xcode to copy</strong></p><p><strong>Non-source code mode</strong></p><p><img src="https://s2.loli.net/2022/12/30/VKZwlqPanAbji6J.png"></p><p><strong>Source code mode</strong></p><p><img src="https://s2.loli.net/2022/12/30/b2VFQRw4qUHCWIz.png"></p><p><strong>5. Upload and synchronize blogs</strong></p><p>After writing the markdown file, enter <code>hexo g</code> in the blog directory to generate a static webpage, then enter <code>hexo s</code> to preview the effect locally, and finally enter <code>hexo d</code> to upload to github, then open your github.io homepage. Can see the effect</p><p><strong>6. Bind domain name</strong></p><p>After waiting for so long, DNS resolution should have taken effect. At this time, when you visit this domain name, you will find that you have reached the github page, but an error is reported because there is no link relationship. Now in the local blog <code>/source</code> directory, mine is <code>/Users/xxx/Documents/blog/source</code>, create a new <code>CNAME</code> file, and note that there is no suffix. Then write your domain name in it and save it. Finally, run <code>hexo g</code> and <code>hexo d</code> to upload to github, refresh a few times, you can see your blog page</p><p><img src="https://s2.loli.net/2022/12/30/mJiTdea4WovEzPA.png"></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Typora </tag>
            
            <tag> GitHub Pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Peerberry&#39;s investment platform from Eastern Europe</title>
      <link href="/en/experience/Peerberry&#39;s-investment-platform-from-Eastern-Europe/"/>
      <url>/en/experience/Peerberry&#39;s-investment-platform-from-Eastern-Europe/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Today I want to share a p2p investment platform that has been used for nearly two years. It promises an annualized return of more than 10%. In my experience, it is more than 11% per year. In addition, it also provides financial incentives. The activated investment will be 10,000&#x2F;255,000&#x2F;40,000 euros, which will add an additional 0.5%&#x2F;0.75%&#x2F;1% income bonus.</p><p><img src="https://s2.loli.net/2022/12/30/yr3MK6SqZRbaHzx.png" alt="image-20210320114938164"></p><p>Peerberry is a multi-lender P2P investment website located in Riga, Latvia. It was launched in 2017 and has been <strong>rapidly developed</strong> since then. Peerberry was originally owned by <a href="https://aventusgroup.com/">Aventus Group</a> and only provided its own loans on the website. Since then, the business has been acquired by a new set of shareholders, and new lenders have been added to the site. <a href="https://explorep2p.com/insights/">Here is an interview with his new CEO Arūnas Lekavičius</a>. In foreign countries, whether an investment platform is reliable depends on three main points: 1. Capital guarantee; 2. System regulations; 3. Investment team</p><p>The use of the Peerberry investment website is <strong>very simple to use</strong>. It has a function that allows investors to choose personal loans in major markets or use automated investment tools. **Currently there is no secondary market. **However, we don’t think this is a problem because most loans currently have a maturity date of only 1 month.</p><p>The automatic investment feature has all the usual options found on other sites. This includes the country, loan term, interest rate and loan originator. Peerberry provides investors with an email every week, which provides simple information about the interest earned, the principal received from the investor, the investment made, and the cash held on their behalf. The website has a good reporting function that allows investors to view all activities on their account within a selected period of time, and can generate tax forms.</p><p>Automatic investment is very convenient. I often communicate with their customer service to optimize the investment algorithm. At the same time, it includes the UI design and convenience of manual investment. Their quick feedback and fix will make me feel more at ease.</p><p><strong>Interest rate</strong> is usually around <strong>11-12%,</strong> but it can reach up to 15%. Most loans are short-term loans with <strong>repurchase guarantee</strong>. It mainly includes personal loans, daily loans, auto loans and development loans. Recently they have opened bridge loans, but the cycle is generally about 12 months, so I did not choose.</p><h2 id="I-like-the-point"><a href="#I-like-the-point" class="headerlink" title="I like the point"></a>I like the point</h2><ul><li>High interest rate-usually 11% to 12%, and the cycle is very short (I set the automatic investment from 5 days to 35 days, and the single amount does not exceed 300 euros, which can greatly avoid risks)</li><li>Design one of the best P2P websites. Simple, beautiful and practical design</li><li>Peerberry has recently started adding new lenders, which will provide diversified opportunities</li><li>Most loans have repurchase guarantees. <strong>If the loan is overdue for more than 60 days, the lender will repurchase the loan and pay the principal and interest</strong></li><li>The website is available in English, German and Spanish</li><li>Loans have performed well so far-not many loans have been repurchased due to default</li><li>The management team is willing to listen to feedback and provide good communication (almost every question will be answered within two days, including the use of feedback and overdue investment questions)</li></ul><p><img src="https://s2.loli.net/2022/12/30/lhVuxSHiD1PmRGY.png" alt="image-20210320115050566"></p><h2 id="question"><a href="#question" class="headerlink" title="question"></a>question</h2><ul><li>The website is very popular among investors, and most people will choose automatic investment, so if your automatic investment settings are too strict, there will be some funds that cannot be automatically invested, so keep logging in once every two weeks to check and compare Well, they have recently developed an app that can be used, which is more convenient, but maybe because they use some google code, if they are used in China, they have to climb the wall.</li><li>Some countries have higher risks, such as Moldova, Kazakhstan and Russia. I basically don’t vote in these countries</li></ul><h2 id="Risks-and-benefits"><a href="#Risks-and-benefits" class="headerlink" title="Risks and benefits"></a>Risks and benefits</h2><p>Since most loans on Peerberry come with repurchase guarantees, it is important to <strong>know</strong> the <strong>financial status</strong> of each lender. Peerberry has recently made great improvements in this area because it provides business updates for each loan originator and also shares other financial information.</p><p>The <strong>Aventus Group</strong> achieved a net profit of more than 12 million € in 2019. My suggestion is to allocate the investment as much as possible to the lenders of the Aventus Group operating in Poland, because I think the country’s <a href="https://explorep2p.com/country-risk/">risk</a> is lower than other countries (such as Kazakhstan) And Ukraine). Some of the Aventus Group lenders that appeared on Peerberry are very new and small. In most cases, these companies will benefit from collective guarantees, which makes their risk lower than in other cases.</p><p>Another major loan group is called <strong>GoFingo</strong>. It is a small loan group with a combination of new and established loan businesses. At the beginning of 2020, Peerberry announced that GoFingo had achieved a net profit of approximately 2 million euros in 2019.</p><p>What is the profitability of the Peerberry platform itself? CEO Arunas Levkavicius said that the company achieved meager profits in 2018 and 2019. He pointed out that the business has invested heavily in marketing, technology and staffing. Given that the platform is still in a relatively young stage, we think this is a good performance, and there is no need to worry about the feasibility of the platform as an enterprise.</p><p>In general, I think the <strong>interest rate</strong> provided is <strong>appropriate</strong>. Based on my own two-year experience, the annualized return has basically remained above 11%.</p><p><img src="https://s2.loli.net/2022/12/30/hkVitLyTwS1cNG9.png" alt="image-20210320114910847"></p><p>An epidemic has caused everyone to be anxious, and income after going to bed has become a hot topic. Imagine it. The minimum housing price in domestic first-tier cities is more than 5 million yuan, and the average rent of 5 million houses is 5,000 yuan a month, and the yield is only 1.2%. And if you put out 5 million for long-term investment, you can use 10% to calculate 500,000 per year. If you rent all of it, what kind of house can you live in? And if you work, can you earn 500,000 a year? So I always advise people around me that buying a house now is really…</p><p>If you want to invest and have Euros, <a href="https://peerberry.com/ref/AYUFAS/">then click here to get started</a></p><p><img src="https://s2.loli.net/2022/12/30/zYCZwmVahoPUIX4.png" alt="image-20210320120041015"></p><p>It should be noted that you will receive a bonus for registering investment through the link above. The bonus depends on the amount of investment in the first month, and I will also get the corresponding amount. If you don’t want to give me these bonuses, you can also click here <a href="https://peerberry.com/">register directly</a>.</p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> invest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The dilemma of commercial real estate</title>
      <link href="/en/experience/The-dilemma-of-commercial-real-estate/"/>
      <url>/en/experience/The-dilemma-of-commercial-real-estate/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><h2 id="Commercial-Real-Estate-and-Internet-Platform"><a href="#Commercial-Real-Estate-and-Internet-Platform" class="headerlink" title="Commercial Real Estate and Internet Platform"></a>Commercial Real Estate and Internet Platform</h2><p>It is not so much the plight of commercial real estate as the plight of the real economy.</p><p>This dilemma began when the industrial structure was fully tilted towards real estate, and it has become particularly difficult until the full-scale explosion of the Internet industry. The real economy has never been optimistic about the Internet, to embrace the Internet, and then to the saturation of online traffic. The time interval is getting shorter and shorter, leaving less and less time for the real economy to adapt and change.</p><p>Because I am in a large commercial real estate company, even if I did not get up to the actual business in the early morning, I began to study the informatization of commercial real estate in 2012 in a strict sense. Since that year, there have been two voices of commercial real estate doing APP and not doing APP. In the end, most companies are not optimistic about APP. The reason is very simple. In that era, the cost of developing and maintaining two APPs was real. It is too high, 2 million at every turn, 5 million to be able to make a look, even if the hybrid base appeared later, it did not fundamentally solve this problem.</p><p>On the other hand, the cost of online customer acquisition was very low at that time. WeChat just launched its official account in 2012. Some companies that smell the sweetness began to launch their own WeChat official account to serve as a bridge between shopping malls and customers. Tweets to increase member stickiness, the effect is very good. Operation with almost no cost has further eroded the motivation to make an independent APP.</p><p>With good days and good times, domestic commercial real estate exploded vigorously at the end of 2014. It seems that the first to third-tier cities have been spread overnight. There are more and more homogenized products, but in general, there are food for business. Companies of real estate practitioners are also rising. In terms of investment in informatization, do you mean informatization? What information does Lao Tzu want to make money with his eyes closed!</p><p>The days when the wind direction changed started in 2017. Commercial projects in various cities were gradually saturated, but there was no change in customer acquisition channels. Entity business relies on Internet platforms such as Dianping, Xiaohongshu, WeChat Official Account, etc. to play a lot of fun, especially the launch of WeChat Mini Programs in 2017, allowing commercial projects to obtain APP-like capabilities once again at almost zero cost. Therefore, using Internet platforms such as Dianping, Xiaohongshu, Douyin, Toutiao, and WeChat official account to attract traffic, and importing it into your own official account + mini program seems to be a standard practice overnight.</p><h2 id="Everything-has-changed"><a href="#Everything-has-changed" class="headerlink" title="Everything has changed"></a>Everything has changed</h2><p>It’s time for the harvest. People have tasted the benefits of the Ele.me subsidy, but they don’t know when the fees paid by physical stores to the platform and riders are not free. When the platform matures + user habits are formed, the cut will be cut. Directly killed the physical catering shops. The person who ordered the food did not find it inconvenient, and did not feel that the cost increased. However, there is a difference between the take-out and dine-in food provided by the store, which is the cost of the platform.</p><p>When the traffic can be directly monetized, Dianping, Xiaohongshu, Douyin, Toutiao, and WeChat official accounts all cut off the channel of online diversion. You can’t direct the traffic to yourself through the Internet platform now. You can only continue to pay the Internet company’s WeChat official account, H5 page or APP, and divert offline through SP activities. You do the SP activities + Internet platform costs all by you, but the traffic still flows into the public platform pool. You can’t resist, because you don’t have other direct channels to your customers, except SMS.</p><p><img src="https://s2.loli.net/2022/12/30/FXcoOjrdu9ELqNi.png" alt="image-20210218213539598"></p><center>Current situation</center><p>You have 100,000 followers on the WeChat public account, but you cannot reach them. On average, a person pays attention to more than 50 official accounts. Not everyone will read your message. Even if they read, the actual conversion rate is horribly low, except for non-stop SP activities.</p><p>**Even if you don’t do it, someone else will do it. People attracted through SP activities don’t have any loyalty to speak of. **</p><p>**he! Do not! Yes! you! of! meeting! member! **</p><p>In fact, I said that harvesting seems too cruel, and seems to be hostile to the Internet platform. In fact, it is not. This is the general trend. Whoever does it will do the same. Even if there is no WeChat, there will be Horizon and X letters.</p><h2 id="Private-domain-traffic-pool"><a href="#Private-domain-traffic-pool" class="headerlink" title="Private domain traffic pool"></a>Private domain traffic pool</h2><p>It is still the O2O model. In fact, the Internet platform was the first to propose the O2O concept. At that time, in order to attract physical businesses to use the Internet platform for offline diversion, it did play a big role for a long time. In that era where the cost of online drainage is low, and the traffic is free.</p><p>And we are now going to make a change in the O2O model. The online drainage platform still exists, but we need to replace it with our own private domain traffic pool. The cost of online customer acquisition cannot increase forever. It will change and stabilize according to market changes, and the cost we invest in is limited.</p><p>Taking 100% as an example, 80% of the cost is used for the drainage of the Internet platform, which is a pull new, and the remaining 20% ​​of the cost we have to invest in operating our own private domain traffic platform, which is a revitalization. And it is often this 20% that will create value for the entity business continuously.</p><p>Refer to the picture below, your customer acquisition channels include:</p><ol><li>Active channels: Internet platforms, store activities,</li><li>Passive channels: physical commercial brand effect and main store influence</li></ol><p>All channel traffic is imported into the offline scene, and then imported into your own online marketing APP through the method of sceneization + social marketing. This is your own private domain traffic pool. According to the 2&#x2F;8 principle, this part of users It accounts for 20% of your entire traffic, but it will create 80% of your profits.</p><p>And this process I gave it a name called Online To offline Closed-loop, or O2O CL, online and offline closed loop.</p><p><img src="https://s2.loli.net/2022/12/30/uHABD7hJnFmaoGP.png" alt="image-20210218214121770"></p><center>O2O CL</center><h2 id="Scene-marketing"><a href="#Scene-marketing" class="headerlink" title="Scene marketing"></a>Scene marketing</h2><p>Many people will start to complain when they see this. What you said is right and wrong. I certainly know that owning my own APP is the best thing. It is a big investment in the beginning but once and for all. Why didn’t we do it before? The old difficulties still exist!</p><ol><li>High R&amp;D costs</li><li>High operating costs</li><li>Difficult to install</li></ol><p>Here I want to avoid the above three problems first, let’s talk about scene marketing. In fact, the concept of scene marketing still comes from the Internet. What concept is it?</p><p>**Using media and other services that may appear around consumers at any time, according to the time (Time), place (Place), and environment (Occasion) of consumers, instant information, products or services are provided to meet different scenarios Under the immediate specific needs of different consumers. **</p><p>When scenario-based marketing is in progress, it is actually undergoing a dimensional transformation:</p><p>**When we grasp the needs of consumers from indicators such as age, gender, hobbies, region, income, etc., we focus on the consumers themselves, and when we grasp the needs of consumers through specific scenarios, we focus on It is an objective environment. It can also be said that we no longer care about consumers’ “who am I” on a large scale of time and space, but focus on “who am I” in a small specific scene. **</p><p>Limited by the difficulty of technical realization, we took the consumer’s experience journey as <strong>“demand-purchase-use”</strong> in three steps. Marketing is also facing the embarrassment of separation, and all efforts are basically concentrated on <strong>“ Let consumers realize that they have this need”</strong>, and <strong>“Remember my product and brand when they make a purchase on the channel next time”</strong>.</p><p>I believe everyone knows how effective it is. For example, CCTV’s 5 live broadcast nights of the Super Finals are definitely prime time. Among them, Ronaldo endorsed the anti-dandruff shampoo advertisement, you definitely have an impression, perhaps because of Ronaldo, because of the creative advertising, you can bear it. I haven’t changed the channel and I’ve watched a whole advertisement. Maybe in the next month, you will always see this shampoo advertisement on TV, outdoor, subway, magazines and other media. Has it touched you? ? You are chased by him and feel like you have nowhere to escape, but when you run out of shampoo and go to the supermarket, it may be several months later. Do you still remember it? After doing so much marketing effort, you may finally rely on that little impression in your heart, not to be confused by the packaging of the competing product, not attracted by the promotion of the competing product, and correctly picked up this bottle of shampoo and put it into the shopping cart.</p><p>Regardless of whether it is demand, purchase, or use, consumers have experienced too long, too many media, and too many locations and environments in this process, which makes every marketing effort full of randomness and difficult to continue. However, what’s more terrible is that most people are not willing to spend time and energy to understand a shampoo and communicate in non-demand scenarios. It may not only be the media budget that is wasted, but the marketers have racked their brains to figure it out. Strategic insight and creativity.</p><p>What will the Internet industry do? The realization of scene marketing through the rotten streets but definitely a future trend, big data, mobile devices, social networks, positioning systems and other technologies will change this dilemma in the mobile social era. I can give an example, consumption The hair comb (sensor) of the consumer will automatically identify and record the condition of the consumer’s hair and scalp (big data), and predict their growth status. Based on this, it is recommended that a more suitable shampoo for consumers is recommended. Consumers only need to spend time with this shampoo In the brand interaction (social media), click a confirmation, and the existing shampoo can be easily delivered to the home before the empty bottle (location system). In this process, the consumer gets the most suitable shampoo product in real time. He doesn’t have to do homework, he doesn’t have to worry about choosing, and he doesn’t have to worry about how long the shampoo will run out. The smooth experience even makes him unconscious. When one’s own needs exist, they have been satisfied, and the transaction has been completed. </p><h2 id="Entity-business-scenario-marketing"><a href="#Entity-business-scenario-marketing" class="headerlink" title="Entity business scenario marketing"></a>Entity business scenario marketing</h2><p>The above example of using the Internet illustrates the horror of scene marketing, which is that the transaction is completed when the consumer is most comfortable, comfortable, unresistible, and unconscious. **So what should be done in the context of physical business marketing?</p><p>In the era of mobile internet, the pleasant consumption experience brought by shopping scenes will be further enhanced. Traditional marketing based on activities has become increasingly difficult to touch consumers, while marketing based on scenes that brings actual value to consumers is the future. Suppose a consumer enters a physical business. She is not eager to buy the goods she needs, but searches for the goods she wants to buy in the mobile search box. Based on her location, the search results give her feedback Yes: In the entire physical business, all the stores that sell the items she wants to buy, their names, locations, and prices. She can also sort by sales volume, price, discount strength, etc. After completing the entire process, she can purchase with a targeted . how about it? Does the above beautiful scene experience make you feel awkward? In the era of mobile internet, the pleasant consumption experience brought about by the above-mentioned shopping scenes will be further enhanced, showing the power and future potential of scene-based marketing.</p><h3 id="1-Drive-experience-change-with-technological-innovation"><a href="#1-Drive-experience-change-with-technological-innovation" class="headerlink" title="1. Drive experience change with technological innovation"></a><strong>1. Drive experience change with technological innovation</strong></h3><p><strong>(1) Urban Outfitters</strong></p><p>The native app developed by the American cheap clothing brand Urban Outfitters is called Urban On (UO). The app will provide users with a lot of personalized services. Users will be encouraged to share their clothing photos with friends. If the sharing is successful, users will get a certain discount. There is also a photo booth for selfies outside the fitting room. Users can also listen to UO radio while shopping. The latest version of the application has updated the product page, and users can see clearer product images and related product information.</p><p><strong>(2) Rebecca Minkoff</strong></p><p>Rebecca Minkoff (Rebecca Minkoff) bag store and eBay launched an interactive fitting room. Smart mirrors are installed in the fitting room and exhibition hall. Users can click on the mirror to browse products, query product information and place orders. In the fitting room, the user can adjust the indoor light and click on the screen to view the effect of the fitting, instead of holding a pile of clothes into the dressing room; each piece of clothing has an RFID tag, and the user can quickly check whether there is still stock, and click on the desired size After the colors are matched, a staff member will send them to the fitting room. These smart mirrors can also identify customers through the connection software, know what they bought, their consumption history, and what kind of consumption preferences they have. The clerk can use these data to provide customers with better personalized services.</p><p><strong>(3) Marc Jacobs</strong></p><p>Luxury brand Marc Jacobs launched an event, as long as users post tweets with the hashtag #MJDaisyChain, they can receive a gift in its newly opened Daisy Perfume pop-up store. If it is accompanied by in-store photos, there will be even greater gifts. Every day the best creative content will receive a free Marc Jacobs handbag, which greatly improves the brand’s influence.</p><h3 id="2-don’t-do-marketing-but-care"><a href="#2-don’t-do-marketing-but-care" class="headerlink" title="2, don’t do marketing, but care"></a><strong>2, don’t do marketing, but care</strong></h3><p><strong>(1) Really solve the problems and pain points of users, and form a benign value exchange with users</strong></p><p>When consumers have learned to recognize and avoid advertisements, traditional advertising persuasive marketing methods become increasingly unworkable. Consumers need products and services that can truly provide them with value. Only scenario-based marketing based on solving current problems for users can form a virtuous circle between users and brands: brands provide users with the information and services they need at the right time and place, which not only helps users, but also provides a better experience. And increase user stickiness. The user’s usage data further promotes the brand to accumulate and discover what users need, so as to provide better services.</p><p><strong>(2) Target consumers are no longer limited to the definition of static demographic attributes</strong></p><p>In traditional marketing practice, whether it is the target consumer of a brand is usually defined according to the demographic attributes of consumers. However, when considering the target audience of the product from the demand scenario, more potential users can be unexpectedly obtained. For example, Auntie is an app for women’s menstrual management. Based on the needs of girls who want to be cared for by boys during special periods, software vendors have specially developed a male version of the Auntie software. When the girls’ menstrual period comes, the boys can greet the girls. , This software has already had 10% of male users last year.</p><h3 id="3-How-to-apply-scenario-marketing"><a href="#3-How-to-apply-scenario-marketing" class="headerlink" title="3. How to apply scenario marketing"></a><strong>3. How to apply scenario marketing</strong></h3><p>The scene marketing of the Internet platform is to use big data, mobile devices, social networks, positioning systems and other technologies to cover all aspects of users’ lives, covering the entire time and space. On the other hand, the scenario marketing of physical business is just the opposite. We have to cover the space and time of users.</p><ol><li>All scenario marketing and consumer interactions should be carried out around the expansion of private domain traffic and the enhancement of brand image and brand value</li><li>Five small events that cater to user habits and concerns may have a budget smaller than a large event, but the benefits may be better</li><li>To build an APP that can support AR and VR scenarios, can reach users directly, and can do internal social cycles</li><li>It is necessary to establish a big data platform such as consumption path and consumption behavior, and continuously activate services for consumers in its own territory</li></ol><h2 id="answer-the-questions"><a href="#answer-the-questions" class="headerlink" title="answer the questions"></a>answer the questions</h2><p>Now let us return to the three questions above:</p><ol><li><p>High R&amp;D costs</p><p>With the emergence of platforms such as flutter, the development and maintenance of multi-terminal applications has become possible, and the cost of the background is actually the same as that of small programs. In general, the current cost of simply developing a marketing APP is not much higher than that of the mini program version. The current high part is to cater to the scene marketing for AR or VR technology investment, and these are mini programs or H5 can’t do it. To the thing.</p></li><li><p>High operating costs</p><p>We really can’t spend large sums of money like before 2018, but with the advancement of technology, especially the emergence of big data and crawling technology, we can carry out small activities more accurately. At the same time, the emergence of paying members allows operators to more accurately grasp the whereabouts of activity funds. It is the 20% of paying members who are the main force of profit.</p></li><li><p>Difficult to install</p><p>The difficulty of installation is always a paradox. Aunts and grandpas in third-tier cities can sit in the training classroom for two eggs for a morning. WeChat Moments forwarded a bunch of them. Why? User pain points. As long as the user’s pain points are grasped, this problem is not a problem. So what are the user pain points of physical business? In other words, what channels and activities do we need to attract users to install?</p><p>You can add my WeChat to communicate.</p><p>You see, I saw that the friends here were divided into two groups, 80% of them directly turned off the webpage, and thought this silly X goodbye!</p><p>The other 20% will ask, why can’t I find the WeChat ID? We just want to catch these 20% of people!</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Commercial estate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Daughter&#39;s father</title>
      <link href="/en/novel/Father-and-child/Daughter&#39;s-father/"/>
      <url>/en/novel/Father-and-child/Daughter&#39;s-father/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>He always hides in his room and smokes<br>Don’t let me in<br>But I always feel that his room has a kind of taste<br>I like the taste<br>Of course it is obviously not fragrant</p><p>So I opened the door again and again<br>Smiled and walked in<br>Very likely he will let me out<br>But after a few attempts, he will<br>Tolerate me staying beside</p><p>Every time i will<br>Be careful to keep quiet<br>So I can stay longer<br>But more often<br>I hope he can look at me<br>So deliberately made some sounds<br>Of course, the result of this is that I am going out again</p><p>I told to my friend said<br>I have a dress of night Loli<br>No where you can buy<br>I will wear it for you</p><p>but I know<br>He won’t do it for me<br>And this dress is really no where can buy<br>So I had to learn to do it myself</p><p>One month later<br>He told me<br>Let me do it for you</p><p>Then something magical happened<br>He actually knows how to make clothes<br>Isn’t it only a girl can do this?</p><p>He doesn’t seem to be proficient<br>But the dress are done<br>But he keeps saying it’s not good<br>But I think it looks pretty</p><p>He is angry<br>He wants to dismantle the dress<br>I anxiously told him to stop<br>I think this is good</p><p>What did he realize<br>Then explain to me<br>Hope to do it again<br>I don’t think it is necessary<br>Just yell him you give it to me</p><p>I can see that he is very upset<br>He shut himself into the room again<br>I looked at the familiar blue door<br>And the dress on my hand</p><p>I feel very happy<br>I hope to be so happy all my life</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Father and child </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>My daughter</title>
      <link href="/en/novel/Father-and-child/My-daughter/"/>
      <url>/en/novel/Father-and-child/My-daughter/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>She always likes<br>Make a mess at home</p><p>Recently she started learning to use scissors<br>Then I need to be very careful<br>On the sofa, on the carpet, on the bed<br>May not know when<br>You will bleed if you sit down</p><p>She started making clothes in cartoons<br>Then I have to learn different knowledge<br>I studied for a whole month before I dared to do it<br>But still ruined that night loli dress</p><p>I want to understand the drape of clothes<br>The thin clothes spin blindly in my hands<br>Which direction is the zipper<br>Simply more confused than a three-dimensional array</p><p>At last<br>Something ugly appeared in front of me<br>She shouted<br>stop<br>give me back</p><p>So i explain to her<br>Carefully like him once<br>She still yells<br>Then left angrily</p><p>But the good thing is<br>Go home the next day<br>She still hugs me happily<br>Then say<br>do not worry<br>this is not your fault</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Father and child </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>My father</title>
      <link href="/en/novel/Father-and-child/My-father/"/>
      <url>/en/novel/Father-and-child/My-father/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>He comes home late every day<br>Under the dim light<br>I opened my eyes<br>Watching him look tired</p><p>Fixed days of the month<br>He will bring me an American fried chicken<br>It was “festival day”</p><p>Later we moved<br>The time he goes home becomes very fixed<br>Noon every day<br>He will ride home</p><p>Bring me a bag of buns<br>Then<br>I ate buns for two semesters<br>Caused me to vomit when I smell steamed buns</p><p>Then i will say<br>I take it back to my room to eat<br>Wait for him to go<br>Sneak downstairs and throw it away</p><p>For a period of time<br>He is very irritable<br>I’ll be blamed for not being able to sleep<br>I will blame me if I miss the car<br>I went to the park on the weekend and it rained<br>Will blame me too</p><p>Three years later<br>He started to business trip<br>Not high frequency<br>Just each time lasts four years</p><p>Actually experienced<br>Don’t think there is anything<br>But always feel<br>He seems pretty good to blame me by his side</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Father and child </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Wake</title>
      <link href="/en/novel/Love-in-dreams/Wake/"/>
      <url>/en/novel/Love-in-dreams/Wake/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>He took off his glasses in surprise<br>There is a strange woman in front of me<br>He immediately let go of the channel and apologize</p><p>The woman smiled<br>Say this is part of the script<br>And handed him a kraft paper bag</p><p>After opening it is an English contract<br>More than 20 pages densely packed</p><p>The end of the contract is 2030<br>Or the digital immortality technology has been perfected</p><p>Party A is the familiar name<br>The content of the contract is that Party B needs to follow the script during the contract period<br>Try to contact him in various ways<br>Let him think she is still alive</p><p>He recalled the email and WeChat received<br>Understand in an instant<br>He asked the woman<br>So her car accident</p><p>Correct<br>Woman said<br>The car accident is real<br>The contract was signed before she left</p><p>Please put on your glasses and tell her<br>I’ll go first</p><p>He put on his glasses again<br>She appeared in front of her again<br>tell him<br>Walk with me</p><p>He quickly followed<br>Just like before<br>Listen to her chattering<br>Until you can’t see the road<br>But I can see her clearly</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Love in dreams </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Dreams</title>
      <link href="/en/novel/Love-in-dreams/Dreams/"/>
      <url>/en/novel/Love-in-dreams/Dreams/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>He suddenly received a courier<br>After opening it is a pair of AR glasses, a pair of Bluetooth headsets and a note<br>Please put on your glasses and earphones after arriving at 21 Zhangzizhong Road at 3 o’clock in the afternoon on April 15</p><p>He got there 5 minutes early<br>He knows where this is<br>Also know who sent him the courier<br>It’s just that this place is no longer a foreign trade shop<br>Door lock<br>No one has been here for a long time</p><p>He puts on glasses and earphones<br>Something magical happened<br>The old door disappeared<br>It is the familiar foreign trade shop</p><p>Heard a familiar voice in ears<br>Boss, your clothes are too expensive<br>I want this, this, and this one<br>It is ok,  total of 80 yuan </p><p>The familiar she turned around and called him<br>Don’t be stunned<br>Come and pay</p><p>He went forward subconsciously<br>In front of her, she smiled and walked towards him<br>Very close<br>If it’s not the weight from the glasses<br>He can’t tell if it’s real or virtual</p><p>She told him<br>Hug me okay<br>He stretched out his hands<br>Really hugged her</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Love in dreams </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Recommend a set of high-value family buckets based on content publishing</title>
      <link href="/en/experience/Recommend-a-set-of-high-value-family-buckets-based-on-content-publishing/"/>
      <url>/en/experience/Recommend-a-set-of-high-value-family-buckets-based-on-content-publishing/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><h2 id="Wedge"><a href="#Wedge" class="headerlink" title="Wedge"></a>Wedge</h2><p>Last year, because of work, I needed to pick up the code again. However, it is not to develop an enterprise-level management system, but a <strong>customer-oriented content publishing platform</strong>, which is used to <strong>patch together 1&#x2F;50</strong> of my full set of pan-member framework. At present, the core business has been released to the outside world, so this picture Finally, there is no need to keep it secret.</p><p><img src="https://s2.loli.net/2022/12/30/7ghr4xc96PpijBZ.png"></p><p>After waiting for this picture in the second half of the year, I can find an opportunity to write an article in detail. Back to the topic, because it is a customer-oriented system, the appearance is the first. I have been searching for a long time, and I have tried many open source frameworks and some Cloud storage platforms are listed below. <strong>It should be noted that</strong>, maybe the original purpose of these open source products is not the purpose of my application**, and the positioning in my **combined framework may be somewhat biased :</p><h2 id="Mini-Program-UI-Library"><a href="#Mini-Program-UI-Library" class="headerlink" title="Mini Program UI Library:"></a>Mini Program UI Library:</h2><ul><li><p><a href="https://github.com/Tencent/weui-wxss">WeUI</a> is a small program version of WeUI, Tencent’s official UI component library. It provides a user experience consistent with the WeChat interface style. It is also the most like WeChat among many UIs. That one</p><p>GitHub address: <a href="https://github.com/Tencent/weui-wxss">https://github.com/Tencent/weui-wxss</a></p><p><img src="https://s2.loli.net/2022/12/30/VxTi5RvFB83uCUf.png"></p></li><li><p><a href="https://github.com/TalkingData/iview-weapp">iView</a> is a high-quality Vue.js component library released by TalkingData, and iView weapp is their small program version.</p><p>GitHub address: <a href="https://github.com/TalkingData/iview-weapp">https://github.com/TalkingData/iview-weapp</a></p><p><img src="https://s2.loli.net/2022/12/30/RZNyVEl8funiMXQ.png"></p></li><li><p><a href="https://github.com/meili/minui">MinUI</a> is a set of concise, easy-to-use, and efficient component library developed by the front-end development team of Mogujie based on the custom component features of WeChat applets, applicable It has a wide range of scenarios, covering the native framework of small programs, mainstream frameworks of various small program components, etc., and provides special command-line tools.</p><p>GitHub address: <a href="https://github.com/meili/minui">https://github.com/meili/minui</a></p><p><img src="https://s2.loli.net/2022/12/30/Q5HgPzIxVApoEsN.png"></p></li><li><p><a href="https://github.com/weilanwl/ColorUI">ColorUI</a>** is a UI component library of Css class, not a Js framework. Compared with similar small program component libraries, ColorUI pays more attention to visual interaction! **</p><p>GitHub address: <a href="https://github.com/weilanwl/ColorUI">https://github.com/weilanwl/ColorUI</a></p></li></ul><p><img src="https://s2.loli.net/2022/12/30/aXKRuvrk7o5chyd.png"></p><p><strong>Finally, I chose to use ColorUI mainly in two aspects:</strong></p><ol><li><p>The appearance of ColorUI is very high, you can take a look at this picture I made with Mock</p><p><img src="https://s2.loli.net/2022/12/30/sXgqRAwIMloChvj.png"></p></li><li><p>ColorUI <strong>uses the traditional css reference</strong>, which avoids the above UI component injection and saves code space to a large extent. It is important to know that the package size of the applet is limited to 4M, and there are many in the recent group. People are persuading the author to encapsulate components. What I want to say is that you still have to keep your original intention. The first UI you made was for small programs. There is no need to encapsulate. If you want to adapt to uni-app, just change a parameter. , There is no need to package components.</p></li></ol><h2 id="Content-Management-System"><a href="#Content-Management-System" class="headerlink" title="Content Management System:"></a>Content Management System:</h2><ul><li><p><a href="https://github.com/ruibaby/halo">Halo</a> is a light, concise, and powerful blog system developed using Java and built by Spring Boot. In fact, the main reason for choosing it is not that he uses standard Spring Boot , But the following two aspects:</p><ol><li>Well, it’s because of the appearance.</li><li>At the same time, its module split is relatively reasonable, and it may also be relatively clear. It is a blog application, so the deployment is simple, because for application integration, introducing an open source system is direct application plus light development, and it will be finished after development. Just throw the docker image directly on the host and start it, which is convenient and fast.</li></ol><p>GitHub address: <a href="https://github.com/ruibaby/halo">https://github.com/ruibaby/halo</a></p><p><img src="https://s2.loli.net/2022/12/30/QcyBidP8rGMva43.png"></p><p>Of course, Halo still has its own problems, **Api is too few! ! ! ! **, there are only three interfaces at present, one to get all articles, one to get comments, and the other to get tag categories, <strong>but not to get articles under tag categories</strong>, actually adding an Api is very simple,<strong>And looking at the service in the source code, there is already a method to find articles based on tags</strong>, but I don’t know why the author has not thrown out the Api. I guess the author’s psychology may only want to be a blog application, and I don’t want to turn Halo into content. Management platform?</p></li></ul><p>-<a href="https://gitee.com/fuhai/jpress">JPress</a> is a WordPress-like product, developed in Java, and relies on <a href="https://gitee.com/jfinal/jfinal">JFinal</a> and <a href="https://gitee.com/fuhai/jboot">Jboot</a>.</p><blockquote><p>Here is a digression. In the open source world, JFinal should not need to be introduced too much. <strong>Who doesn’t know JFinal is embarrassed to say that it is mixed in the open source circle</strong>. JFinal is an extremely fast WEB + ORM framework based on the Java language, and its core design The goal is rapid development, less code, simple learning, powerful, lightweight, easy to extend, and Restful. While having all the advantages of the Java language, it also has the development efficiency of ruby, python and other dynamic languages! Especially the emergence of jfinal-undertow, **directly affects some developers who have switched to IDEA to return to eclipse! **</p><p>Jboot is an open source distributed, commercial-grade microservice architecture, based on JFinal’s MVC, it should actually be introduced like this, <strong>JFinal+jboot’s competitors are Spring Boot + Spring Cloud</strong>, of course, in the current body The quantity can be said to be the ants swallowing the elephant, but in the future, who knows, as a human being, there must always be ideals.</p></blockquote><p>  Gitee address: <a href="https://gitee.com/fuhai/jpress">https://gitee.com/fuhai/jpress</a></p><p>  <strong>You will see that I have no direct comments on the UI part above, if there is no choice, but I have said a lot here, because Jpress is really a very good open source framework:</strong></p><ol><li>Inherit the lightweight of JFinal, with very little basic code, easy to understand and secondary development</li><li>The most basic background management has been written, and various localized services such as cloud storage, WeChat official account, Tencent mailbox, and Alibaba Cloud SMS have been connected.</li><li>Modularization is very good. It is relatively easy to add new modules. Through the basic modules, it can be changed into a variety of web applications such as blogs, forums, Q&amp;A, shopping malls, etc.</li></ol><p>  <strong>Having said so many advantages, why do I give up using it? There are two main points:</strong></p><ol><li><p>The mirror version on the docker hub is too low, it is still 1.05 (just went up to see, and finally updated), so I can only download the source code to package the latest version, which brings the second problem</p><p><img src="https://s2.loli.net/2022/12/30/vrxEUb5XBPod4Lq.png"></p></li><li><p>The author doesn’t know for what purpose, maybe it is for the ultimate split service? ** Split JPress into a lot of modules, about a dozen, and at the same time reference a lot of maven libraries, which directly caused my local maven library to become 1.95G, I want to say that the concept of microservices is service splitting In this part, the granularity is still controversial. Articles|pages|attachments|users|WeChat|templates|systems, these applications are disassembled into more than a dozen modules, which may be a bit too detailed.</p><p><strong>Of course I believe this is a process. In any case, Jpress is a very good open source platform, and is currently adjusting the positioning of the work, and the author’s update speed is still very fast. It can also be seen from the above tags size that the author should be aware of the jar package quoting problem and have fixed it. At the same time, I saw that the code generator was added to the latest version, but I don’t have time to study in depth for a short time. Maybe you can study it in depth when you do SNS applications in the later stage</strong></p></li></ol><h2 id="Cloud-storage"><a href="#Cloud-storage" class="headerlink" title="Cloud storage:"></a>Cloud storage:</h2><p>In fact, there is no good choice for cloud storage. Although Ali’s traffic is free, the storage space is charged monthly. The cost is not high, but it is charged. The CDN that took the cloud again is very good, but it charges. After Qiniu Cloud completes the real-name authentication, there is a 10G free space** that can be used. The download traffic is also free within 10G. The only thing that needs to be paid is the Https traffic. **Well, it looks like the thinking logic of an individual developer, not company behavior, tusk. **</p><h2 id="Start-assembly"><a href="#Start-assembly" class="headerlink" title="Start assembly"></a>Start assembly</h2><p>The system is selected, then the next step is to assemble, the assembly is very simple:</p><p><img src="https://s2.loli.net/2022/12/30/VW2yPTYmnG95dUR.png"></p><h3 id="Secondary-development-of-Halo"><a href="#Secondary-development-of-Halo" class="headerlink" title="Secondary development of Halo"></a>Secondary development of Halo</h3><p>First clone the latest Halo source code, and then throw out the API we need. This is mainly to query articles based on classification and tags. Add a method in <code>package cc.ryanc.halo.web.controller.api.ApiPostController;</code>: Find articles by article classification</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/categories/&#123;categorieName&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> JsonResult <span class="title function_">posts</span><span class="params">(<span class="meta">@PathVariable(value = &quot;categorieName&quot;)</span> String categorieName)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Page&lt;Post&gt; posts = postService.findPostByCategories(categoryService.findByCateName(categorieName));</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">null</span> == posts) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(HttpStatus.NO_CONTENT.value(), HttpStatus.NO_CONTENT.getReasonPhrase());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(HttpStatus.OK.value(), HttpStatus.OK.getReasonPhrase(), posts);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>It should be noted that the <code>findPostByCategories</code> method here needs to be passed in <code>Categories</code>, there is a written method <code>findByCateName</code> in categoryService, so it needs to be on the class <code>categoryService</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> CategoryService categoryService;</span><br></pre></td></tr></table></figure><p>OK, it’s that simple, then directly use the dockerfile in the source code to package it into an image and throw it on the server.</p><p>The author also integrated a docker-compose file very intimately, which can also be used, but I typed the command directly.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="number">-80</span><span class="string">:80</span></span><br><span class="line">      <span class="number">-443</span><span class="string">:443</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="string">-/etc/nginx/conf.d:/etc/nginx/conf.d</span></span><br><span class="line">      <span class="string">-/etc/nginx/vhost.d:/etc/nginx/vhost.d</span></span><br><span class="line">      <span class="string">-/usr/share/nginx/html:/usr/share/nginx/html</span></span><br><span class="line">      <span class="string">-/etc/nginx/certs:/etc/nginx/certs:ro</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">halo:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">ruibaby/halo</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">halo</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="number">-8090</span><span class="string">:8090</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="string">-VIRTUAL_PORT=8090</span></span><br><span class="line">      <span class="string">-VIRTUAL_HOST=localhost</span> <span class="comment"># Listening address (must be modified)</span></span><br><span class="line">      <span class="string">-LETSENCRYPT_HOST=localhost</span> <span class="comment"># The domain name of the certificate (must be modified)</span></span><br><span class="line">      <span class="string">-LETSENCRYPT_EMAIL=i@example.com</span> <span class="comment"># The certificate owner’s mailbox, which will be reminded when it is about to expire (must be modified)</span></span><br><span class="line">      <span class="string">-DB_USER=admin</span> <span class="comment"># h2 database user name, customized (must be modified)</span></span><br><span class="line">      <span class="string">-DB_PASSWORD=123456</span> <span class="comment"># h2 database password, customized (must be modified)</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="string">-~/halo:/root/halo</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">docker-gen:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">jwilder/docker-gen</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">docker-gen</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="string">-/var/run/docker.sock:/tmp/docker.sock:ro</span></span><br><span class="line">      <span class="string">-/etc/nginx/nginx.tmpl:/etc/docker-gen/templates/nginx.tmpl:ro</span></span><br><span class="line">    <span class="attr">volumes_from:</span></span><br><span class="line">      <span class="string">-nginx</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">/usr/local/bin/docker-gen</span> <span class="string">-notify-sighup</span> <span class="string">nginx</span> <span class="string">-watch</span> <span class="string">-wait</span> <span class="string">5s:30s</span></span><br><span class="line">      <span class="string">/etc/docker-gen/templates/nginx.tmpl</span> <span class="string">/etc/nginx/conf.d/default.conf</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">letsencrypt-nginx-proxy-companion:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">jrcs/letsencrypt-nginx-proxy-companion</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">letsencrypt-nginx-proxy-companion</span></span><br><span class="line">    <span class="attr">volumes_from:</span></span><br><span class="line">      <span class="string">-nginx</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="string">-/var/run/docker.sock:/var/run/docker.sock:ro</span></span><br><span class="line">      <span class="string">-/etc/nginx/certs:/etc/nginx/certs:rw</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="string">-NGINX_DOCKER_GEN_CONTAINER=docker-gen</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Configure-Halo-background-multimedia-files-to-be-saved-in-Qiniu-Cloud"><a href="#Configure-Halo-background-multimedia-files-to-be-saved-in-Qiniu-Cloud" class="headerlink" title="Configure Halo background multimedia files to be saved in Qiniu Cloud"></a>Configure Halo background multimedia files to be saved in Qiniu Cloud</h3><p>This operation is relatively simple. You can directly select it in the background settings-blog settings-attachment settings, and fill in the information corresponding to the application. <strong>Bucket</strong> is the name of your object storage space. At first, I was confused for a long time.</p><p><img src="https://s2.loli.net/2022/12/30/hgzsuybkAjvldWX.png"></p><h3 id="Use-ColorUI-to-develop-small-program-display-page"><a href="#Use-ColorUI-to-develop-small-program-display-page" class="headerlink" title="Use ColorUI to develop small program display page"></a>Use ColorUI to develop small program display page</h3><p>The usage of ColorUI is very simple, the Demo is in the source code, so although someone in the group has been calling for the author to write a document, I think it shouldn’t be necessary to write it except for a custom tabBar, right? The entire source code is in two folders <strong>template</strong> and <strong>demo</strong></p><p><img src="https://s2.loli.net/2022/12/30/XkTiNVMe3RrI2m4.png"></p><p><strong>How ​​to view the demo:</strong> First create an empty small program by yourself, delete all the files except <strong>project.config.json</strong> in the path, and then delete the demo folder except project.config.json Copy all the content in the applet path, just open the WeChat developer tool directly, all the implementations are in it, just copy the style you like.</p><p><strong>If you need to quote in an existing applet:</strong></p><ol><li>You need to copy the two files <strong>colorui.wxss</strong> and <strong>icon.wxss</strong> to the root directory of your mini program. If you enable cloud development, it is under <strong>miniprogram</strong></li></ol><p><img src="https://s2.loli.net/2022/12/30/v1w6pSEcU4MeTjR.png"></p><ol start="2"><li>Add references in <strong>app.wxss</strong></li></ol> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;icon.wxss&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;colorui.wxss&quot;</span>;</span><br><span class="line"></span><br><span class="line">view &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>Just copy which wxml you like, don’t care about the wxss in the page</strong></li></ol><h3 id="Description-of-custom-tabBar"><a href="#Description-of-custom-tabBar" class="headerlink" title="Description of custom tabBar"></a>Description of custom tabBar</h3><p>   What needs to be said is <strong>Custom tabBar</strong>. The author added a custom tabBar in version 2.0.5. However, the official WeChat official support for custom base library version is 2.5 or more, so setting a custom tabBar needs to be carefully considered. If you are sure to use it, then it is also divided into two steps:</p><p>   -First, you need to copy the <strong>custom-tab-bar folder</strong> in the <strong>demo</strong> package into the root directory of the applet, which is the same level directory as <strong>app.json</strong><br>   -Then add <strong>“custom”: true</strong> in the <strong>“tabBar”</strong> section of app.json</p><p>   The custom tarBar can be opened at this time, and subsequent tarBar maintenance and changes should be configured in the <strong>custom-tab-bar folder</strong>, not in the app.json, here is Amway, because By using a custom tarBar, our tarBar can achieve a transparent effect. At the same time, the icon can directly use font icons instead of 81px pictures. The demo still uses pictures. You can refer to the writing of the two files below.</p><p>   <code>index.js</code></p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">addGlobalClass</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">selected</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&quot;#808080&quot;</span>,</span><br><span class="line">    <span class="attr">selectedColor</span>: <span class="string">&quot;#FFFFFF&quot;</span>,</span><br><span class="line">    <span class="attr">backroundColor</span>: <span class="string">&quot;#000&quot;</span>,</span><br><span class="line">    <span class="attr">modalName</span>:<span class="literal">false</span>,</span><br><span class="line">    <span class="attr">list</span>: [&#123;</span><br><span class="line">      <span class="attr">pagePath</span>: <span class="string">&quot;/pages/index/index&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>:<span class="string">&quot;icon-repeal&quot;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&quot;communication&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&quot;/pages/halo/index&quot;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&quot;icon-comment&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Classroom&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&quot;/pages/translator/translator&quot;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&quot;icon-cart&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Translation&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&quot;/pages/walk/walk&quot;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&quot;icon-footprint&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Walk&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&quot;/pages/halo/index&quot;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&quot;icon-list&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Life&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">switchTab</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> url = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">path</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">      wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">        url</span><br><span class="line">      &#125;)</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">pageLifetimes</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>   <code>index.wxml</code></p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cu-bar tabbar bg-black shadow padding-tb-sm&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;action &#123;&#123;index == 2? &quot;add-action&quot;: &quot;&quot;&#125;&#125;&#x27;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">data-path</span>=<span class="string">&quot;&#123;&#123;item .pagePath&#125;&#125;&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;switchTab&quot;</span> <span class="attr">style</span>=<span class="string">&#x27;color: &#123;&#123;selected === index? selectedColor: color&#125;&#125;&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;index != 2&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&#x27;&#123;&#123;item.icon&#125;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;index == 2&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&#x27;cu-btn icon-order bg-bjfunred shadow&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    &#123;&#123;item.text&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Use-html2wxml-plugin-for-html-page-rendering"><a href="#Use-html2wxml-plugin-for-html-page-rendering" class="headerlink" title="Use html2wxml plugin for html page rendering"></a>Use html2wxml plugin for html page rendering</h3><p>Because we use a small program to display the content of the API article, the content passed is in html format. At this time, the html2wxml plug-in is needed to convert the html file to the wxml file format and present it, which can be searched directly in the background of the small program<a href="https://mp.weixin.qq.com/wxopen/pluginbasicprofile?action=intro&appid=wxa51b9c855ae38f3c"> html2wxml rich text component</a> and opened in the background of the mini program<br><img src="https://s2.loli.net/2022/12/30/aoubPVZ2OMHmUDs.png"></p><p>Make the plug-in declaration in app.json:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;htmltowxml&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wxa51b9c855ae38f3c&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Then register as follows in the json file of the required page:</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;htmltowxml&quot;</span><span class="punctuation">:</span> <span class="string">&quot;plugin://htmltowxml/view&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Finally, use it directly in the wxml file that needs the page, and inject the content of the html file into the tag:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;margin-lrji solid-top padding-top&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">htmltowxml</span> <span class="attr">text</span>=<span class="string">&quot;&#123;&#123;post.postContent&#125;&#125;&quot;</span> <span class="attr">highlightStyle</span>=<span class="string">&quot;&#123;&#123;style&#125;&#125;&quot;</span> <span class="attr">linenums</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span> <span class="attr">showLoading</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span> <span class="attr">bindWxmlTagATap</span>=<span class="string">&quot;wxmlTagATap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">htmltowxml</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Finally, take a look at the rendering effect:</p><p><img src="https://s2.loli.net/2022/12/30/74Mutmh8DJWdUaf.png"></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Applets </tag>
            
            <tag> ColorUI </tag>
            
            <tag> Halo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to write articles with Typora</title>
      <link href="/en/experience/How-to-write-articles-with-Typora/"/>
      <url>/en/experience/How-to-write-articles-with-Typora/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><h2 id="Wedge"><a href="#Wedge" class="headerlink" title="Wedge"></a>Wedge</h2><p>If you want to do your job well, you must first sharpen your tools. As a <strong>non-decent programmer</strong> who wants code, you must not use IDEA or Sublime IDEs. The ancient Evernote can also be discarded. , Long-term non-support of <strong>Markdown</strong> is estimated to have indeed lost a lot of users.</p><blockquote><p>Markdown is a markup language that can be written by a common text editor. Through simple markup syntax, it can make common text content have a certain format. The syntax format is very simple. Most people try all the syntax against the list for about ten times. You can get started in about a minute.</p></blockquote><p>As for why use Markdown to code text? It should be said that the most annoying thing about code text is format and typesetting. The average writer has to be distracted while writing, not to say that it cannot be done, but it is very inefficient.</p><p>As a person with obsessive-compulsive disorder, seeing this chaotic typesetting, you will definitely be distracted. For example, there are two empty lines here, and the spacing of this paragraph should be reduced. When you are satisfied, your inspiration has disappeared. .</p><p>While writing the content, adjusting the format at the same time, with one mind and two purposes. I am very distracted. I just want to focus on the content. What should I do? At this time, there are two choices: 1. Regardless of the form, write to a pile, and then uniformly adjust after writing; 2. Without affecting the writing, add a few simple marks to make the layout of the article you write clearer. And in the future, various formats needed for editing can be generated. The second method is the birth of Markdwon grammar.</p><h4 id="The-above-paragraph-can-be-written-like-this"><a href="#The-above-paragraph-can-be-written-like-this" class="headerlink" title="The above paragraph can be written like this"></a>The above paragraph can be written like this</h4><blockquote><p>While writing the content, adjusting the format at the same time, with one mind and two purposes. I am very distracted. I just want to focus on the content. What should I do?</p></blockquote><p>   <strong>There are two options at this time:</strong></p><p>-Regardless of the form, write to a pile, and then adjust it uniformly after writing;<br>-Without affecting the writing, by adding a few simple marks, the layout of the articles written by yourself can be made clearer, and various formats required by the editor can be generated in the future. The second method was born <strong>Markdwon</strong> grammar.</p><p>The format of the previous article was not born like this, but the need for paper printing. For example: a paragraph should have two characters blank, no blank lines between paragraphs, and direct quotations are all mixed in a paragraph. These are not for ease of reading, but for saving paper.</p><p>In the era of electronic reading, the space of the screen can be infinitely large when scrolling, but compared with paper, the screen hurts our eyes and makes us tired. Therefore, people need clearer typesetting, which is the meaning of Markdown.</p><p><img src="https://s2.loli.net/2022/12/30/8aXTjpzPOxLI4Nt.png"></p><p>##Typora</p><p>The choice is not entangled. Although there are many Markdown tools under Mac OS, there are only two that are easy to use. <a href="http://25.io/mou/">Mou</a> is the most useful and developed by Chinese, but Because it is very popular, the developers thought carefully, announced the new version in advance, and opened a wide range of pre-orders. After a round of money, there will be no more. Currently, the latest version of Mac OS is not supported.</p><p>Later, someone in the open source world really couldn’t see it. He developed a new open source App that imitated the function and UI of Mou, which is <a href="https://macdown.uranusjr.com/">MacDown</a>, but the technology may not be mature yet. The reason is that MacDown often hangs up for a period of time and requires a forced restart before it can be used again. This is fatal to the programmer. At this time, <a href="https://www.typora.io/">Typora</a> appeared. , It’s like someone driving a colorful auspicious cloud in the dark to save sentient beings.</p><p><strong>Typora</strong> has a very high appearance. Unlike the traditional Markdown editor, it does not preview while writing, but what you see is what you get. Check it out on its official website and you will be immediately attracted.</p><blockquote><p>By the way, Typora’s official website is also very good… Apple, that page is really worth seeing</p></blockquote><p>In addition to the basic functions of Mou, Typora also supports many other functions, such as generating directories, syntax shortcuts, etc. It is full of charging temperament, but it is now free!</p><p>Take a look at the code display that programmers value most. It supports a variety of mainstream code displays. The following is javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//By bypassing Tencent&#x27;s https mechanism through cloud functions, request the API of http</span></span><br><span class="line">wx.<span class="property">cloud</span>.<span class="title function_">callFunction</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&#x27;get_Parking_SpotCount&#x27;</span>,</span><br><span class="line">   <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">   <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> xx = res.<span class="property">result</span>.<span class="property">getParkingSpotCount</span></span><br><span class="line">      <span class="keyword">var</span> yy = xx.<span class="title function_">split</span>(<span class="string">&quot;:&quot;</span>)[<span class="number">2</span>]</span><br><span class="line">      <span class="comment">//console.log(yy.split(&quot;&#125;&quot;)[0])</span></span><br><span class="line">      that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">carnumber</span>: yy.<span class="title function_">split</span>(<span class="string">&quot;&#125;&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">   wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">fail</span>: <span class="variable language_">console</span>.<span class="property">error</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>The next step is to talk about the key points. When writing an article, especially when you need to publish the article to a blog, WeChat public account, short book, etc., you will encounter a problem, inserting pictures.</p><h4 id="Insert-picture"><a href="#Insert-picture" class="headerlink" title="Insert picture"></a>Insert picture</h4><p>What should we do if we usually need to insert articles?</p><ol><li>Get the link address of the picture directly from the Internet as your own picture link (in case the link changes, the picture will not be displayed)</li><li>The relative path of the direct local file (in case the blog needs to be shared, naturally others cannot see the picture)</li><li>Upload the picture through another platform first, and then copy the link address (the operation is more troublesome)</li><li>Of course, you can drag and drop files directly on the short book to the editing interface (but you need to save half of the writing, you always feel uneasy in the cloud)</li></ol><p><strong>The optimized solution is:</strong></p><ol><li>Use <strong>Typora</strong> for code text</li><li>Use <strong>Picture Bed</strong> to save pictures</li><li>Write the <strong>picture address</strong> on the picture bed into Typora</li><li>After the article is finished, directly <strong>copy and paste</strong> to the blog, WeChat official account, short book, etc.</li></ol><p>It sounds like the steps are very cumbersome, but rest assured, some people have thought of these, so they have developed a picture bed artifact, which can upload pictures through drag and drop, shortcut keys, etc., and supports Weibo, Qiniu, Youpai, and Alibaba Cloud. , Imgur, Flickr, Amazon S3 and other image beds, automatically save Markdown format links, giving you an unprecedented illustration experience.</p><h4 id="Re-optimized-solution"><a href="#Re-optimized-solution" class="headerlink" title="Re-optimized solution"></a>Re-optimized solution</h4><ol><li>Use <strong>Typora</strong> for code text</li><li>Copy the picture to the content</li><li>After the article is finished, copy and paste it directly to the blog, WeChat official account, short book, etc.</li></ol><p><img src="https://s2.loli.net/2022/12/30/M2reuAfkGpOgICW.png"></p><p>**For example, after setting it up, it only took three seconds to insert the picture above. How do I do it? **</p><ol><li><code>command + control shift + 4</code> screenshot</li><li><code>command + u </code>upload screenshots to Qiniuyun’s image bed</li><li><code>command + v</code> Paste the syntax commands of Markdown into the article, and you are done!</li></ol><h2 id="Qiniu-Cloud"><a href="#Qiniu-Cloud" class="headerlink" title="Qiniu Cloud"></a>Qiniu Cloud</h2><p>Speaking of Qiniu Cloud, it can be regarded as a model of industry conscience. In the early days, it started as a video streaming cloud service. When I was in Shenzhen, I almost cooperated for their streaming media service.</p><p>At present, Qiniu Cloud’s object storage and fusion CDN are free as long as they are personally authenticated. Object storage is free of 10GB, uploading unlimited data, CDN’s monthly free data of 10G, and other cloud products are free for limited time Trial, once again emphasized is the conscience of the industry.</p><p>PS: There is 20G of free space for enterprise certification, which can be used by companies with tight funds.</p><blockquote><p>Being able to reach the top ten in the cloud service industry, in addition to the technology leader, the vision and mind of the enterprise are more important, and those enterprises that are unable to take advantage of the disadvantages and stand still can only live under the protection of policies.</p></blockquote><p>OK, back to the topic.</p><ol><li>Register <a href="https://www.qiniu.com/">Qiniu Cloud</a> account</li><li>Perform personal real-name authentication, and use Alipay with personal authentication to submit quickly (Ali-a socially responsible technical man)</li><li>Create a new storage space</li><li>Assign a domain name that is integrated with CDN (if you don’t have a domain name, you can use a temporary domain name, which will be updated every 30 days, so it is recommended to apply for a domain name. If you don’t have your own domain name these days, it’s not embarrassing to say that you are a programmer. Ah, the domain name you registered in Alibaba Cloud can also be used, just need to perform CNAME resolution)</li></ol><p><img src="https://s2.loli.net/2022/12/30/k3IOaGeJqjtngWH.png"></p><h2 id="Picture-bed-tool"><a href="#Picture-bed-tool" class="headerlink" title="Picture bed tool"></a>Picture bed tool</h2><p>Once you have free cloud storage space, you can save your pictures. But if you click upload on the web page every time, and then copy the link to the article, it would be too troublesome, so at this time we need a tool that can automatically upload pictures to our Qiniu cloud storage, and Save the picture address in the clipboard to simplify our operations.</p><p>It is also the domestic product image bed artifact <a href="https://toolinbox.net/iPic/">IPic</a>. Regardless of screenshots or copying pictures, you can automatically upload and save the link in Markdown format, and paste and insert directly, just like The animation below, <strong>drag the image and paste it into the article</strong>, it’s that simple, of course, it also supports uploading the image in the clipboard. Just like the two images above, I only need to configure one upload The shortcut keys will do.</p><p><img src="https://s2.loli.net/2022/12/30/4EA6sBcYKIXqOuH.png"></p><p>but! Yes, but here comes, is such a useful tool free?</p><p>Of course not. If you are only for the image bed function, IPic uses Weibo image bed by default, which is a public image bed, and it is indeed usable. If you want to use your own private cloud storage, such as the one mentioned above Qiniu cloud storage, then you need to upgrade the paid version, 60 yuan a year.</p><p>It’s not expensive. As a supporter of open source developers, the money is indeed worth spending. The problem is that if it is a one-time buyout of 60 yuan, I think it is worth it. The annual fee is a bit unreasonable, and if you have two Macs , If one is at home and the other is in the company…you know that the hot indie game Taiwu Scroll on Steam is only 68 yuan for permanent use. The development cost of an independent game is of course not the same as that of a swift gadget. Language, but in any case, IPic is indeed the best of the current image bed tools on Mac OS.</p><p>The open source world is indeed a turbulent arena. Since some people think that your charges are unreasonable, then some people will jump out to challenge you. As for whether it is worth it or not, the world is in charge of things, [PicGo](<a href="https://github.com/Molunerfinn">https://github.com/Molunerfinn</a> &#x2F;PicGo&#x2F;releases) was born in this way. It was developed by a front-end technician who is not familiar with Swift. Therefore, PicGo is implemented using Electron-vue as a development scaffold, which perfectly replicates most of the functions of IPic. , But due to commercial reasons, one of the most convenient functions <strong>PicGo</strong> cannot be realized, that is, drag the picture directly into Typora, it will trigger <strong>IPic</strong> to upload automatically and then replace the picture address with the picture bed address. I believe this is the result of the communication between the IPic author and the Typora development team.</p><p>The flaws are not concealed, as the author of PicGo wrote in his blog:</p><blockquote><p>At present, PicGo is still a very young project. There are definitely a lot of bugs and lack of functions. So it needs to be continuously improved. I hope you can put forward any comments or suggestions in the process of using it in <a href="https://github.com/Molunerfinn/PicGo/issues">issues</a> in the project repository~</p></blockquote><h2 id="Upload-the-article-to-WeChat-official-account"><a href="#Upload-the-article-to-WeChat-official-account" class="headerlink" title="Upload the article to WeChat official account"></a>Upload the article to WeChat official account</h2><p>At present, the articles edited by Typora can be directly copied into MD and uploaded to the simple book and other places that support markdown syntax, but! The WeChat official account still does not support markdwon syntax. Fortunately, someone in the open source community has already completed this conversion tool, and it is more convenient to use:</p><p><a href="https://github.com/barretlee/online-markdown">Online-markdown</a> This is the source code of the online conversion tool authored by <a href="https://www.barretlee.com/entry/">little beard brother</a>, you can Clone it directly and use it after <code>npm install</code>, or you can directly visit <a href="http://md.barretlee.com/">online address</a> to use it. I recommend cloning to use it on this machine because there are many people who use it. Sometimes this webpage will get stuck. I encapsulated a Mac OS App with electron, which can be directly used by double-clicking it. It has been shared to <a href="https://pan.baidu.com/s/1XiknlCOIHzo-ok1GOUfeow">Baidu Netdisk</a>, password Yes: kjyh, welcome to download and use.</p><p><img src="https://s2.loli.net/2022/12/30/dIWfjDBwQP1nATr.png"></p><h2 id="to-sum-up"><a href="#to-sum-up" class="headerlink" title="to sum up"></a>to sum up</h2><p>Since 2014, I have always hoped to write something, but every time I turn over an earlier article, I retreat again. My personality is flawed and I am not persistent enough. Recently, there are too many trivial matters, but the code After the development is picked up, I can calm my mind during the development process, so I am very happy to pick up the technology, just like when I was in junior high school, I played the Legend of Jin Yong and the Legend of Sword and Fairy for the first time. Others may focus on the game. , But my gaze is in Heluo Studio.</p><p>What kind of great god can make such a game, and what is computer programming?</p><p>The times are advancing. When we were doing development, it only took two hours to configure a Java web development environment, plus the import of databases and jar packages.</p><p>Now, with Vue on the front end, Springboot on the back end, and template engine on the back end, various bases on the mobile end, as well as small program development SDKs and IDEs, development has become easier and easier, and you can concentrate on business implementation. Like code text, with Markdown syntax and this series of tools, life is really getting better and better.</p><p>It’s happier than many people. The technology I love can give me a bite of food, which is great.</p><p><strong>OK, finally summarize the tools I used:</strong></p><p>-<a href="https://www.typora.io/">Typora|The best Markdown editor for Mac OS currently</a><br>-<a href="https://www.qiniu.com/">Qiniu Cloud|The Unicorn of Free Cloud Storage</a><br>-<a href="https://toolinbox.net/iPic/">IPic|Currently the best image bed tool in the industry</a><br>-<a href="https://github.com/Molunerfinn/PicGo/releases">PicGo|The best free alternative to IPic</a></p>]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Beijing&#39;s snow</title>
      <link href="/en/novel/Love-in-dreams/Beijing&#39;s%20snow/"/>
      <url>/en/novel/Love-in-dreams/Beijing&#39;s%20snow/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Beijing has been a long time<br>It has not snowed</p><p>Can you imagine<br>More than 7 million couples in Beijing are experiencing<br>Valentine’s day without snow<br>Christmas without snow<br>New Year’s Eve without snow</p><p>Can’t help sorrow for them<br>These beautiful scenes<br>Will not stay in their memories</p><p>Can’t help being thankful for them<br>These beautiful scenes<br>Will not stay in their memories</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Love in dreams </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Alive</title>
      <link href="/en/novel/Love-in-dreams/Alive/"/>
      <url>/en/novel/Love-in-dreams/Alive/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Snow outside the window<br>She is sitting on the toilet<br>Constipation as always<br>Then send him a message</p><p>what are you doing?</p><p>Alive. . .<br>Let’s make a location sharing<br>Well, it seems to be a bit far away<br>Okay? More than 10,000 kilometers</p><p>Dreaming and dreaming last night was so hard, she wrote blankly<br>Dreaming of you, you came to see me and brought your wife, like Xiaoqian (read Xī), I don’t know why I work in a school.<br>It turned out to meet so calmly, you are like my old friend, I smile and listen to you.<br>She was white, thin, shoulder-length yellow hair, southerner, very polite, very likable girl.<br>The bell rang, I said I was going to class, and said goodbye in a hurry.<br>Later I found out that the ringtone was my alarm, and everything was a fantasy.</p><p>You can finally write a novel, he replied<br>Well, I often think of you recently<br>Me too, I kind of miss those days</p><p>Very far away, right?</p><p>She looked at the screen and smiled, turned her head and looked at the snow outside the window<br>It seems to have seen the half year ten years ago<br>Those pictures don’t seem to be my own experience<br>But the plot on TV</p><p>She rubbed her eyes</p><p>Then you continue to live well, she can’t see the screen clearly after saying this<br>Ok<br>I did not go to your wedding. If there is a funeral in the future, remember to ask my family to invite me. There are some word, I still want to tell you in person<br>Um i got it</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Love in dreams </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Milk powder</title>
      <link href="/en/novel/Love-in-dreams/Milk-powder/"/>
      <url>/en/novel/Love-in-dreams/Milk-powder/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>There is a shop on Old Gulou Street<br>Called milk powder<br>It’s a dessert shop</p><p>2007<br>He and her often go<br>At that time, the store put a lot of pens on the table<br>So that customers can write on the wall</p><p>They wrote a lot<br>Also read a lot of other people’s writing</p><p>Half a year later<br>When they go again<br>The milk powder has been redecorated<br>There are no words on the wall<br>At that time he smiled and told her<br>look<br>What’s the use of writing</p><p>The store said<br>We will take pictures of the wall before we renovate<br>For the convenience of friends<br>Come back to find the memories of the past</p><p>He ridicule<br>Who will come to find memory<br>Don’t look for those who didn’t break up<br>Won’t come after a breakup</p><p>Some day after 10 years<br>He called to milk powder<br>Ask if you have any photos from 10 years ago</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Love in dreams </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>On the way</title>
      <link href="/en/essay/On-the-way/"/>
      <url>/en/essay/On-the-way/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><h2 id="on-the-way"><a href="#on-the-way" class="headerlink" title="on the way"></a>on the way</h2><p><img src="https://s2.loli.net/2022/12/30/Z1XLbJ3OQDYUl2y.png"></p><blockquote><p>I really enjoy putting all my belongings in the car and moving, and I feel free and carefree.</p></blockquote><p>I have traveled many times in Beijing, Hong Kong and Macao. Every time, from day to night, from scorching heat to severe winter, there are many fascinating points of long-distance high-speed. Every time I pass the brush, I will have a different experience. This brush itself has a special mood, so The experience is even more different.</p><p>Sometimes you will find that some cars are speeding, overloading, merging chaotically, taking emergency passages, driving high beams, especially unruly. Generally, such cars are divided into two categories, one is a foreign car, and you will leave after the gun. One is the local car, the relationship is harder than the rules.</p><p>Sometimes you are in a hurry, but the high speed is usually two-lane. Once there is a large truck in front of overtaking, there will be a long string of traffic. You have to slow down and wait for him to go before you go. It’s very helpless, but It can only be accepted.</p><p>Sometimes you are highly concentrated and shuttle between two lanes, and finally you find that the one who walks in the same lane honestly is still in front of you.</p><p>Sometimes you will find cars all over the world, so irritable that you want to set up a bazooka to blow up all the cars around you.</p><p>Sometimes you will find that there is no car around, especially from 2 am to 5 am. You will be very happy at first, but gradually you will feel fear, fear, and worry until there is a idiot behind you. With the high beam getting closer and closer, you realize that you are still alive, so you will be pleased and happy to see him, and then you will wait for him to pass, and then turn on the high beam to chase him, fun.</p><p>Sometimes you will compete with the same car to see who drove more elegantly, and then he will leave you in the middle, honking the whistle to say goodbye.</p><p>Sometimes a car on the same road will squeeze you into a dead end for petty gain. You are so annoyed that you can kill him, but after a turn, you still go around and find that he has broken down in the middle of the road.</p><p>Sometimes you will find that most of the cars with far-reaching goals will be more calm, and will be more humble when encountering problems, and will not compete for immediate success or failure.</p><p>Sometimes people who get off the road may be farther than your destination. They just don’t follow you anymore.</p><p>Sometimes new vehicles will come in, some are just on the road, and some are cars with stories. Whether they leave or just arrived, they have their own stories. Whether they stop or go, they are all independent There is no sense of good or bad in your life.</p><p>Sometimes leaving is the beginning.</p><h2 id="The-flag-waver-on-Junshan-Bridge"><a href="#The-flag-waver-on-Junshan-Bridge" class="headerlink" title="The flag waver on Junshan Bridge"></a>The flag waver on Junshan Bridge</h2><p><img src="https://s2.loli.net/2022/12/30/FU1yP6hiQO5zdXv.png"></p><p>Passing by the Junshan Bridge, construction is underway on the bridge. In order to avoid passing vehicles that are too fast to merge, an uncle stood at the head of the bridge and waved the flag. The flag was 3 meters high, red and very bright; the flagpole was pure wood and very heavy; the bridge was windy and very strong. It was cold, his face flushed, his arms swayed hard, his eyes were blurred and his nose was running wild. He just stood there all the time, waving the flag.</p>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Impressions of Hangzhou</title>
      <link href="/en/essay/Impressions-of-Hangzhou/"/>
      <url>/en/essay/Impressions-of-Hangzhou/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p><img src="https://s2.loli.net/2022/12/30/V4UBftphrNyaHx2.jpg"></p><p>I have many opportunities to come to Hangzhou<br>But I have been reluctant to come<br>Because I’m afraid of being obsessed with her<br>So that you can’t live in other cities</p><p>It’s like if your first RPG game is Legend of Sword and Fairy<br>Your first online game is World of Warcraft<br>Then you will be tasteless when you play other games…</p><p>If not for this business trip<br>I don’t think I will come here in my life<br>I’m afraid it will ruin her impression in my heart<br>I’m even more afraid that I can’t live without her</p><p>Fortunately<br>She didn’t disappoint me at all<br>Unfortunately<br>I fell in love with her all of a sudden</p><p>Hangzhou<br>I agree with it everywhere<br>Culture, food, humanities<br>And that fascinating landscape</p><p>Let alone the well-known West Lake<br>Walk a random street in the old town<br>Even if it is an industrial zone<br>The bulletin boards on the roadside all contain elements of Chinese style, and there will be all kinds of rocks on the corner of the grass.<br>Even outside the door of an industrial design institute, they grow bamboo<br>As long as you pay attention, there are scenery everywhere</p><p>There is a small bar downstairs in the hotel where I live<br>This is not a tourist area<br>Very different from Shanghai<br>There is a mixture of Chinese and English, you look as if she is Chinese, not an exotic product</p><p>We often say<br>The biggest feature of the Chinese is the national melting pot<br>He will tolerate and assimilate foreign cultures<br>And what I saw in other cities can only be said to be Chinese-style Westernization<br>In Hangzhou, it’s a thorough integration.</p><p>Hangzhou traditional dishes<br>It came from Kaifeng at a glance<br>Xiaolongbao, cat ears, small wontons<br>And Henan and Shandong restaurants everywhere</p><p>Hangzhou is in the same line as Shanxi and Henan<br>Mainly pasta<br>Hasn’t changed in a thousand years</p><p>Hangzhou women have the sophistication of Shanghai women<br>With the boldness of a woman from the Central Plains<br>Woman passing by on the street<br>Wear two more tops and bottoms. A short top is called neon. Jeans are rarely seen on the lower body. Most of them are cloth skirts and gauze skirts, which are called clothes</p><p>There are a lot of people showing their belly<br>But don’t show your belly button<br>You don’t seem to think they dress up like this to attract the eyes of the opposite sex<br>But I think it should be dressed like this here</p><p>Rarely, Hangzhou women are amazing at first sight<br>More of it is that you look at her walking past as if you have blended into the scenery<br>As elegant, chic and beautiful as Hangzhou</p><p><strong>白蘋紅蓼西風裡 一色湖光萬頃秋</strong></p><p><img src="https://s2.loli.net/2022/12/30/XUFYZJhRSy4fbqu.jpg"></p><p>It takes early morning to go to West Lake, there are few people<br>Set foot on Beishan Road at 6 o’clock<br>Watching the sun gradually rise<br>Feel the lake breeze on your face<br>Listen to the birds chirping<br>Smell the fragrance of sweet-scented osmanthus<br>If the lake is foggy, you will want to blend in here</p><p>Compared with the pavilions in West Lake<br>I prefer the quietness of Lingyin<br>The winding road extends up the mountain<br>Both sides of the mountain road are full of tea trees<br>Every turn is an ingenuity<br>The more you go up the mountain, the stronger the fragrance of osmanthus<br>The more you go to the mountains, the less distracting thoughts in your heart will be.<br>I have turned the mountain road ten times, and I also have the urge to stay here ten times</p><p>Rent a yard, it doesn’t need to be big<br>Make a pot of tea without thickening<br>Entertain guests and friends, not much<br>Keep a dog, don’t have to be expensive<br>Stay with your parents, watch your children, and live your life like this with your wife.</p><blockquote><p>俺曾見，金陵玉樹鶯聲曉，秦淮水榭花開早，誰知道容易冰消。眼看他起朱樓，眼看他宴賓客，眼看他樓塌了，落個白茫茫大地真乾淨！</p></blockquote><blockquote><p>鳳凰山，伏梟鳥，孤山夢最真，舊境丟難掉。不如這輿圖換掉，謅一曲江南好，放笑聲唱到老。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Raving</title>
      <link href="/en/essay/Raving/"/>
      <url>/en/essay/Raving/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>What I miss is not our tacit smile while looking at each other, what I miss is not a hug, what I miss is not the breath of rushing into the sky in the dark, what I miss is actually on the balcony in Shenzhen, for the first time Calling you that unfamiliar talk, n73 is already hot enough to cook my ears, I’m afraid my ears will be cooked by the hot contact when I hit them, but I still refuse to put down the phone, flick the phone to continue the conversation, I What I miss, in fact, is faint, original, that kind of taste…</p><p>Every time I get a headache or upset because of my relationship, I think of that night, your sentence, why don’t you call me? It’s like a bird in the woods, and it’s like the bright clouds in the morning, crisp and thorough. , Cool and comfortable~<br>The rock-solid relationship is the one I miss… the trip to Shenzhen… the covenant made on the balcony~</p><blockquote><p>200802132116</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Father&#39;s son</title>
      <link href="/en/novel/Father-and-child/Father&#39;s-son/"/>
      <url>/en/novel/Father-and-child/Father&#39;s-son/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><p>Recently we often talk<br>Although every time it ends with a dispute</p><p>Until now I still think<br>He objected to all my views that did not fit his ideas<br>I am still impressed</p><p>Maybe it’s the N+1th time he mentioned his thoughts on my future<br>As long as a peaceful life is satisfied<br>I laughed inside as always<br>The future I want is not the lake but the ocean</p><p>I suddenly learned that he has dyed his hair for many years<br>To my impression he can still lift me above the giant<br>But I don’t know me who never dared to speak loudly in front of him before<br>I can also roar loudly</p><p>When he faced my roar<br>When he can calmly reason<br>I found his gray hair<br>It’s too much to hide</p><p>But I still talk about my ideals willfully<br>Somewhat ridiculous<br>Somewhat ridiculous</p><p>When i found out<br>The fear he can’t hide<br>When I’m afraid I can’t help me anymore<br>In a way of negating my point of view over and over again<br>To prove his authority</p><p>When i’m the same<br>When I feel unreasonable<br>I don’t know some where in my heart<br>Pain like cramping</p>]]></content>
      
      
      <categories>
          
          <category> novel </category>
          
          <category> Father and child </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Consciousness | Sharo Double Tree Garden</title>
      <link href="/en/essay/Consciousness-Sharo-Double-Tree-Garden/"/>
      <url>/en/essay/Consciousness-Sharo-Double-Tree-Garden/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Note</strong></p><p>This article was automatically translated using Google</p></blockquote><hr><p><em><strong>—Written in the summer of 1997, written for Saint Seiya Nakasaka in Saro Double Tree Garden</strong></em></p><p><img src="https://s2.loli.net/2022/12/30/UjwGMNqaVA8Lg56.png" alt="Sharjah | Garo Double Tree Park"></p><blockquote><p>花が咲き、そして散る。星が辉き、いつか消える。この地球も、太阳、银河系、そして大きな宇宙さえもいつかは死する时が来る。人间の一瞬などそれらに比べれば瞬きほどのわずかなものであろう。そのわずかな一时に、人はうまれ、笑い、涙、闘い、伤つき、喜び、悲しみ、谁かを憎み、谁かを爱し。すべては刹那の邂逅。そして谁かも死という永远の眠りに包まれる</p></blockquote><p>The earth, the sun, and even the entire universe will have a day of death. Life and these scores are just a short moment. In this moment, smiling, crying, struggling, hurt, happy, sad, who you like, who you hate, Everything is a short meet, no one can escape eternal sleep.</p><p>Rather than crying, hurting, sad, hating, I would rather smile, struggle, be happy, and like. Everything we encounter in this short moment, no matter good or bad, will not change because of our emotions. Therefore, I choose to face it happily and enjoy this moment full of joy, and when you start to enjoy some, you will find that all bad things have changed.</p>]]></content>
      
      
      <categories>
          
          <category> essay </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
